import{css as e,LitElement as t,html as i}from"lit";import{customElement as a,property as n,state as s}from"lit/decorators.js";import{choose as d}from"lit/directives/choose.js";import{map as o}from"lit/directives/map.js";import{msg as r,localized as l}from"@lit/localize";import"@blindnet/core";import{when as c}from"lit/directives/when.js";function p(e,t,i,a){var n,s=arguments.length,d=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(d=(s<3?n(d):s>3?n(t,i,d):n(t,i))||d);return s>3&&d&&Object.defineProperty(t,i,d),d}let h=class extends t{render(){return i``}};var m,E,u,A,R,b,v,N,g,T,I,C,S,O;h.styles=e``,h=p([a("frequent-requests-menu")],h),function(e){e.ACCESS="ACCESS",e.DELETE="DELETE",e.MODIFY="MODIFY",e.OBJECT="OBJECT",e.PORTABILITY="PORTABILITY",e.RESTRICT="RESTRICT",e.REVOKE="REVOKE-CONSENT",e.TRANSPARENCY="TRANSPARENCY",e["TRANSPARENCY.DATA.CATEGORIES"]="TRANSPARENCY.DATA-CATEGORIES",e["TRANSPARENCY.DPO"]="TRANSPARENCY.DPO",e["TRANSPARENCY.KNOWN"]="TRANSPARENCY.KNOWN",e["TRANSPARENCY.LEGAL.BASES"]="TRANSPARENCY.LEGAL-BASES",e["TRANSPARENCY.ORGANIZATION"]="TRANSPARENCY.ORGANIZATION",e["TRANSPARENCY.POLICY"]="TRANSPARENCY.POLICY",e["TRANSPARENCY.PROCESSING.CATEGORIES"]="TRANSPARENCY.PROCESSING-CATEGORIES",e["TRANSPARENCY.PROVENANCE"]="TRANSPARENCY.PROVENANCE",e["TRANSPARENCY.PURPOSE"]="TRANSPARENCY.PURPOSE",e["TRANSPARENCY.RETENTION"]="TRANSPARENCY.RETENTION",e["TRANSPARENCY.WHERE"]="TRANSPARENCY.WHERE",e["TRANSPARENCY.WHO"]="TRANSPARENCY.WHO",e["OTHER.DEMAND"]="OTHER-DEMAND"}(m||(m={})),function(e){e.TRANSPARENCY_DATA_CATEGORIES="TRANSPARENCY.DATA-CATEGORIES",e.TRANSPARENCY_DPO="TRANSPARENCY.DPO",e.TRANSPARENCY_KNOWN="TRANSPARENCY.KNOWN",e.TRANSPARENCY_LEGAL_BASES="TRANSPARENCY.LEGAL-BASES",e.TRANSPARENCY_ORGANIZATION="TRANSPARENCY.ORGANIZATION",e.TRANSPARENCY_POLICY="TRANSPARENCY.POLICY",e.TRANSPARENCY_PROCESSING_CATEGORIES="TRANSPARENCY.PROCESSING-CATEGORIES",e.TRANSPARENCY_PROVENANCE="TRANSPARENCY.PROVENANCE",e.TRANSPARENCY_PURPOSE="TRANSPARENCY.PURPOSE",e.TRANSPARENCY_RETENTION="TRANSPARENCY.RETENTION",e.TRANSPARENCY_WHERE="TRANSPARENCY.WHERE",e.TRANSPARENCY_WHO="TRANSPARENCY.WHO"}(E||(E={})),function(e){e.ALL="*",e.USER="USER",e["USER.DATA-SUBJECT"]="USER.DATA-SUBJECT",e.DERIVED="DERIVED",e.TRANSFERRED="TRANSFERRED"}(u||(u={})),function(e){e.IN_PROCESSING="IN_PROCESSING",e.PARTIALLY_COMPLETED="PARTIALLY_COMPLETED",e.COMPLETED="COMPLETED",e.CANCELED="CANCELED"}(A||(A={})),function(e){e.GRANTED="GRANTED",e.DENIED="DENIED",e["PARTIALLY-GRANTED"]="PARTIALLY-GRANTED",e["UNDER-REVIEW"]="UNDER-REVIEW",e.CANCELED="CANCELED"}(R||(R={})),function(e){e.ALL="*",e.SYSTEM="SYSTEM",e.ORGANIZATION="ORGANIZATION",e.PARTNERS="PARTNERS",e["PARTNERS.DOWNWARD"]="PARTNERS.DOWNWARD",e["PARTNERS.UPWARD"]="PARTNERS.UPWARD"}(b||(b={})),function(e){e["PARTNERS.DOWNWARD"]="PARTNERS.DOWNWARD",e["PARTNERS.UPWARD"]="PARTNERS.UPWARD"}(v||(v={})),function(e){e.ALL="*",e.AFFILIATION="AFFILIATION",e["AFFILIATION.MEMBERSHIP"]="AFFILIATION.MEMBERSHIP",e["AFFILIATION.MEMBERSHIP.UNION"]="AFFILIATION.MEMBERSHIP.UNION",e["AFFILIATION.SCHOOL"]="AFFILIATION.SCHOOL",e["AFFILIATION.WORKPLACE"]="AFFILIATION.WORKPLACE",e.BEHAVIOR="BEHAVIOR",e["BEHAVIOR.ACTIVITY"]="BEHAVIOR.ACTIVITY",e["BEHAVIOR.CONNECTION"]="BEHAVIOR.CONNECTION",e["BEHAVIOR.PREFERENCE"]="BEHAVIOR.PREFERENCE",e["BEHAVIOR.TELEMETRY"]="BEHAVIOR.TELEMETRY",e.BIOMETRIC="BIOMETRIC",e.CONTACT="CONTACT",e["CONTACT.EMAIL"]="CONTACT.EMAIL",e["CONTACT.ADDRESS"]="CONTACT.ADDRESS",e["CONTACT.PHONE"]="CONTACT.PHONE",e.DEMOGRAPHIC="DEMOGRAPHIC",e["DEMOGRAPHIC.AGE"]="DEMOGRAPHIC.AGE",e["DEMOGRAPHIC.BELIEFS"]="DEMOGRAPHIC.BELIEFS",e["DEMOGRAPHIC.GENDER"]="DEMOGRAPHIC.GENDER",e["DEMOGRAPHIC.ORIGIN"]="DEMOGRAPHIC.ORIGIN",e["DEMOGRAPHIC.RACE"]="DEMOGRAPHIC.RACE",e["DEMOGRAPHIC.SEXUAL-ORIENTATION"]="DEMOGRAPHIC.SEXUAL-ORIENTATION",e.DEVICE="DEVICE",e.FINANCIAL="FINANCIAL",e["FINANCIAL.BANK-ACCOUNT"]="FINANCIAL.BANK-ACCOUNT",e.GENETIC="GENETIC",e.HEALTH="HEALTH",e.IMAGE="IMAGE",e.LOCATION="LOCATION",e.NAME="NAME",e.PROFILING="PROFILING",e.RELATIONSHIPS="RELATIONSHIPS",e.UID="UID",e["UID.ID"]="UID.ID",e["UID.IP"]="UID.IP",e["UID.USER-ACCOUNT"]="UID.USER-ACCOUNT",e["UID.SOCIAL-MEDIA"]="UID.SOCIAL-MEDIA",e["OTHER-DATA"]="OTHER-DATA"}(N||(N={})),function(e){e.ALL="*",e.ANONYMIZATION="ANONYMIZATION",e["AUTOMATED-INFERENCE"]="AUTOMATED-INFERENCE",e["AUTOMATED-DECISION-MAKING"]="AUTOMATED-DECISION-MAKING",e.COLLECTION="COLLECTION",e.GENERATING="GENERATING",e.PUBLISHING="PUBLISHING",e.STORING="STORING",e.SHARING="SHARING",e.USING="USING",e["OTHER-PROCESSING"]="OTHER-PROCESSING"}(g||(g={})),function(e){e.ALL="*",e.ADVERTISING="ADVERTISING",e.COMPLIANCE="COMPLIANCE",e.EMPLOYMENT="EMPLOYMENT",e.JUSTICE="JUSTICE",e.MARKETING="MARKETING",e.MEDICAL="MEDICAL",e.PERSONALIZATION="PERSONALIZATION",e["PUBLIC-INTERESTS"]="PUBLIC-INTERESTS",e.RESEARCH="RESEARCH",e.SALE="SALE",e.SECURITY="SECURITY",e.SERVICES="SERVICES",e["SERVICES.ADDITIONAL-SERVICES"]="SERVICES.ADDITIONAL-SERVICES",e["SERVICES.BASIC-SERVICE"]="SERVICES.BASIC-SERVICE",e["SOCIAL-PROTECTION"]="SOCIAL-PROTECTION",e.TRACKING="TRACKING",e["VITAL-INTERESTS"]="VITAL-INTERESTS",e["OTHER-PURPOS"]="OTHER-PURPOSE"}(T||(T={})),function(e){e["IDENTITY-UNCONFIRMED"]="IDENTITY-UNCONFIRMED",e["LANGUAGE-UNSUPPORTED"]="LANGUAGE-UNSUPPORTED",e["VALID-REASONS"]="VALID-REASONS",e.IMPOSSIBLE="IMPOSSIBLE",e["NO-SUCH-DATA"]="NO-SUCH-DATA",e["REQUEST-UNSUPPORTED"]="REQUEST-UNSUPPORTED",e["USER-UNKNOWN"]="USER-UNKNOWN",e["OTHER-MOTIVE"]="OTHER-MOTIVE"}(I||(I={})),function(e){e.CONTRACT="CONTRACT",e.CONSENT="CONSENT",e["LEGITIMATE-INTEREST"]="LEGITIMATE-INTEREST",e.NECESSARY="NECESSARY",e["NECESSARY.LEGAL-OBLIGATION"]="NECESSARY.LEGAL-OBLIGATION",e["NECESSARY.PUBLIC-INTEREST"]="NECESSARY.PUBLIC-INTEREST",e["NECESSARY.VITAL-INTEREST"]="NECESSARY.VITAL-INTEREST",e["OTHER-LEGAL-BASE"]="OTHER-LEGAL-BASE"}(C||(C={})),function(e){e["NO-LONGER-THAN"]="NO-LONGER-THAN",e["NO-LESS-THAN"]="NO-LESS-THAN"}(S||(S={})),function(e){e["CAPTURE-DATE"]="CAPTURE-DATE",e["RELATIONSHIP-START"]="RELATIONSHIP-START",e["RELATIONSHIP-END"]="RELATIONSHIP-END",e["SERVICE-START"]="SERVICE-START",e["SERVICE-END"]="SERVICE-END"}(O||(O={}));const f=e`.border--light{border:1px solid;border-color:var(--prci-border-light-color,#c4c4c4)}.border--medium{border:1px solid;border-color:var(--prci-border-medium-color,#5b5b5b)}.border--dark{border:1px solid;border-color:var(--prci-border-dark-color,#000)}.border--rounded{border-radius:10px}.border--thin{border-width:var(--prci-border-thin,1px)}.border--thick{border-width:var(--prci-border-thick,2px)}button{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px}.svg-btn{border:none;padding:0;margin:0;background:0 0}.link-btn{display:grid;grid-auto-flow:column;font-size:16px;column-gap:7.5px;background:0 0;border:none;width:fit-content;align-items:center;padding:0}.nav-btn{height:50px;background-color:#18a0fb;border-width:0;border-radius:6px;font-size:18px;color:#fff;margin:0 0 -200px 0;padding:0 25px}.btn--centered{justify-self:center;justify-content:center}.btn--curved{border-radius:8px}.btn--clickable{box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}.btn--clickable:not([disabled]):hover{transform:translateY(-2px);transition:.2s;box-shadow:0 7px 10px 0 rgba(0,0,0,.3),0 4px 4px rgba(0,0,0,.2),0 6px 8px rgba(0,0,0,.2),0 10px 16px rgba(0,0,0,.2)}.btn--clickable:not([disabled]):active{transform:translateY(2px);transition:.2s;box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}p{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px;padding:0;margin:0}span{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px}textarea{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px;background:#f8f8fc;border:1px solid #e5e5e5;border-radius:8px}.text--underline{text-decoration:underline}.text--italic{font-style:italic}.text--center-vertical{align-items:center;justify-content:center}.view-ctr{padding:60px;width:1050px}.provenance-restriction{border:none;padding:0;margin:0}.provenance-restriction input{margin:20px 0 20px 30px}.provenance-restriction input:nth-last-child(3){margin:20px 0 0 30px}.provenance-restriction input:first-child{margin:35px 0 20px 30px}.date-restriction{display:grid;row-gap:35px}.date-restriction div{padding:0 0 0 30px}`,y={ACCESS:()=>r("ACCESS"),DELETE:()=>r("DELETE"),MODIFY:()=>r("MODIFY"),OBJECT:()=>r("OBJECT"),PORTABILITY:()=>r("PORTABILITY"),RESTRICT:()=>r("RESTRICT"),"REVOKE-CONSENT":()=>r("REVOKE-CONSENT"),TRANSPARENCY:()=>r("TRANSPARENCY"),"TRANSPARENCY.DATA-CATEGORIES":()=>r("TRANSPARENCY.DATA-CATEGORIES"),"TRANSPARENCY.DPO":()=>r("TRANSPARENCY.DPO"),"TRANSPARENCY.KNOWN":()=>r("TRANSPARENCY.KNOWN"),"TRANSPARENCY.LEGAL-BASES":()=>r("TRANSPARENCY.LEGAL-BASES"),"TRANSPARENCY.ORGANIZATION":()=>r("TRANSPARENCY.ORGANIZATION"),"TRANSPARENCY.POLICY":()=>r("TRANSPARENCY.POLICY"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>r("TRANSPARENCY.PROCESSING-CATEGORIES"),"TRANSPARENCY.PROVENANCE":()=>r("TRANSPARENCY.PROVENANCE"),"TRANSPARENCY.PURPOSE":()=>r("TRANSPARENCY.PURPOSE"),"TRANSPARENCY.RETENTION":()=>r("TRANSPARENCY.RETENTION"),"TRANSPARENCY.WHERE":()=>r("TRANSPARENCY.WHERE"),"TRANSPARENCY.WHO":()=>r("TRANSPARENCY.WHO"),"OTHER-DEMAND":()=>r("OTHER-DEMAND")},D={ACCESS:()=>r("Access my data"),DELETE:()=>r("Have my data deleted"),MODIFY:()=>r("Modify or complement my data"),OBJECT:()=>r("Object to processing of my data"),PORTABILITY:()=>r("Take my data and have it transfered somewhere else"),RESTRICT:()=>r("Restrict processing of my data to a particular scope"),"REVOKE-CONSENT":()=>r("Revoke previously given consent for data processing"),TRANSPARENCY:()=>r("Demand information related to data processing practices and know if the system has data on me"),"OTHER-DEMAND":()=>r("Do or know something else"),"TRANSPARENCY.DATA-CATEGORIES":()=>r("The categories of the data the organization has on me"),"TRANSPARENCY.DPO":()=>r("The contact details of the data protection officer"),"TRANSPARENCY.KNOWN":()=>r("If the organization has data on me"),"TRANSPARENCY.LEGAL-BASES":()=>r("The legal bases for processing my data (including legitimate interests)"),"TRANSPARENCY.ORGANIZATION":()=>r("The identity and contact details of the organization processing my data"),"TRANSPARENCY.POLICY":()=>r("The policies applied to processing of data concerning me"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>r("The cateogories of processing being done on the data the organization has on me"),"TRANSPARENCY.PROVENANCE":()=>r("The sources that the data concerning me come from"),"TRANSPARENCY.PURPOSE":()=>r("The purpose of the processing of the data the organization has on me"),"TRANSPARENCY.RETENTION":()=>r("For how long the data concerning me kept"),"TRANSPARENCY.WHERE":()=>r("Where the data about me is stored"),"TRANSPARENCY.WHO":()=>r("Who can access the data that the organization has on me")},P={"*":()=>r("All provenances"),USER:()=>r("The data provided by a user of the system (potentially the Data Subject)"),"USER.DATA-SUBJECT":()=>r("The data is provided by the Data Subject"),DERIVED:()=>r("The data derived from user actions, extracted from other data or inferred"),TRANSFERRED:()=>r("The data obtained by transfer from another System")},x={"*":()=>r(""),AFFILIATION:()=>r("affiliation"),"AFFILIATION.MEMBERSHIP":()=>r("affiliation membership"),"AFFILIATION.MEMBERSHIP.UNION":()=>r(""),"AFFILIATION.SCHOOL":()=>r(""),"AFFILIATION.WORKPLACE":()=>r(""),BEHAVIOR:()=>r("behavior"),"BEHAVIOR.ACTIVITY":()=>r(""),"BEHAVIOR.CONNECTION":()=>r(""),"BEHAVIOR.PREFERENCE":()=>r(""),"BEHAVIOR.TELEMETRY":()=>r(""),BIOMETRIC:()=>r("biometric"),CONTACT:()=>r("contact"),"CONTACT.EMAIL":()=>r(""),"CONTACT.ADDRESS":()=>r(""),"CONTACT.PHONE":()=>r(""),DEMOGRAPHIC:()=>r("demographic"),"DEMOGRAPHIC.AGE":()=>r(""),"DEMOGRAPHIC.BELIEFS":()=>r(""),"DEMOGRAPHIC.GENDER":()=>r(""),"DEMOGRAPHIC.ORIGIN":()=>r(""),"DEMOGRAPHIC.RACE":()=>r(""),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>r(""),DEVICE:()=>r("device"),FINANCIAL:()=>r("financial"),"FINANCIAL.BANK-ACCOUNT":()=>r("finacial bank account"),GENETIC:()=>r("genetic"),HEALTH:()=>r("health"),IMAGE:()=>r("image"),LOCATION:()=>r("location"),NAME:()=>r("name"),PROFILING:()=>r("profiling"),RELATIONSHIPS:()=>r("relationships"),UID:()=>r("uid"),"UID.ID":()=>r(""),"UID.IP":()=>r(""),"UID.USER-ACCOUNT":()=>r(""),"UID.SOCIAL-MEDIA":()=>r(""),"OTHER-DATA":()=>r("other data")},$={"*":()=>r(i`<b>ALL information related to data processing practices and know if the organization has data on me</b>`),AFFILIATION:()=>r(i`<b>AFFILIATION data:</b> Groups and Organisations I am linked to through work, studies, or membership`),"AFFILIATION.MEMBERSHIP":()=>r(i``),"AFFILIATION.MEMBERSHIP.UNION":()=>r(i``),"AFFILIATION.SCHOOL":()=>r(i``),"AFFILIATION.WORKPLACE":()=>r(i``),BEHAVIOR:()=>r(i`<b>BEHAVIOR data:</b> Data about my behavior`),"BEHAVIOR.ACTIVITY":()=>r(i``),"BEHAVIOR.CONNECTION":()=>r(i``),"BEHAVIOR.PREFERENCE":()=>r(i``),"BEHAVIOR.TELEMETRY":()=>r(i``),BIOMETRIC:()=>r(i`<b>BIOMETRIC data</b>`),CONTACT:()=>r(i`<b>CONTACT data:</b> Data allowing to contact me`),"CONTACT.EMAIL":()=>r(i``),"CONTACT.ADDRESS":()=>r(i``),"CONTACT.PHONE":()=>r(i``),DEMOGRAPHIC:()=>r(i`<b>DEMOGRAPHIC data:</b> All information allowing to class me in a demographic category`),"DEMOGRAPHIC.AGE":()=>r(i``),"DEMOGRAPHIC.BELIEFS":()=>r(i``),"DEMOGRAPHIC.GENDER":()=>r(i``),"DEMOGRAPHIC.ORIGIN":()=>r(i``),"DEMOGRAPHIC.RACE":()=>r(i``),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>r(i``),DEVICE:()=>r(i`<b>DEVICE data:</b> Data about the device I used`),FINANCIAL:()=>r(i`<b>FINANCIAL data:</b> Payment data, financial history and data about my financial situation`),"FINANCIAL.BANK-ACCOUNT":()=>r(i``),GENETIC:()=>r(i`<b>GENETIC data</b>`),HEALTH:()=>r(i`<b>HEALTH data:</b> Data about my health`),IMAGE:()=>r(i`<b>IMAGE data:</b> Any graphic representation (e.g., image, video) of me`),LOCATION:()=>r(i`<b>LOCATION data:</b> Geographic location`),NAME:()=>r(i`<b>NAME data:</b> First names, last names, nicknames, and other names`),PROFILING:()=>r(i`<b>PROFILING data:</b> Any data establishing a degree of similarity of with others (e.g., clusters, user-profiles)`),RELATIONSHIPS:()=>r(i`<b>RELATIONSHIPS data:</b> Data about relationships I have with others, social activity and interaction`),UID:()=>r(i`<b>UID data:</b> Any data that uniquely identifies me`),"UID.ID":()=>r(i``),"UID.IP":()=>r(i``),"UID.USER-ACCOUNT":()=>r(i``),"UID.SOCIAL-MEDIA":()=>r(i``),"OTHER-DATA":()=>r(i`<b>OTHER DATA:</b> Any other categories or forms of data`)},L={"*":()=>r(i`All targets`),SYSTEM:()=>r(i`This system`),ORGANIZATION:()=>r(i`This system and all systems within this organization`),PARTNERS:()=>r(i`This system, all systems within this organization, and all partners systems where data has been <b>shared or obtained</b>`),"PARTNERS.DOWNWARD":()=>r(i`This system, all systems within this organization, and all partners systems with which data has been <b>shared</b>`),"PARTNERS.UPWARD":()=>r(i`This system, all systems within this organization, and all partners systems from which data has been <b>obtained</b>`)},w={IN_PROCESSING:()=>r(i`In processing`),PARTIALLY_COMPLETED:()=>r(i`Partially completed`),COMPLETED:()=>r(i`Completed`),CANCELED:()=>r(i`Canceled`)},k={GRANTED:()=>r("Granted"),DENIED:()=>r("Denied"),"PARTIALLY-GRANTED":()=>r("Partially Granted"),"UNDER-REVIEW":()=>r("Under Review"),CANCELED:()=>r("Canceled")},_={"NO-LONGER-THAN":()=>r("no longer than"),"NO-LESS-THAN":()=>r("no less than")},M={"CAPTURE-DATE":()=>r("capture date"),"RELATIONSHIP-START":()=>r("relationship start"),"RELATIONSHIP-END":()=>r("relationship end"),"SERVICE-START":()=>r("service start"),"SERVICE-END":()=>r("service end")};var Y,G,U,H;!function(e){e[e.MENU=0]="MENU",e[e.EDIT=1]="EDIT",e[e.REVIEW=2]="REVIEW",e[e.REQUESTS=3]="REQUESTS",e[e.SUBMITTED=4]="SUBMITTED",e[e.STATUS=5]="STATUS",e[e.AUTH=6]="AUTH"}(Y||(Y={})),function(e){e[e.BUILD=0]="BUILD",e[e.REVIEW=1]="REVIEW",e[e.SENT=2]="SENT"}(G||(G={})),function(e){e[e.SELECT_ACTION=0]="SELECT_ACTION",e[e.AUTH=1]="AUTH",e[e.EDIT_OPEN=2]="EDIT_OPEN",e[e.EDIT_COLLAPSED=3]="EDIT_COLLAPSED",e[e.REVIEW=4]="REVIEW"}(U||(U={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.PARTIAL=1]="PARTIAL",e[e.OPEN=2]="OPEN"}(H||(H={}));const B=new URL(new URL("assets/edit-fill.svg",import.meta.url).href,import.meta.url).href,q=new URL(new URL("assets/delete.svg",import.meta.url).href,import.meta.url).href;let F=class extends t{constructor(){super(...arguments),this.demandGroupId="",this.demands=[],this.demand={action:m.ACCESS},this.confirmDelete=!1,this.target=b.PARTNERS,this._action=m.ACCESS}getAccessReviewTemplate(){var e,t,a,n,s,d;const l=null===(t=null===(e=this.demand.restrictions)||void 0===e?void 0:e.date_range)||void 0===t?void 0:t.from,p=null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n?void 0:n.to,h=null===(s=this.demand.restrictions)||void 0===s?void 0:s.provenance,m=null===(d=this.demand.restrictions)||void 0===d?void 0:d.privacy_scope;return i`
      <h4>${r("I want to access:")}</h4>
      <ul id="access-review-list" class="review-list">
        ${c(m&&Object.values(N).filter((e=>!e.includes(".")&&e!==N.ALL)).every((e=>m.map((e=>e.dc)).includes(e))),(()=>i`
            <li>${$[N.ALL]()}</li>
          `),(()=>{var e;return i`
            ${o(null===(e=this.demand.restrictions)||void 0===e?void 0:e.privacy_scope,(e=>i`<li>${$[e.dc]()}</li> `))}
          `}))}
      </ul>
      ${c(l||p,(()=>i`<p>${this.getDateRangeReviewTemplate(l,p)}</p>`))}
      ${c((null==h?void 0:h.term)!==u.ALL,(()=>i`
          <p>
            ${r("For:")} <b>${P[h.term]()}</b>
          </p>
        `))}
      ${c((null==h?void 0:h.target)!==b.SYSTEM,(()=>i`
          <p>
            ${r("From:")} <b>${L[h.target]()}</b>
          </p>
        `))}
      ${c(this.demand.message,(()=>i`
          <h4>${r("Plus additional info:")}</h4>
          <span class="extra-msg-txt"><i>${this.demand.message}</i></span>
        `))}
    `}getDeleteReviewTemplate(){var e,t,a,n,s,d;const l=null===(t=null===(e=this.demand.restrictions)||void 0===e?void 0:e.date_range)||void 0===t?void 0:t.from,p=null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n?void 0:n.to,h=null===(s=this.demand.restrictions)||void 0===s?void 0:s.provenance,m=null===(d=this.demand.restrictions)||void 0===d?void 0:d.privacy_scope;return i`
      <h4>${r("I want to delete:")}</h4>
      <ul id="delete-review-list" class="review-list">
        ${c(m&&Object.values(N).filter((e=>!e.includes(".")&&e!==N.ALL)).every((e=>m.map((e=>e.dc)).includes(e))),(()=>i`
            <li>${$[N.ALL]()}</li>
          `),(()=>{var e;return i`
            ${o(null===(e=this.demand.restrictions)||void 0===e?void 0:e.privacy_scope,(e=>i`<li>${$[e.dc]()}</li> `))}
          `}))}
      </ul>
      ${c(l||p,(()=>i`<p>${this.getDateRangeReviewTemplate(l,p)}</p>`))}
      ${c((null==h?void 0:h.term)!==u.ALL,(()=>i`
          <p>
            ${r("For:")} <b>${P[h.term]()}</b>
          </p>
        `))}
      ${c((null==h?void 0:h.target)!==b.SYSTEM,(()=>i`
          <p>
            ${r("From:")} <b>${L[h.target]()}</b>
          </p>
        `))}
      ${c(this.demand.message,(()=>i`
          <h4>${r("Plus additional info:")}</h4>
          <span class="extra-msg-txt"><i>${this.demand.message}</i></span>
        `))}
    `}getModifyReviewTemplate(){return i``}getObjectReviewTemplate(){return i``}getPortabilityReviewTemplate(){return i``}getRestrictReviewTemplate(){return i``}getRevokeReviewTemplate(){return i`
      <h4>${r("I no longer consent to:")}</h4>
      <ul class="review-list">
        ${o(this.demands,(()=>i`
            <li>
              The storage and processing of my data for the purposes of the
              prize draw
            </li>
          `))}
      </ul>
      ${c(this.demands[0].message,(()=>i`
          <span>${r("Plus additional info:")}</span>
          <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span>
        `))}
    `}getTransparencyReviewTemplate(){var e;const t=null===(e=this.demands[0].restrictions)||void 0===e?void 0:e.provenance;return i`
      <h4>${r("I want to know:")}</h4>
      <ul id="transparency-review-list" class="review-list">
        ${o(this.demands,(e=>i` <li><b>${D[e.action]()}</b></li> `))}
      </ul>
      ${c((null==t?void 0:t.term)!==u.ALL,(()=>i`
          <p>
            ${r("For:")} <b>${P[t.term]()}</b>
          </p>
        `))}
      ${c(this.demands[0].message,(()=>i`
          <h4>${r("Plus additional info:")}</h4>
          <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span>
        `))}
    `}getOtherDemandReviewTemplate(){return i``}getDateRangeReviewTemplate(e,t){return e&&t?i`${r("From")} <b>${null==e?void 0:e.toLocaleDateString("en-GB")}</b> to
        <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:e?i`${r("Since")} <b>${null==e?void 0:e.toLocaleDateString("en-GB")}</b>`:t?i`${r("Up to")} <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:i``}handleEditClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.EDIT,newAction:this.demands[0].action.includes("TRANSPARENCY")?m.TRANSPARENCY:this.demands[0].action,demandGroupId:this.demandGroupId}}))}handleDeleteClick(){this.confirmDelete=!0}handleConfirmDeleteClick(){this.dispatchEvent(new CustomEvent("demand-delete",{bubbles:!0,composed:!0,detail:{demandGroupId:this.demandGroupId}})),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}handleCancelDeleteClick(){this.confirmDelete=!1}handleTargetClick(e){const{id:t}=e.target;this.target=t,this.dispatchEvent(new CustomEvent("request-target-change",{bubbles:!0,composed:!0,detail:{id:t}}))}handleSubmitClick(){this.dispatchEvent(new Event("submit-request",{bubbles:!0,composed:!0}))}willUpdate(e){e.has("demands")&&this.demands.length>0&&(this._action=this.demands[0].action,this._action.includes("TRANSPARENCY")?this._action=m.TRANSPARENCY:[this.demand]=this.demands)}render(){return i`
      <h2><b>${r("My demand(s):")}</b></h2>
      
      <div class="dmd-review-ctr border--light border--rounded">
        <div id="review-heading-row">
          <h3 id="review-action-heading">${y[this._action]()} Demand</h3>
          <div id="review-btns">
            <button class='svg-btn' @click=${this.handleEditClick}>
              <img src=${B} alt='edit'/>
            </button>
            <button class='svg-btn' @click=${this.handleDeleteClick}>
              <img src=${q} alt='delete'/>
            </button>
          </div>
        </div>
        <div id="review-content">
          ${d(this._action,[[m.ACCESS,()=>this.getAccessReviewTemplate()],[m.DELETE,()=>this.getDeleteReviewTemplate()],[m.MODIFY,()=>this.getModifyReviewTemplate()],[m.OBJECT,()=>this.getObjectReviewTemplate()],[m.PORTABILITY,()=>this.getPortabilityReviewTemplate()],[m.RESTRICT,()=>this.getRestrictReviewTemplate()],[m.REVOKE,()=>this.getRevokeReviewTemplate()],[m.TRANSPARENCY,()=>this.getTransparencyReviewTemplate()],[m["OTHER.DEMAND"],()=>this.getOtherDemandReviewTemplate()]])}
        </div>
        ${c(this.confirmDelete,(()=>i`
            <div id="delete-confirm-popup" class="border--rounded">
              <span class="popup-txt"
                >${r("You are about to remove a demand")}</span
              >
              <span class="popup-txt"
                >${r(i`Do you confirm <b>deleting this demand</b>?`)}</span
              >
              <div id="popup-btns-ctr">
                <button
                  id="confirm-delete-btn"
                  class="btn--curved popup-btn"
                  @click=${this.handleConfirmDeleteClick}
                >
                  ${r("Delete")}
                </button>
                <button
                  id="cancel-delete-btn"
                  class="btn--curved popup-btn"
                  @click=${this.handleCancelDeleteClick}
                >
                  ${r("Cancel")}
                </button>
              </div>
            </div>
          `))}
        </div>

      </div>
      <!-- Uncomment when supporting multiple demands -->
      <!-- <div id="new-dmd-ctr" class="border--medium border--rounded">
        <span><b>${r("I want to add another demand")}</b></span>
        <button class="svg-btn">
          <img src="packages/prci/src/assets/icons/add-circle.svg" alt="add icon"></img>
        </button>
      </div> -->
      <!-- Submit button -->
      <slotted-dropdown
        id='request-settings'  
        .header=${r("Privacy Request Advanced settings")}
        include-buttons
      >
        <div>
          <span> ${r("I address my Privacy Request to:")} </span>
          <fieldset class="provenance-restriction">
            ${Object.values(b).filter((e=>e!==b.ALL)).map((e=>i`
                <input
                  id=${e}
                  name='provenance-target'
                  type='radio'
                  ?checked=${this.target===e}
                  @click=${this.handleTargetClick}>
                </input>
                <label for=${e}>${L[e]()}</label><br/>
              `))}
          </fieldset>
        </div>
      </slotted-dropdown>
      <button
        id="submit-btn"
        class="nav-btn btn--centered  btn--clickable"
        @click=${this.handleSubmitClick}
      >
        ${r("Submit Privacy Request")}
      </button>
    `}};F.styles=[f,e`
      :host {
        display: grid;
      }

      :host([confirm-delete]) .dmd-review-ctr {
        background: #c4c4c4;
        opacity: 0.7;
      }

      #review-heading-row {
        display: grid;
        grid-area: 1/1/2/2;
        grid-template-columns: repeat(2, 1fr);
        z-index: 2;
      }

      .dmd-review-ctr {
        display: grid;
        padding: 40px;
      }

      #review-btns {
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        column-gap: 20px;
      }

      .review-btn {
        width: 24px;
        height: 24px;
      }

      #review-content {
        display: grid;
        grid-area: 2/1/3/2;
        z-index: 1;
      }

      .extra-msg-txt {
        padding: 0px 0px 0px 20px;
      }

      .review-list li:not(:last-child) {
        margin: 0px 0px 20px 0px;
      }

      .review-list {
        margin: 0px;
      }

      #request-settings {
        margin: 20px 0px 0px 0px;
      }

      #delete-confirm-popup {
        display: grid;
        row-gap: 20px;
        background: white;
        padding: 40px;
        z-index: 2;
        grid-area: 1/1/3/2;
        justify-self: center;
        align-self: center;
        width: 40%;
        height: 150px;
      }

      .popup-txt {
        text-align: center;
      }

      #popup-btns-ctr {
        display: flex;
        column-gap: 50px;
        justify-content: center;
      }

      .popup-btn {
        min-width: 30%;
        max-width: 200px;
        /* width: 30%; */
        font-size: 18px;
      }

      #confirm-delete-btn {
        background: red;
        color: white;
        border: none;
      }

      #cancel-delete-btn {
        background: white;
        color: black;
        border: 2px solid #18a0fb;
      }

      #submit-btn {
        transform: translateY(35px);
      }

      h2,
      h3 {
        margin-top: 0px;
      }

      h4 {
        font-weight: normal;
      }
    `],p([n({attribute:!1})],F.prototype,"demandGroupId",void 0),p([n({attribute:!1})],F.prototype,"demands",void 0),p([n({attribute:!1})],F.prototype,"demand",void 0),p([n({type:Boolean,reflect:!0,attribute:"confirm-delete"})],F.prototype,"confirmDelete",void 0),p([n({attribute:!1})],F.prototype,"target",void 0),p([s()],F.prototype,"_action",void 0),F=p([a("review-view")],F);let V=class extends t{constructor(){super(...arguments),this.action=m.ACCESS,this.disabled=!1}handleClick(){const e=new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.EDIT,newAction:this.action}});this.dispatchEvent(e)}render(){return i`<button class="action-button btn--clickable" @click="${this.handleClick}" ?disabled="${this.disabled}"><strong>${y[this.action]()}:</strong> ${D[this.action]()}</button>`}};V.styles=[f,e`.action-button{border-radius:15px;border:.5px solid #5b5b5b;background-color:#fafafa;padding:10px 40px;height:120px;width:100%;max-width:400px;text-align:left;overflow:hidden;text-overflow:ellipsis}.btn-txt{overflow:hidden}.bolder{font-weight:700}`],p([n({attribute:!1})],V.prototype,"action",void 0),p([n({type:Boolean})],V.prototype,"disabled",void 0),V=p([a("action-item"),l()],V);const W=new Map([[m.ACCESS,!0],[m.DELETE,!0],[m.MODIFY,!1],[m.OBJECT,!1],[m.PORTABILITY,!1],[m.RESTRICT,!1],[m.REVOKE,!0],[m.TRANSPARENCY,!0],[m["TRANSPARENCY.DATA.CATEGORIES"],!0],[m["TRANSPARENCY.DPO"],!0],[m["TRANSPARENCY.KNOWN"],!0],[m["TRANSPARENCY.LEGAL.BASES"],!0],[m["TRANSPARENCY.ORGANIZATION"],!0],[m["TRANSPARENCY.POLICY"],!0],[m["TRANSPARENCY.PROCESSING.CATEGORIES"],!0],[m["TRANSPARENCY.PURPOSE"],!0],[m["TRANSPARENCY.PROVENANCE"],!0],[m["TRANSPARENCY.RETENTION"],!0],[m["TRANSPARENCY.WHERE"],!0],[m["TRANSPARENCY.WHO"],!0],[m["OTHER.DEMAND"],!0]]),j={"access-allowed-data-categories":[N.CONTACT,N.NAME,N.UID,N["OTHER-DATA"]],"delete-allowed-data-categories":[N.CONTACT,N.NAME,N.UID,N["OTHER-DATA"]]},z=new URL(new URL("assets/arrow-forward.svg",import.meta.url).href,import.meta.url).href;let K=class extends t{constructor(){super(...arguments),this.prompt="Type of demand I want to submit:",this.includedActions=[]}handleRequestsClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REQUESTS}}))}render(){return i`<div class="view-ctr border--medium border--rounded"><div class="prompt-heading"><b>${this.prompt}</b></div><div class="actions-container">${this.includedActions.filter((e=>e!==m["OTHER.DEMAND"])).map((e=>i`<action-item .action="${e}" ?disabled="${!W.get(e)}"></action-item>`))}</div></div><div id="below-menu-btns-ctr"><button id="other-dmd-btn" class="link-btn text--underline">${r("Click here if you want to make some other demand (please note that it might take longer to be answered)")}</button> <button id="requests-btn" class="btn--curved border--medium border--rounded btn--clickable" @click="${this.handleRequestsClick}"><span>${r("Access my submitted Privacy Requests")}</span> <img src="${z}" alt=""></button></div>`}};function J(e){if(e.demands.length>1)return"code=200, example=TRANSPARENCY Multi-Response";if(1===e.demands.length){const{action:t}=e.demands[0];return`code=200, example=${t} Response`}return"code=400"}async function Z(e,t=!0){const i=function(e){const t=Object.values(N).filter((e=>e!==N.ALL&&!e.includes(".")));return e.demands.forEach((e=>{if(e.restrictions&&e.restrictions.privacy_scope){const i=e.restrictions.privacy_scope.map((e=>e.dc));t.every((e=>i.includes(e)))&&delete e.restrictions.privacy_scope}})),e}(e),a=t?"https://stoplight.io/mocks/blindnet/product-management:open-api/74767654/privacy-request":"https://devkit-pce-staging.azurewebsites.net/v0/privacy-request",n=t?{"Content-Type":"application/json",Prefer:J(e)}:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("priv_user_id")||"john.doe@example.com"};return fetch(a,{method:"POST",headers:n,body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}K.styles=[f,e`.actions-container{display:grid;grid-template-columns:repeat(3,1fr);gap:50px}.prompt-heading{font-size:16px;text-align:left;padding:0;margin:0 0 35px 0}#other-dmd-btn{margin:20px 0 0 0;justify-self:right;color:#5b5b5b}#below-menu-btns-ctr{display:grid;row-gap:50px;max-width:1170px}#requests-btn{display:flex;justify-content:center;justify-self:center;align-items:center;column-gap:20px;background:0 0;padding:20px;width:35%;font-size:18px;border-radius:15px}#requests-btn img{float:right}`],p([n({type:String})],K.prototype,"prompt",void 0),p([n({attribute:!1})],K.prototype,"includedActions",void 0),K=p([l(),a("action-menu-view")],K);let Q=class extends t{constructor(){super(),this._requests=[],async function(){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/privacy-request/history",{method:"GET",headers:{accept:"application/json",Authorization:localStorage.getItem("priv_user_id")||"john.doe@example.com"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}().then((e=>{this._requests=e.history}))}handleRequestClick(e){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.STATUS,requestId:e.target.id}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}render(){return i`<div id="table-ctr"><div id="requests-list"><div class="list-header-ctr"><span class="list-header"><b>${r("Created")}</b></span> <span class="list-header"><b>${r("Status")}</b></span> <span class="list-header"><b>${r("Demands")}</b></span> <span></span></div>${o(this._requests,(e=>i`<div class="list-item-ctr"><span class="list-item">${new Date(e.date).toLocaleDateString("en-gb")}</span> <span class="list-item">${w[e.status]()}</span> <span class="list-item">${e.demands}</span> <button id="${e.id}" class="link-btn dark-font text --underline list-item" @click="${this.handleRequestClick}">${r("See Details")}</button></div>`))}</div></div><div id="new-request-ctr"><button id="new-request-btn" class="link-btn dark-font text --underline" @click="${this.handleNewRequestClick}">${r("Submit a new Privacy Request")}</button></div>`}};function X(){return Object.values(m).filter((e=>!e.includes("TRANSPARENCY.")))}function ee(){return Object.values(N).filter((e=>!e.includes(".")))}Q.styles=[f,e`:host{display:grid;max-width:600px;margin:auto;row-gap:40px;justify-items:center}#table-ctr{width:100%}#requests-list{display:grid;row-gap:30px}.list-header-ctr{display:grid;grid-template-columns:repeat(4,1fr);text-align:center}.list-item-ctr{display:grid;grid-template-columns:repeat(4,1fr);padding:20px 0;border:2px solid #5b5b5b;border-radius:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.list-item{display:inline-flex;justify-items:center;text-align:center;justify-self:center;align-items:center}.list-item:last-child{padding:0 20px 0 0}#new-request-btn{font-size:18px}`],p([s()],Q.prototype,"_requests",void 0),Q=p([a("requests-view")],Q);let te=class extends t{constructor(){super(...arguments),this.demand={demand_id:"",date:"",requested_action:m.ACCESS,status:R.GRANTED,includes:[],system:""},this.demands=[],this.open=!1}accessResponseTemplate(e){return i`${c([R.GRANTED,R["PARTIALLY-GRANTED"]].includes(e.status),(()=>e.data?i`<div>${r(i`Click <a href="${e.data}.json">here</a> to download your data.`)}</div>`:i`${r("Obtaining data, please wait and refresh the page later.")}`))}`}deleteResponseTemplate(){return i``}transparencyResponseTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${e.answer}`}transparencyDcTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(e.answer,(e=>i`${e}<br>`))}`}transparencyDpoTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${e.answer}`}transparencyKnownTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${e.answer}`}transparencyLbTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(e.answer,(e=>i`Type: ${e.lb_type}<br>Name: ${e.name}<br>Description: ${e.description}<br><br>`))}`}transparencyOrgTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${e.answer}`}transparencyPolicyTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${e.answer}`}transparencyPcTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(e.answer,(e=>i`${e}<br>`))}`}transparencyProvTemplate(e){const t=e.answer;return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(Object.entries(e.answer),(([e,t])=>{const a=e;return i`${o(t,(e=>i`<p><i>${a}</i> data: ${d(e.provenance,[[u.ALL,()=>r(i``)],[u.USER,()=>r(i`Provided by a user of the <i>${e.system}</i> system`)],[u["USER.DATA-SUBJECT"],()=>r(i`Provided by you as a user of the <i>${e.system}</i> system`)],[u.TRANSFERRED,()=>r(i`Derived by user actions, extracted from other data, or inferred by the <i>${e.system}</i> system`)],[u.DERIVED,()=>r(i`Obtained by transfer from the <i>${e.system}</i> system`)]])}</p>`))}`}))} ${o(t["AFFILIATION.selector_1"],(e=>i`Provenance: ${e.provenance}<br>System: ${e.system}<br><br>`))}`}transparencyPurposeTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(e.answer,(e=>i`${e}<br>`))}`}transparencyRetTemplate(e){const t=e.answer;return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(t.NAME,(e=>{return i`<p>${t=N.NAME,a=e.policy_type,n=e.duration,s=e.after,i`<i>${x[t]().toLocaleUpperCase()}</i> data is kept <i>${_[a]().toLocaleUpperCase()}</i> <i>${n}</i> months after <i>${M[s]().toLocaleUpperCase()}</i>`}</p>`;var t,a,n,s}))}`}transparencyWhereTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(e.answer,(e=>i`${e}<br>`))}`}transparencyWhoTemplate(e){return i`<p><b>Requested info:</b> ${D[e.requested_action]()}</p>${o(e.answer,(e=>i`${e}<br>`))}`}render(){return i`<div class="demand-status-ctr ${this.demand.status.toLowerCase()}-dmd border--medium border--rounded"><span class="status-type-ctr"><b>${this.demand.status}</b></span><div class="dmd-action-ctr ${this.open?"":"round-bottom"}"><p class="action-title"><b>${y[this.demand.requested_action]()} ${r("Demand")}</b></p>${c([R.GRANTED,R["PARTIALLY-GRANTED"],R.DENIED].includes(this.demand.status),(()=>i`<button class="status-btn ${this.demand.status.toLowerCase()}-${this.open?"open":"closed"}-btn details-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}">${r("Details")}</button>`))} ${c(this.demand.status===R["UNDER-REVIEW"],(()=>i`<button class="status-btn cancel-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}">${r("Cancel Demand")}</button>`))}</div>${c(this.open,(()=>i`<div id="${this.demand.demand_id}-details-ctr" class="dmd-details-ctr round-bottom"><b>Your demand has been ${k[this.demand.status]().toLocaleLowerCase()}.</b> ${d(this.demand.requested_action,[[m.ACCESS,()=>this.accessResponseTemplate(this.demand)],[m.TRANSPARENCY,()=>this.transparencyResponseTemplate(this.demand)],[m["TRANSPARENCY.DATA.CATEGORIES"],()=>this.transparencyDcTemplate(this.demand)],[m["TRANSPARENCY.DPO"],()=>this.transparencyDpoTemplate(this.demand)],[m["TRANSPARENCY.KNOWN"],()=>this.transparencyKnownTemplate(this.demand)],[m["TRANSPARENCY.LEGAL.BASES"],()=>this.transparencyLbTemplate(this.demand)],[m["TRANSPARENCY.ORGANIZATION"],()=>this.transparencyOrgTemplate(this.demand)],[m["TRANSPARENCY.POLICY"],()=>this.transparencyPolicyTemplate(this.demand)],[m["TRANSPARENCY.PROCESSING.CATEGORIES"],()=>this.transparencyPcTemplate(this.demand)],[m["TRANSPARENCY.PROVENANCE"],()=>this.transparencyProvTemplate(this.demand)],[m["TRANSPARENCY.PURPOSE"],()=>this.transparencyPurposeTemplate(this.demand)],[m["TRANSPARENCY.RETENTION"],()=>this.transparencyRetTemplate(this.demand)],[m["TRANSPARENCY.WHERE"],()=>this.transparencyWhereTemplate(this.demand)],[m["TRANSPARENCY.WHO"],()=>this.transparencyWhoTemplate(this.demand)]])} ${c(this.demand.message,(()=>i`<p>Included message:</p><i>${this.demand.message}</i>`))}</div>`))}</div>`}};te.styles=[f,e`.demand-status-ctr{display:flex;flex-direction:column;border-radius:15px;border:2px solid #e6e6e6;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.status-type-ctr{font-size:16px}.demand-status-ctr span{padding:10px 0}.dmd-action-ctr{display:grid;grid-template-columns:repeat(2,1fr);align-items:center;justify-items:center;column-gap:20px;padding:20px 20px;background:#fff}.granted-dmd{background-color:#51d214;border-color:#51d214}.granted-dmd button{border:2px solid #51d214}:host([open]) .granted-dmd button{background-color:#51d214}.denied-dmd{background-color:#f90707;border-color:#f90707}.denied-dmd button{border:2px solid #f90707}:host([open]) .denied-dmd button{background-color:#f90707}.partially-granted-dmd{background-color:#ff7a00;border-color:#ff7a00}.partially-granted-dmd button{border:2px solid #ff7a00}:host([open]) .partially-granted-dmd button{background-color:#ff7a00}:host([open]) .details-btn{color:#fff}.status-btn{background:0 0;padding:10px 40px;justify-self:center;align-self:flex-end;float:right;font-size:16px;font-weight:700}.details-btn{background-color:#fff;color:#000}.cancel-btn{border:2px solid #f90707}.round-bottom{border-bottom-left-radius:15px;border-bottom-right-radius:15px}.granted-dmd span{color:#fff}.denied-dmd span{color:#fff}.partially-granted-dmd span{color:#fff}.under-review-dmd{background-color:#e6e6e6;border-color:#e6e6e6}.cancelled-dmd{background-color:#ffc1bd;border-color:#ffc1bd}.action-title{justify-self:center}.dmd-details-ctr{display:grid;background-color:#fff;row-gap:20px;padding:10px 20px 30px 20px}p{margin:0;padding:0}`],p([n({attribute:!1})],te.prototype,"demand",void 0),p([n({attribute:!1})],te.prototype,"demands",void 0),p([n({type:Boolean,reflect:!0})],te.prototype,"open",void 0),te=p([a("status-view-item")],te);let ie=class extends t{constructor(){super(...arguments),this.requestId="",this._requestDate=new Date,this._completedDemands=[],this._processingDemands=[],this._cancelledDemands=[],this._intervalId=void 0}reloadRequest(){(async function(e){return fetch(`https://devkit-pce-staging.azurewebsites.net/v0/privacy-request/${e}`,{method:"GET",headers:{accept:"application/json",Authorization:localStorage.getItem("priv_user_id")||"john.doe@example.com"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))})(this.requestId).then((e=>{e.length>0&&(this._requestDate=new Date(e[0].date),this._completedDemands=e.filter((e=>[R.GRANTED,R["PARTIALLY-GRANTED"],R.DENIED].includes(e.status))),this._processingDemands=e.filter((e=>e.status===R["UNDER-REVIEW"])),this._cancelledDemands=e.filter((e=>e.status===R.CANCELED))),0===this._processingDemands.length&&this._intervalId&&!this._completedDemands.some((e=>e.requested_action===m.ACCESS&&!e.data))?(clearInterval(this._intervalId),this._intervalId=void 0):this._intervalId||0===this._processingDemands.length||(this._intervalId=setInterval((()=>this.reloadRequest()),3e3))}))}willUpdate(e){e.has("requestId")&&""!==this.requestId&&this.reloadRequest()}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REQUESTS}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}render(){return i`${c(this._processingDemands.length>0,(()=>i`<p>${r(i`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, is currently being processed.`)}</p>${c(this._completedDemands.length>0,(()=>i`<div class="req-progress-ctr"><p>${r("At the moment:")}</p><p><b>${r(i`${this._completedDemands.length} demand(s) have been completed${c(this._cancelledDemands.length>0,(()=>i`and ${this._cancelledDemands.length} demand(s) have been cancelled`))}`)}</b></p><p>${r(i`${this._processingDemands.length} demand(s) are being processed`)}</p></div>`))}`),(()=>i`<p>${r(i`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, has been processed.`)}</p>`))} ${c(this._completedDemands.length>0,(()=>i`<div id="completed-dmds-ctr" class="dmds-ctr border--medium border--rounded"><span><b>${r("Completed Demand(s)")}</b></span> ${o(this._completedDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))}</div>`))} ${c(this._processingDemands.length>0,(()=>i`<div id="processing-dmds-ctr" class="dmds-ctr border--medium border--rounded"><span><b>${r("Processing Demand(s)")}</b></span> ${o(this._processingDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))}</div>`))} ${c(this._cancelledDemands.length>0,(()=>i`<div id="cancelled-dmds-ctr" class="dmds-ctr border--medium border--rounded"><span><b>${r("Cancelled Demand(s)")}</b></span> ${o(this._cancelledDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))}</div>`))}<div id="nav-btns-ctr"><button class="status-nav-btn link-btn dark-font text --underline" @click="${this.handleBackClick}">${r("Back to my Requests")}</button> <button class="status-nav-btn link-btn dark-font text --underline" @click="${this.handleNewRequestClick}">${r("Submit a new Privacy Request")}</button></div>`}};ie.styles=[f,e`:host{display:grid;row-gap:40px;max-width:900px;text-align:center;margin:auto}.req-progress-ctr{display:grid;row-gap:10px}.dmds-ctr{display:grid;row-gap:20px;padding:30px 40px 40px 40px}.dmds-ctr span{padding:0 0 20px 0}#completed-dmds-ctr{border:1px solid #18a0fb;background:rgba(24,160,251,.11)}#nav-btns-ctr{display:flex;column-gap:20px;justify-content:center;justify-items:center}.status-nav-btn{font-size:18px}p{margin:0;padding:0}`],p([n({type:String,attribute:"request-id"})],ie.prototype,"requestId",void 0),p([s()],ie.prototype,"_requestDate",void 0),p([s()],ie.prototype,"_completedDemands",void 0),p([s()],ie.prototype,"_processingDemands",void 0),p([s()],ie.prototype,"_cancelledDemands",void 0),p([s()],ie.prototype,"_intervalId",void 0),ie=p([a("status-view")],ie);class ae extends t{constructor(){super(...arguments),this.demandState=U.EDIT_OPEN,this.demandGroupId=self.crypto.randomUUID(),this.demands=[]}setDemand(e){this.demands.push(e)}deleteDemand(e){this.demands.splice(this.demands.findIndex((t=>t.action===e)),1)}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set-multiple",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demands:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}handleAddClick(){this.validate()&&(this.demands=this.buildDemands(),this.addToPrivacyRequest(this.demandGroupId,this.demands),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REVIEW}})))}render(){return i`${d(this.demandState,[[U.EDIT_OPEN,()=>this.getFormTemplate()]])}<div class="btns-ctr"><button id="back-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleBackClick}">${r("Back")}</button> <button id="add-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleAddClick}">${r("Next")}</button></div>`}}ae.styles=[f,e`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:60%;max-width:300px}#add-btn{grid-column:3/4;min-width:60%;max-width:300px}h1,h2,h3,h4,h5,h6{padding:0;margin:0}h2{font-size:20px}h3{font-size:16px;font-weight:400}`],p([n({type:Number,attribute:"demand-state"})],ae.prototype,"demandState",void 0),p([n({type:String})],ae.prototype,"demandGroupId",void 0),p([n({attribute:!1})],ae.prototype,"demands",void 0);const ne=new URL(new URL("assets/all-checkbox-checked.svg",import.meta.url).href,import.meta.url).href,se=new URL(new URL("assets/all-checkbox-dash.svg",import.meta.url).href,import.meta.url).href,de=new URL(new URL("assets/all-checkbox-unchecked.svg",import.meta.url).href,import.meta.url).href,oe=new URL(new URL("assets/close-container-arrow.svg",import.meta.url).href,import.meta.url).href,re=new URL(new URL("assets/open-container-arrow.svg",import.meta.url).href,import.meta.url).href;var le;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME",e[e.NONE=2]="NONE"}(le||(le={}));let ce=class extends t{constructor(){super(...arguments),this.choices=[],this.selectionState=le.ALL,this.componentMode=H.CLOSED,this.includeAll=!0,this.allChecked=!0,this.allMessage=r("Select all"),this.eventPrefix="checklist-click",this.includeButtons=!1,this.includeOther=!1,this.selectedChoices=new Set}selectChoice(e){this.selectedChoices.add(e);const t=new CustomEvent(`${this.eventPrefix}-select`,{bubbles:!0,composed:!0,detail:{id:e,"first-selection":1===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}deleteChoice(e){this.selectedChoices.delete(e);const t=new CustomEvent(`${this.eventPrefix}-deselect`,{bubbles:!0,composed:!0,detail:{id:e,"none-selected":0===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}handleChoiceClick(e){var t,i,a;const{id:n,checked:s}=e.target;if("all-checkbox"===n){const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll(".choice-checkbox");s?(this.allChecked=!0,null==e||e.forEach((e=>{const t=e;t.checked||(t.checked=!0,this.selectChoice(t.id))}))):(this.allChecked=!1,null==e||e.forEach((e=>{const t=e;t.checked&&(t.checked=!1,this.deleteChoice(t.id))})))}else if(s){this.selectChoice(n);(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("all-checkbox")).checked=!0}else if(this.deleteChoice(n),0===this.selectedChoices.size){(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("all-checkbox")).checked=!1}}handleOtherClick(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-click`,{bubbles:!0,composed:!0,detail:{checked:e.target.checked}}))}handleOtherInput(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-input`,{bubbles:!0,composed:!0,detail:{text:e.target.value}}))}updateSelectionState(){switch(this.selectedChoices.size){case 0:this.selectionState=le.NONE;break;case this.choices.length:this.selectionState=le.ALL;break;default:this.selectionState=le.SOME}}getDisplayChoices(){switch(this.componentMode){case H.CLOSED:return[];case H.OPEN:return Array.from(this.choices);case H.PARTIAL:return Array.from(this.choices).filter((e=>this.selectedChoices.has(e.id)));default:return[]}}handleButtonClick(){this.componentMode===H.CLOSED||this.componentMode===H.PARTIAL?this.componentMode=H.OPEN:this.componentMode=H.CLOSED}willUpdate(e){e.has("choices")&&(this.choices.forEach((e=>{e.checked&&this.selectedChoices.add(e.id)})),this.updateSelectionState())}render(){return i`<div class="choices-list">${c(this.includeAll&&!(this.componentMode===H.PARTIAL&&this.selectionState===le.SOME),(()=>i`<div class="all-ctr"><input id="all-checkbox" type="checkbox" @click="${this.handleChoiceClick}" ?checked="${this.allChecked}"> <label for="all-checkbox">${d(this.selectionState,[[le.NONE,()=>i`<img src="${de}" alt="empty checkbox">`],[le.SOME,()=>i`<img src="${se}" alt="dash checkbox">`],[le.ALL,()=>i`<img src="${ne}" alt="checked checkbox">`]])}</label> <span class="all-prefix">${this.allMessage}</span></div>`))} ${this.getDisplayChoices().map((e=>i`<div class="choice-ctr"><input id="${e.id}" class="choice-checkbox" type="checkbox" ?checked="${e.checked}" ?disabled="${e.disabled}" @change="${this.handleChoiceClick}"> <label>${e.description}</label></div>`))} ${c(this.includeOther&&this.componentMode===H.OPEN,(()=>i`<div id="other-data-ctr"><div class="choice-ctr"><input id="other-checkbox" type="checkbox" @change="${this.handleOtherClick}"> <label>${r(i`<b>OTHER-DATA:</b> Specify another type of data`)}</label></div><div id="other-data-input-ctr"><span>${r("Other data type:")}</span> <input id="other-data-input" type="text"></div></div>`))}</div>${c(this.includeButtons,(()=>i`<button class="svg-btn" @click="${this.handleButtonClick}">${c(this.componentMode===H.OPEN,(()=>i`<img src="${oe}" alt="close arrow">`),(()=>i`<img src="${re}" alt="open arrow">`))}</button>`))}`}};ce.styles=[f,e`:host{display:grid}:host([selection-state='0']) .choice-checkbox{opacity:.5}:host([selection-state='0']) #all-checkbox:checked+label{opacity:1}:host([selection-state='1']) #all-checkbox+label{opacity:1}:host([selection-state='2']) .choice-checkbox{opacity:1}.choices-list{display:grid;overflow:hidden;grid-template-columns:1fr;row-gap:35px;padding:35px 0 25px 0}.choice-ctr{padding:0 30px}.all-ctr{display:flex;align-items:center;padding:0 30px}.all-prefix{padding:0 0 0 4px}#all-checkbox{display:none}#all-checkbox+label{height:13px;width:13px;display:inline-block;margin:3px 3px 3px 4px}#other-data-input-ctr{display:flex;column-gap:5px;padding:20px 55px;align-items:center}#other-data-input input{height:30px;width:100%;background:#f8f8fc;border:1px solid #e5e5e5;border-radius:4px}#other-data-input span{flex-shrink:0}`],p([n({type:Array})],ce.prototype,"choices",void 0),p([n({type:Number,reflect:!0,attribute:"selection-state"})],ce.prototype,"selectionState",void 0),p([n({type:Number,reflect:!0,attribute:"component-mode"})],ce.prototype,"componentMode",void 0),p([n({type:Boolean})],ce.prototype,"includeAll",void 0),p([n({type:Boolean,reflect:!0})],ce.prototype,"allChecked",void 0),p([n({type:String,attribute:"all-message"})],ce.prototype,"allMessage",void 0),p([n({type:String,attribute:"event-prefix"})],ce.prototype,"eventPrefix",void 0),p([n({type:Boolean,attribute:"include-buttons"})],ce.prototype,"includeButtons",void 0),p([n({type:Boolean,attribute:"include-other"})],ce.prototype,"includeOther",void 0),p([s()],ce.prototype,"selectedChoices",void 0),ce=p([a("all-checklist")],ce);let pe=class extends ae{constructor(){super(),this.transparencyActions=Object.values(m).filter((e=>e.includes("TRANSPARENCY."))),this.advancedSettings=[],this.restrictions={},this._additionalMessage="",this.addEventListener("transparency-action-select",(e=>{const t={action:e.detail.id,message:this._additionalMessage,restrictions:this.restrictions};this.setDemand(t)})),this.addEventListener("transparency-action-deselect",(e=>{const{id:t}=e.detail;this.deleteDemand(t)}))}handleProvenanceTermClick(e){const{id:t}=e.target;this.restrictions.provenance={term:t},this.demands.forEach((e=>{e.restrictions.provenance.term=t}))}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}buildDemands(){return this.demands}validate(){return!0}getFormTemplate(){var e;const t=Object.values(this.demands).map((e=>e.action));return i`<p id="edit-heading-1"><b>${r("Details of my TRANSPARENCY Demand")}</b></p><div class="border--light border--rounded transparency-options"><span slot="prompt"><b>${r("I want to know:")}</b></span><all-checklist .choices="${this.transparencyActions.map((e=>{var i;return{id:e,description:D[e](),checked:t.includes(e),disabled:null===(i=!W.get(e))||void 0===i||i}}))}" all-message="${r("ALL information related to data processing practices and know if the organization has data on me")}" component-mode="${H.CLOSED}" event-prefix="transparency-action" include-buttons></all-checklist></div><slotted-dropdown header="${r("Advanced settings")}" include-buttons><div><span>${r("My demand applies to data from the following provenance:")}</span><fieldset class="provenance-restriction">${Object.values(u).map((e=>{var t,a;return i`<input id="${e}" name="provenance-term" type="radio" ?checked="${(null===(a=null===(t=this.demands[0].restrictions)||void 0===t?void 0:t.provenance)||void 0===a?void 0:a.term)===e}" @click="${this.handleProvenanceTermClick}"><label for="${e}">${P[e]()}</label><br>`}))}</fieldset></div></slotted-dropdown><slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${0!==this.demands.length&&null!==(e=this.demands[0].message)&&void 0!==e?e:""}"></textarea></div></slotted-dropdown>`}};pe.styles=[ae.styles,f,e`:host{display:grid;row-gap:35px;align-content:flex-start;margin:0}.transparency-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],p([n({type:Array,attribute:!1})],pe.prototype,"transparencyActions",void 0),p([n({type:Array})],pe.prototype,"advancedSettings",void 0),p([n({attribute:!1})],pe.prototype,"restrictions",void 0),p([s()],pe.prototype,"_additionalMessage",void 0),pe=p([a("transparency-form")],pe);class he extends t{constructor(){super(...arguments),this.demandState=U.EDIT_OPEN,this.demand={action:m.ACCESS},this.demandGroupId=self.crypto.randomUUID(),this.default=!1}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demand:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}handleAddClick(){this.validate()&&(this.addToPrivacyRequest(this.demandGroupId,this.demand),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REVIEW}})))}willUpdate(e){e.has("default")&&this.default&&(this.demand=this.getDefaultDemand())}render(){return i`<div>${d(this.demandState,[[U.EDIT_OPEN,()=>this.getFormTemplate(this.demand)]])}</div><div class="btns-ctr"><button id="back-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleBackClick}">${r("Back")}</button> <button id="add-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleAddClick}">${r("Next")}</button></div>`}}he.styles=[f,e`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:60%;max-width:300px}#add-btn{grid-column:3/4;min-width:60%;max-width:300px}`],p([n({type:Number,attribute:"demand-state"})],he.prototype,"demandState",void 0),p([n({attribute:!1})],he.prototype,"demand",void 0),p([n({type:String})],he.prototype,"demandGroupId",void 0),p([n({type:Boolean})],he.prototype,"default",void 0);let me=class extends he{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("access-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:g.ALL,pp:T.ALL})})),this.addEventListener("access-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getDefaultDemand(){return{action:m.ACCESS,restrictions:{privacy_scope:this.allowedDataCategories.map((e=>({dc:e,pc:g.ALL,pp:T.ALL}))),provenance:{term:u.ALL,target:b.SYSTEM},date_range:{}}}}getFormTemplate(e){var t,a,n,s,d,o,l,c,p;return i`<div id="access-form"><p id="edit-heading-1"><b>${r("Details of my ACCESS Demand")}</b></p><div class="border--light border--rounded access-options"><span slot="prompt">${r("I want to access:")}</span><all-checklist .choices="${this.allowedDataCategories.map((t=>{var i,a;return{id:t,description:$[t](),checked:-1!==(null===(a=null===(i=e.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((e=>e.dc===t))),disabled:!1}}))}" all-message="${r("ALL categories of data the organization has data on me")}" component-mode="${H.CLOSED}" event-prefix="access-option" include-buttons></all-checklist></div><slotted-dropdown header="${r("Advanced settings")}" include-buttons><div class="date-restriction"><p>${r("Specify a date range for the selected category(ies) of data:")}</p><div><span>${r("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(t=e.restrictions)||void 0===t?void 0:t.date_range)||void 0===a?void 0:a.from)?null===(s=null===(n=e.restrictions)||void 0===n?void 0:n.date_range)||void 0===s?void 0:s.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${r("to")}</span> <input id="date-end" type="date" .value="${(null===(o=null===(d=e.restrictions)||void 0===d?void 0:d.date_range)||void 0===o?void 0:o.to)?null===(c=null===(l=e.restrictions)||void 0===l?void 0:l.date_range)||void 0===c?void 0:c.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"></div></div><div><span>${r("My demand applies to data from the following provenance:")}</span><fieldset class="provenance-restriction">${Object.values(u).map((t=>{var a,n;return i`<input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}"><label for="${t}">${P[t]()}</label><br>`}))}</fieldset></div><div><span>${r("I address my demand to:")}</span><fieldset class="provenance-restriction">${Object.values(b).filter((e=>e!==b.ALL)).map((t=>{var a,n;return i`<input id="${t}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===t}" @click="${this.handleProvenanceTargetClick}"><label for="${t}">${L[t]()}</label><br>`}))}</fieldset></div></slotted-dropdown><slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(p=e.message)&&void 0!==p?p:""}"></textarea></div></slotted-dropdown></div>`}};me.styles=[he.styles,f,e`#access-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.access-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],p([n({type:Array,attribute:!1})],me.prototype,"allowedDataCategories",void 0),me=p([a("access-form")],me);let Ee=class extends he{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("delete-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:g.ALL,pp:T.ALL})})),this.addEventListener("delete-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getDefaultDemand(){return{action:m.DELETE,restrictions:{privacy_scope:this.allowedDataCategories.map((e=>({dc:e,pc:g.ALL,pp:T.ALL}))),provenance:{term:u.ALL,target:b.SYSTEM},date_range:{}}}}getFormTemplate(e){var t,a,n,s,d,o,l,c,p;return i`<div id="delete-form"><p id="edit-heading-1"><b>${r("Details of my DELETE Demand")}</b></p><div class="border--light border--rounded delete-options"><span slot="prompt">${r("I want to delete:")}</span><all-checklist .choices="${this.allowedDataCategories.map((t=>{var i,a;return{id:t,description:$[t](),checked:-1!==(null===(a=null===(i=e.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((e=>e.dc===t))),disabled:!1}}))}" all-message="${r("ALL categories of data the organization has data on me")}" component-mode="${H.CLOSED}" event-prefix="delete-option" include-buttons></all-checklist></div><slotted-dropdown header="${r("Advanced settings")}" include-buttons><div class="date-restriction"><p>${r("Specify a date range for the selected category(ies) of data:")}</p><div><span>${r("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(t=e.restrictions)||void 0===t?void 0:t.date_range)||void 0===a?void 0:a.from)?null===(s=null===(n=e.restrictions)||void 0===n?void 0:n.date_range)||void 0===s?void 0:s.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${r("to")}</span> <input id="date-end" type="date" .value="${(null===(o=null===(d=e.restrictions)||void 0===d?void 0:d.date_range)||void 0===o?void 0:o.to)?null===(c=null===(l=e.restrictions)||void 0===l?void 0:l.date_range)||void 0===c?void 0:c.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"></div></div><div><span>${r("My demand applies to data from the following provenance:")}</span><fieldset class="provenance-restriction">${Object.values(u).map((t=>{var a,n;return i`<input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}"><label for="${t}">${P[t]()}</label><br>`}))}</fieldset></div><div><span>${r("I address my demand to:")}</span><fieldset class="provenance-restriction">${Object.values(b).filter((e=>e!==b.ALL)).map((t=>{var a,n;return i`<input id="${t}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===t}" @click="${this.handleProvenanceTargetClick}"><label for="${t}">${L[t]()}</label><br>`}))}</fieldset></div></slotted-dropdown><slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(p=e.message)&&void 0!==p?p:""}"></textarea></div></slotted-dropdown></div>`}};Ee.styles=[he.styles,f,e`#delete-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.delete-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],p([n({type:Array,attribute:!1})],Ee.prototype,"allowedDataCategories",void 0),Ee=p([a("delete-form")],Ee);let ue=class extends ae{constructor(){super(),this._additionalMessage="",this._revokeAll=!0,this._allConsentIds=[],this._selectedConsentIds=new Set,this._allConsentIds=["28b5bee0-9db8-40ec-840e-64eafbfb9ddd"]}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}handleRevokeAllClick(){this._revokeAll=!0,this._selectedConsentIds=new Set(this._allConsentIds)}handleRevokeSomeClick(){this._revokeAll=!1,this._selectedConsentIds.clear()}handleConsentClick(e){const{id:t,checked:i}=e.target;t&&i?this._selectedConsentIds.add(t):t&&this._selectedConsentIds.delete(t)}validate(){return!0}buildDemands(){return Array.from(this._selectedConsentIds).map((e=>({action:m.REVOKE,restrictions:{consent:{id:e}}})))}willUpdate(e){e.has("demands")&&(this._selectedConsentIds.clear(),this.demands.forEach((e=>{e.restrictions&&e.restrictions.consent&&this._selectedConsentIds.add(e.restrictions.consent.id)})),this._selectedConsentIds.size>0?this._revokeAll=this._allConsentIds.every((e=>this._selectedConsentIds.has(e))):(this._revokeAll=!0,this._selectedConsentIds=new Set(this._allConsentIds)))}getFormTemplate(){return i`<div id="revoke-consent-form-ctr"><h2>${r("Details of my REVOKE CONSENT Demand")}</h2>${c(this._allConsentIds.length>0,(()=>i`<fieldset id="revoke-type-btns"><input id="revoke-all-radio" name="revoke-type" type="radio" ?checked="${this._revokeAll}" @click="${this.handleRevokeAllClick}"> <label for="revoke-all-radio">${r(i`Revoke <strong>all</strong> consents`)}</label><br><input id="revoke-some-radio" name="revoke-type" type="radio" ?checked="${!this._revokeAll}" @click="${this.handleRevokeSomeClick}"> <label for="revoke-some-radio">${r(i`Revoke <strong>some</strong> consents`)}</label></fieldset>${c(!this._revokeAll,(()=>i`<div id="consents-ctr" class="border--light border--rounded"><h3>${r(i`Check the consents you wish to <strong>revoke</strong>:`)}</h3><ul>${o(this._allConsentIds,(e=>i`<li><input id="${e}" type="checkbox" @click="${this.handleConsentClick}" ?checked="${this._selectedConsentIds.has(e)}"><label for="${e}"><strong>I no longer consent to</strong> the storage and processing of my data for the purposes of this draw</label></li>`))}</ul></div>`))}<slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${this._additionalMessage}"></textarea></div></slotted-dropdown>`))}</div>`}};ue.styles=[ae.styles,f,e`#revoke-consent-form-ctr{display:grid;row-gap:40px}#revoke-type-btns{border:none;padding:0;margin:0}#revoke-type-btns input[type=radio]{-ms-transform:scale(1.5);-webkit-transform:scale(1.5);transform:scale(1.5);margin:3px 10px 0 5px}#revoke-type-btns input:not(:nth-last-child(2)){margin-bottom:25px}#consents-ctr{padding:40px}#consents-ctr ul{list-style-type:none;margin-bottom:0}#consents-ctr ul li input{margin:3px 10px 3px 4px}.revoke-options{padding:40px 40px 20px 40px}.additional-msg-ctr{display:grid;row-gap:20px}`],p([s()],ue.prototype,"_additionalMessage",void 0),p([s()],ue.prototype,"_revokeAll",void 0),p([s()],ue.prototype,"_allConsentIds",void 0),p([s()],ue.prototype,"_selectedConsentIds",void 0),ue=p([a("revoke-consent-form")],ue);let Ae=class extends t{constructor(){super(),this.actions="",this.dataCategories="",this._includedActions=X(),this._includedDataCategories=ee(),this._currentRequestId="",this._currentDemandGroupId="",this._currentAction=m.TRANSPARENCY,this._privacyRequest={demands:[],data_subject:[{id:localStorage.getItem("priv_user_id")||"john.doe@example.com",schema:"dsid"}],email:"",target:b.PARTNERS},this._demands=new Map,this._config=j,this._componentState=Y.MENU;const e=self.crypto.randomUUID();this._demands.set(e,[]),this._currentDemandGroupId=e,this.addEventListener("component-state-change",(e=>{const t=e.detail;switch(this._componentState=t.newState,this._componentState){case Y.EDIT:this._currentAction=t.newAction,void 0!==t.demandGroupId&&(this._currentDemandGroupId=t.demandGroupId);break;case Y.SUBMITTED:break;case Y.MENU:this._demands.set(this._currentDemandGroupId,[]);break;case Y.STATUS:this._currentRequestId=t.requestId}})),this.addEventListener("demand-set-multiple",(e=>{const{demandGroupId:t,demands:i}=e.detail;this._demands.set(t,i)})),this.addEventListener("demand-set",(e=>{const{demandGroupId:t,demand:i}=e.detail;this._demands.set(t,[i])})),this.addEventListener("demand-delete",(e=>{const{demandGroupId:t}=e.detail;this._demands.delete(t),this.requestUpdate()})),this.addEventListener("request-target-change",(e=>{const{id:t}=e.detail;this._privacyRequest.target=t})),this.addEventListener("submit-request",(()=>{const e=Array.from(this._demands.values()).reduce(((e,t)=>e.concat(t)),[]);this._privacyRequest.demands=e.map(((e,t)=>(e.id=t.toString(),e))),Z(this._privacyRequest,!1).then((e=>{this.dispatchEvent(new CustomEvent("component-state-change",{detail:{newState:Y.STATUS,requestId:e.request_id}}))}))}))}handleRestartClick(){this._privacyRequest={demands:[],data_subject:[{id:localStorage.getItem("priv_user_id")||"john.doe@example.com",schema:"dsid"}],email:"",target:b.PARTNERS},this._demands=new Map}actionFormFactory(e){const t=this._demands.get(this._currentDemandGroupId);if(e===m.TRANSPARENCY){const a=t&&0!==t.length?t:function(e){if(e===m.TRANSPARENCY)return Object.values(m).filter((e=>e.includes("TRANSPARENCY."))).map((e=>({action:e,restrictions:{provenance:{term:u.ALL}}})));throw Error("Only TRANSPARENCY action should have multiple demands!")}(e);return i`<transparency-form .demands="${a}" .demandGroupId="${this._currentDemandGroupId}" .restrictions="${a[0].restrictions}"></transparency-form>`}const a=t&&0!==t.length?t[0]:void 0,n=!t||0===t.length;return i`${d(e,[[m.ACCESS,()=>i`<access-form .demand="${null!=t?t:""}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._includedDataCategories}" .default="${n}"></access-form>`],[m.DELETE,()=>i`<delete-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._includedDataCategories}" .default="${n}"></delete-form>`],[m.MODIFY,()=>i``],[m.OBJECT,()=>i``],[m.PORTABILITY,()=>i``],[m.RESTRICT,()=>i``],[m.REVOKE,()=>i`<revoke-consent-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}"></revoke-consent-form>`],[m["OTHER.DEMAND"],()=>i``]],(()=>i`${r("Error: Invalid Action")}`))}`}getHeadingString(e){switch(e){case Y.REQUESTS:return i`${r("My Submitted Privacy Request(s)")}`;case Y.STATUS:return i`${r("My Privacy Request Status")}`;default:return i`${r("My Privacy Request")}`}}willUpdate(e){if(e.has("actions")&&this.actions)try{const e=Array.from(JSON.parse(this.actions)).map((e=>e.toLocaleLowerCase())),t=X().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedActions=t)}catch(e){this._includedActions=X()}if(e.has("dataCategories")&&this.dataCategories)try{const e=Array.from(JSON.parse(this.dataCategories)).map((e=>e.toLocaleLowerCase())),t=ee().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedDataCategories=t)}catch(e){this._includedDataCategories=ee()}}render(){return i`<div id="prci-ctr"><div id="heading-ctr"><span class="req-hdr">${this.getHeadingString(this._componentState)}</span></div>${d(this._componentState,[[Y.MENU,()=>i`<div><action-menu-view .includedActions="${this._includedActions}"></action-menu-view></div>`],[Y.EDIT,()=>i`<div class="border--medium border--rounded view-ctr">${this.actionFormFactory(this._currentAction)}</div>`],[Y.REVIEW,()=>i`<div class="border--medium border--rounded view-ctr">${o(this._demands.entries(),(([e,t])=>i`<review-view .demandGroupId="${e}" .demands="${t}"></review-view>`))}</div>`],[Y.REQUESTS,()=>i`<requests-view></requests-view>`],[Y.STATUS,()=>i`<status-view request-id="${this._currentRequestId}"></status-view>`],[Y.SUBMITTED,()=>i`<p><b>${r("Your Privacy Request has been sent!")} 🎉</b></p><p>${r("You may track the status of your request below.")}</p>`],[Y.AUTH,()=>i`<auth-view></auth-view>`]])}</div>`}};Ae.styles=[f,e`:host{display:flex;justify-content:center;justify-items:center;font-family:var(
          --prci-font-family,
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          'Open Sans',
          'Helvetica Neue',
          sans-serif
        );color:var(--prci-font-color,#000);font-size:16;text-align:left}#prci-ctr{padding:20px;max-width:1350px}#heading-ctr{padding:0 0 40px 0;max-width:1170px}.req-hdr{display:block;font-weight:700;font-size:24px;grid-column:2/3;text-align:center}button:disabled{background-color:#a9d1ff}`],p([n({type:String})],Ae.prototype,"actions",void 0),p([n({type:String,attribute:"data-categories"})],Ae.prototype,"dataCategories",void 0),p([s()],Ae.prototype,"_includedActions",void 0),p([s()],Ae.prototype,"_includedDataCategories",void 0),p([s()],Ae.prototype,"_currentRequestId",void 0),p([s()],Ae.prototype,"_currentDemandGroupId",void 0),p([s()],Ae.prototype,"_currentAction",void 0),p([s()],Ae.prototype,"_privacyRequest",void 0),p([s()],Ae.prototype,"_demands",void 0),p([s()],Ae.prototype,"_config",void 0),p([s()],Ae.prototype,"_componentState",void 0),Ae=p([a("bldn-priv-request"),l()],Ae);export{Ae as BldnPrivRequest};
//# sourceMappingURL=index.core.min.js.map
