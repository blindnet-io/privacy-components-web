{"version":3,"file":"index.mapped.min.js","sources":["../../../node_modules/tslib/tslib.es6.js","../src/utils/states.ts","../src/utils/conf.ts","../src/utils/dictionary.ts","../src/utils/utils.ts","../src/styles.ts","../src/FrequentRequestsMenu.ts","../src/ReviewView.ts","../src/ActionItem.ts","../src/ActionMenuView.ts","../src/RequestsView.ts","../src/StatusViewItem.ts","../src/StatusView.ts","../src/demand-forms/MultiDemandForm.ts","../src/AllChecklist.ts","../src/demand-forms/TransparencyForm.ts","../src/demand-forms/DemandForm.ts","../src/demand-forms/AccessForm.ts","../src/demand-forms/DeleteForm.ts","../src/demand-forms/RevokeConsentForm.ts","../src/BldnPrivRequest.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export enum ComponentState {\n  MENU,\n  EDIT,\n  REVIEW,\n  REQUESTS,\n  SUBMITTED,\n  STATUS,\n  AUTH,\n}\n\n/**\n * States for BldnPrivRequest\n */\nexport enum RequestState {\n  BUILD,\n  REVIEW,\n  SENT,\n}\n\n/**\n * States for DemandBuilder + ActionForms\n */\nexport enum DemandState {\n  SELECT_ACTION,\n  AUTH,\n  EDIT_OPEN,\n  EDIT_COLLAPSED,\n  REVIEW,\n}\n\n/**\n * States for action form components\n */\nexport enum FormComponentState {\n  CLOSED,\n  PARTIAL,\n  OPEN,\n}\n","import { ACTION, DATA_CATEGORY } from '@blindnet/core';\n\nexport const enabledActions = new Map<ACTION, boolean>([\n  [ACTION.ACCESS, true],\n  [ACTION.DELETE, true],\n  [ACTION.MODIFY, false],\n  [ACTION.OBJECT, false],\n  [ACTION.PORTABILITY, false],\n  [ACTION.RESTRICT, false],\n  [ACTION.REVOKE, true],\n  [ACTION.TRANSPARENCY, true],\n  [ACTION['TRANSPARENCY.DATA.CATEGORIES'], true],\n  [ACTION['TRANSPARENCY.DPO'], true],\n  [ACTION['TRANSPARENCY.KNOWN'], true],\n  [ACTION['TRANSPARENCY.LEGAL.BASES'], true],\n  [ACTION['TRANSPARENCY.ORGANIZATION'], true],\n  [ACTION['TRANSPARENCY.POLICY'], true],\n  [ACTION['TRANSPARENCY.PROCESSING.CATEGORIES'], true],\n  [ACTION['TRANSPARENCY.PURPOSE'], true],\n  [ACTION['TRANSPARENCY.PROVENANCE'], true],\n  [ACTION['TRANSPARENCY.RETENTION'], true],\n  [ACTION['TRANSPARENCY.WHERE'], true],\n  [ACTION['TRANSPARENCY.WHO'], true],\n  [ACTION['OTHER.DEMAND'], true],\n]);\n\nexport const PRCI_CONFIG = {\n  'access-allowed-data-categories': [\n    // DATA_CATEGORY.RELATIONSHIPS,\n    // DATA_CATEGORY.AFFILIATION,\n    // DATA_CATEGORY.BEHAVIOR,\n    // DATA_CATEGORY.BIOMETRIC,\n    DATA_CATEGORY.CONTACT,\n    // DATA_CATEGORY.DEMOGRAPHIC,\n    // DATA_CATEGORY.DEVICE,\n    // DATA_CATEGORY.FINANCIAL,\n    // DATA_CATEGORY.GENETIC,\n    // DATA_CATEGORY.HEALTH,\n    // DATA_CATEGORY.IMAGE,\n    // DATA_CATEGORY.LOCATION,\n    DATA_CATEGORY.NAME,\n    // DATA_CATEGORY.PROFILING,\n    DATA_CATEGORY.UID,\n    DATA_CATEGORY['OTHER-DATA'],\n  ],\n\n  'delete-allowed-data-categories': [\n    // DATA_CATEGORY.RELATIONSHIPS,\n    // DATA_CATEGORY.AFFILIATION,\n    // DATA_CATEGORY.BEHAVIOR,\n    // DATA_CATEGORY.BIOMETRIC,\n    DATA_CATEGORY.CONTACT,\n    // DATA_CATEGORY.DEMOGRAPHIC,\n    // DATA_CATEGORY.DEVICE,\n    // DATA_CATEGORY.FINANCIAL,\n    // DATA_CATEGORY.GENETIC,\n    // DATA_CATEGORY.HEALTH,\n    // DATA_CATEGORY.IMAGE,\n    // DATA_CATEGORY.LOCATION,\n    DATA_CATEGORY.NAME,\n    // DATA_CATEGORY.PROFILING,\n    DATA_CATEGORY.UID,\n    DATA_CATEGORY['OTHER-DATA'],\n  ],\n};\n","import { msg } from '@lit/localize';\nimport { html } from 'lit';\n\n/**\n * Mapping of PRIV Actions to corresponding titles.\n */\nexport const ACTION_TITLES = {\n  ACCESS: () => msg('ACCESS'),\n  DELETE: () => msg('DELETE'),\n  MODIFY: () => msg('MODIFY'),\n  OBJECT: () => msg('OBJECT'),\n  PORTABILITY: () => msg('PORTABILITY'),\n  RESTRICT: () => msg('RESTRICT'),\n  'REVOKE-CONSENT': () => msg('REVOKE-CONSENT'),\n  TRANSPARENCY: () => msg('TRANSPARENCY'),\n  'TRANSPARENCY.DATA-CATEGORIES': () => msg('TRANSPARENCY.DATA-CATEGORIES'),\n  'TRANSPARENCY.DPO': () => msg('TRANSPARENCY.DPO'),\n  'TRANSPARENCY.KNOWN': () => msg('TRANSPARENCY.KNOWN'),\n  'TRANSPARENCY.LEGAL-BASES': () => msg('TRANSPARENCY.LEGAL-BASES'),\n  'TRANSPARENCY.ORGANIZATION': () => msg('TRANSPARENCY.ORGANIZATION'),\n  'TRANSPARENCY.POLICY': () => msg('TRANSPARENCY.POLICY'),\n  'TRANSPARENCY.PROCESSING-CATEGORIES': () =>\n    msg('TRANSPARENCY.PROCESSING-CATEGORIES'),\n  'TRANSPARENCY.PROVENANCE': () => msg('TRANSPARENCY.PROVENANCE'),\n  'TRANSPARENCY.PURPOSE': () => msg('TRANSPARENCY.PURPOSE'),\n  'TRANSPARENCY.RETENTION': () => msg('TRANSPARENCY.RETENTION'),\n  'TRANSPARENCY.WHERE': () => msg('TRANSPARENCY.WHERE'),\n  'TRANSPARENCY.WHO': () => msg('TRANSPARENCY.WHO'),\n  'OTHER-DEMAND': () => msg('OTHER-DEMAND'),\n};\n\n/**\n * Mapping of PRIV Actions to corresponding descriptions.\n */\nexport const ACTION_DESCRIPTIONS = {\n  ACCESS: () => msg('Access my data'),\n  DELETE: () => msg('Have my data deleted'),\n  MODIFY: () => msg('Modify or complement my data'),\n  OBJECT: () => msg('Object to processing of my data'),\n  PORTABILITY: () => msg('Take my data and have it transfered somewhere else'),\n  RESTRICT: () => msg('Restrict processing of my data to a particular scope'),\n  'REVOKE-CONSENT': () =>\n    msg('Revoke previously given consent for data processing'),\n  TRANSPARENCY: () =>\n    msg(\n      'Demand information related to data processing practices and know if the system has data on me'\n    ),\n  'OTHER-DEMAND': () => msg('Do or know something else'),\n  'TRANSPARENCY.DATA-CATEGORIES': () =>\n    msg('The categories of the data the organization has on me'),\n  'TRANSPARENCY.DPO': () =>\n    msg('The contact details of the data protection officer'),\n  'TRANSPARENCY.KNOWN': () => msg('If the organization has data on me'),\n  'TRANSPARENCY.LEGAL-BASES': () =>\n    msg(\n      'The legal bases for processing my data (including legitimate interests)'\n    ),\n  'TRANSPARENCY.ORGANIZATION': () =>\n    msg(\n      'The identity and contact details of the organization processing my data'\n    ),\n  'TRANSPARENCY.POLICY': () =>\n    msg('The policies applied to processing of data concerning me'),\n  'TRANSPARENCY.PROCESSING-CATEGORIES': () =>\n    msg(\n      'The cateogories of processing being done on the data the organization has on me'\n    ),\n  'TRANSPARENCY.PROVENANCE': () =>\n    msg('The sources that the data concerning me come from'),\n  'TRANSPARENCY.PURPOSE': () =>\n    msg('The purpose of the processing of the data the organization has on me'),\n  'TRANSPARENCY.RETENTION': () =>\n    msg('For how long the data concerning me kept'),\n  'TRANSPARENCY.WHERE': () => msg('Where the data about me is stored'),\n  'TRANSPARENCY.WHO': () =>\n    msg('Who can access the data that the organization has on me'),\n};\n\nexport const PROVENANCE_DESCRIPTIONS = {\n  '*': () => msg('All provenances'),\n  USER: () =>\n    msg(\n      'The data provided by a user of the system (potentially the Data Subject)'\n    ),\n  'USER.DATA-SUBJECT': () => msg('The data is provided by the Data Subject'),\n  DERIVED: () =>\n    msg(\n      'The data derived from user actions, extracted from other data or inferred'\n    ),\n  TRANSFERRED: () => msg('The data obtained by transfer from another System'),\n};\n\nexport const PROVENANCE_DESCRIPTIONS_STATUS_VIEW = {\n  '*': () => msg('All provenances'),\n  USER: () => msg('Provided by a user of the system'),\n  'USER.DATA-SUBJECT': () => msg('Provided by you while using the system'),\n  DERIVED: () =>\n    msg(\n      'Derived from user actions, extracted from other data or inferred by the system'\n    ),\n  TRANSFERRED: () => msg('Obtained by transfer from another system'),\n};\n\nexport const DATA_CATEGORY_TITLES = {\n  '*': () => msg(''),\n  AFFILIATION: () => msg('affiliation'),\n  'AFFILIATION.MEMBERSHIP': () => msg('affiliation membership'),\n  'AFFILIATION.MEMBERSHIP.UNION': () => msg(''),\n  'AFFILIATION.SCHOOL': () => msg(''),\n  'AFFILIATION.WORKPLACE': () => msg(''),\n  BEHAVIOR: () => msg('behavior'),\n  'BEHAVIOR.ACTIVITY': () => msg(''),\n  'BEHAVIOR.CONNECTION': () => msg(''),\n  'BEHAVIOR.PREFERENCE': () => msg(''),\n  'BEHAVIOR.TELEMETRY': () => msg(''),\n  BIOMETRIC: () => msg('biometric'),\n  CONTACT: () => msg('contact'),\n  'CONTACT.EMAIL': () => msg(''),\n  'CONTACT.ADDRESS': () => msg(''),\n  'CONTACT.PHONE': () => msg(''),\n  DEMOGRAPHIC: () => msg('demographic'),\n  'DEMOGRAPHIC.AGE': () => msg(''),\n  'DEMOGRAPHIC.BELIEFS': () => msg(''),\n  'DEMOGRAPHIC.GENDER': () => msg(''),\n  'DEMOGRAPHIC.ORIGIN': () => msg(''),\n  'DEMOGRAPHIC.RACE': () => msg(''),\n  'DEMOGRAPHIC.SEXUAL-ORIENTATION': () => msg(''),\n  DEVICE: () => msg('device'),\n  FINANCIAL: () => msg('financial'),\n  'FINANCIAL.BANK-ACCOUNT': () => msg('finacial bank account'),\n  GENETIC: () => msg('genetic'),\n  HEALTH: () => msg('health'),\n  IMAGE: () => msg('image'),\n  LOCATION: () => msg('location'),\n  NAME: () => msg('name'),\n  PROFILING: () => msg('profiling'),\n  RELATIONSHIPS: () => msg('relationships'),\n  UID: () => msg('uid'),\n  'UID.ID': () => msg(''),\n  'UID.IP': () => msg(''),\n  'UID.USER-ACCOUNT': () => msg(''),\n  'UID.SOCIAL-MEDIA': () => msg(''),\n  'OTHER-DATA': () => msg('other data'),\n};\n\nexport const DATA_CATEGORY_DESCRIPTIONS = {\n  '*': () =>\n    msg(\n      html`<b\n        >ALL information related to data processing practices and know if the\n        organization has data on me</b\n      >`\n    ),\n  AFFILIATION: () =>\n    msg(\n      html`<b>AFFILIATION data:</b> Groups and Organisations I am linked to\n        through work, studies, or membership`\n    ),\n  'AFFILIATION.MEMBERSHIP': () => msg(html``),\n  'AFFILIATION.MEMBERSHIP.UNION': () => msg(html``),\n  'AFFILIATION.SCHOOL': () => msg(html``),\n  'AFFILIATION.WORKPLACE': () => msg(html``),\n  BEHAVIOR: () => msg(html`<b>BEHAVIOR data:</b> Data about my behavior`),\n  'BEHAVIOR.ACTIVITY': () => msg(html``),\n  'BEHAVIOR.CONNECTION': () => msg(html``),\n  'BEHAVIOR.PREFERENCE': () => msg(html``),\n  'BEHAVIOR.TELEMETRY': () => msg(html``),\n  BIOMETRIC: () => msg(html`<b>BIOMETRIC data</b>`),\n  CONTACT: () => msg(html`<b>CONTACT data:</b> Data allowing to contact me `),\n  'CONTACT.EMAIL': () => msg(html``),\n  'CONTACT.ADDRESS': () => msg(html``),\n  'CONTACT.PHONE': () => msg(html``),\n  DEMOGRAPHIC: () =>\n    msg(\n      html`<b>DEMOGRAPHIC data:</b> All information allowing to class me in a\n        demographic category`\n    ),\n  'DEMOGRAPHIC.AGE': () => msg(html``),\n  'DEMOGRAPHIC.BELIEFS': () => msg(html``),\n  'DEMOGRAPHIC.GENDER': () => msg(html``),\n  'DEMOGRAPHIC.ORIGIN': () => msg(html``),\n  'DEMOGRAPHIC.RACE': () => msg(html``),\n  'DEMOGRAPHIC.SEXUAL-ORIENTATION': () => msg(html``),\n  DEVICE: () => msg(html`<b>DEVICE data:</b> Data about the device I used`),\n  FINANCIAL: () =>\n    msg(\n      html`<b>FINANCIAL data:</b> Payment data, financial history and data about\n        my financial situation`\n    ),\n  'FINANCIAL.BANK-ACCOUNT': () => msg(html``),\n  GENETIC: () => msg(html`<b>GENETIC data</b>`),\n  HEALTH: () => msg(html`<b>HEALTH data:</b> Data about my health`),\n  IMAGE: () =>\n    msg(\n      html`<b>IMAGE data:</b> Any graphic representation (e.g., image, video) of\n        me`\n    ),\n  LOCATION: () => msg(html`<b>LOCATION data:</b> Geographic location`),\n  NAME: () =>\n    msg(\n      html`<b>NAME data:</b> First names, last names, nicknames, and other names`\n    ),\n  PROFILING: () =>\n    msg(\n      html`<b>PROFILING data:</b> Any data establishing a degree of similarity\n        of with others (e.g., clusters, user-profiles)`\n    ),\n  RELATIONSHIPS: () =>\n    msg(\n      html`<b>RELATIONSHIPS data:</b> Data about relationships I have with\n        others, social activity and interaction`\n    ),\n  UID: () => msg(html`<b>UID data:</b> Any data that uniquely identifies me`),\n  'UID.ID': () => msg(html``),\n  'UID.IP': () => msg(html``),\n  'UID.USER-ACCOUNT': () => msg(html``),\n  'UID.SOCIAL-MEDIA': () => msg(html``),\n  'OTHER-DATA': () =>\n    msg(html`<b>OTHER DATA:</b> Any other categories or forms of data`),\n};\n\nexport const TARGET_DESCRIPTIONS = {\n  '*': () => msg(html`All targets`),\n  SYSTEM: () => msg(html`This system`),\n  ORGANIZATION: () =>\n    msg(html`This system and all systems within this organization`),\n  PARTNERS: () =>\n    msg(\n      html`This system, all systems within this organization, and all partners\n        systems where data has been <b>shared or obtained</b>`\n    ),\n  'PARTNERS.DOWNWARD': () =>\n    msg(\n      html`This system, all systems within this organization, and all partners\n        systems with which data has been <b>shared</b>`\n    ),\n  'PARTNERS.UPWARD': () =>\n    msg(\n      html`This system, all systems within this organization, and all partners\n        systems from which data has been <b>obtained</b>`\n    ),\n};\n\nexport const STATUS_DESCRIPTIONS = {\n  IN_PROCESSING: () => msg(html`In processing`),\n  PARTIALLY_COMPLETED: () => msg(html`Partially completed`),\n  COMPLETED: () => msg(html`Completed`),\n  CANCELED: () => msg(html`Canceled`),\n};\n\nexport const DEMAND_STATUS_DESCRIPTIONS = {\n  GRANTED: () => msg('granted'),\n  DENIED: () => msg('denied'),\n  'PARTIALLY-GRANTED': () => msg('partially granted'),\n  'UNDER-REVIEW': () => msg('under review'),\n  CANCELED: () => msg('canceled'),\n};\n\nexport const POLICY_TYPE_TITLES = {\n  'NO-LONGER-THAN': () => msg('no longer than'),\n  'NO-LESS-THAN': () => msg('no less than'),\n};\n\nexport const AFTER_TITLES = {\n  'CAPTURE-DATE': () => msg('capture date'),\n  'RELATIONSHIP-START': () => msg('relationship start'),\n  'RELATIONSHIP-END': () => msg('relationship end'),\n  'SERVICE-START': () => msg('service start'),\n  'SERVICE-END': () => msg('service end'),\n};\n","import { html } from 'lit';\nimport {\n  Demand,\n  ACTION,\n  AFTER,\n  DATA_CATEGORY,\n  POLICY_TYPE,\n  PROCESSING_CATEGORY,\n  PROVENANCE,\n  PURPOSE,\n  TARGET,\n} from '@blindnet/core';\nimport { PRCI_CONFIG } from './conf.js';\nimport {\n  AFTER_TITLES,\n  DATA_CATEGORY_TITLES,\n  POLICY_TYPE_TITLES,\n} from './dictionary.js';\n\nexport function getDefaultActions() {\n  return Object.values(ACTION).filter(a => !a.includes('TRANSPARENCY.'));\n}\n\nexport function getDefaultDataCategories() {\n  return Object.values(DATA_CATEGORY).filter(dc => !dc.includes('.'));\n}\n\nexport function getDefaultDemand(action: ACTION): Demand {\n  switch (action) {\n    case ACTION.ACCESS:\n      return {\n        action,\n        restrictions: {\n          privacy_scope: PRCI_CONFIG['access-allowed-data-categories']\n            .filter(dc => !dc.includes('.') && !dc.includes('*'))\n            .map(dc => ({\n              dc,\n              pc: PROCESSING_CATEGORY.ALL,\n              pp: PURPOSE.ALL,\n            })),\n          provenance: {\n            term: PROVENANCE.ALL,\n            target: TARGET.SYSTEM,\n          },\n          date_range: {},\n        },\n      };\n\n    case ACTION.DELETE:\n      return {\n        action,\n        restrictions: {\n          privacy_scope: PRCI_CONFIG['delete-allowed-data-categories']\n            .filter(dc => !dc.includes('.') && !dc.includes('*'))\n            .map(dc => ({\n              dc,\n              pc: PROCESSING_CATEGORY.ALL,\n              pp: PURPOSE.ALL,\n            })),\n          provenance: {\n            term: PROVENANCE.ALL,\n            target: TARGET.SYSTEM,\n          },\n          date_range: {},\n        },\n      };\n\n    case ACTION.REVOKE:\n      return {\n        action,\n      };\n\n    default:\n      throw Error(`No default demand for action: ${action}!`);\n  }\n}\n\nexport function getDefaultDemands(action: ACTION): Demand[] {\n  if (action === ACTION.TRANSPARENCY) {\n    return Object.values(ACTION)\n      .filter(a => a.includes('TRANSPARENCY.'))\n      .map(a => ({\n        action: a,\n        restrictions: {\n          provenance: {\n            term: PROVENANCE.ALL,\n          },\n        },\n      }));\n  }\n  throw Error('Only TRANSPARENCY action should have multiple demands!');\n}\n\n/**\n * Get a user friendly string for a retention policy\n * @param dataCategory Data category the policy pertains to\n * @param policy Type of the policy\n * @param duration String quantifying the duration, e.g. 10 months\n * @param after Point after which the data is kept\n * @returns String combining the provided information to represent a retention policy\n */\nexport function getRetentionPolicyString(\n  dataCategory: DATA_CATEGORY,\n  policyType: POLICY_TYPE,\n  duration: string,\n  after: AFTER\n) {\n  // FIXME: For our first demo, we assume duration is in months\n  return html`<i>${DATA_CATEGORY_TITLES[dataCategory]().toLocaleUpperCase()}</i>\n    data is kept <i>${POLICY_TYPE_TITLES[policyType]().toLocaleUpperCase()}</i>\n    <i>${duration}</i> months after\n    <i>${AFTER_TITLES[after]().toLocaleUpperCase()}</i>`;\n}\n\n/**\n * Get a link to the status page for the request denoted by requestId\n * @param requestId ID of the privacy request\n * @returns\n */\nexport function getRequestLink(requestId: string): URL {\n  const url = new URL(document.URL);\n  url.searchParams.set('requestId', requestId);\n  return url;\n}\n\n/**\n * Remove a query parameter from current window URL without reloading the page\n * @param param string denoting the query parameter\n */\nexport function removeQueryParam(param: string) {\n  const url = new URL(document.URL);\n  url.searchParams.delete(param);\n  window.history.pushState({}, '', url);\n}\n","import { css } from 'lit';\n\nexport const PRCIStyles = css`\n  .border--light {\n    border: 1px solid;\n    border-color: var(--prci-border-light-color, #c4c4c4);\n  }\n\n  .border--medium {\n    border: 1px solid;\n    border-color: var(--prci-border-medium-color, #5b5b5b);\n  }\n\n  .border--dark {\n    border: 1px solid;\n    border-color: var(--prci-border-dark-color, #000000);\n  }\n\n  .border--rounded {\n    border-radius: 10px;\n  }\n\n  .border--thin {\n    border-width: var(--prci-border-thin, 1px);\n  }\n\n  .border--thick {\n    border-width: var(--prci-border-thick, 2px);\n  }\n\n  /* Button Styles */\n\n  button {\n    font-family: var(\n      --prci-font-family,\n      -apple-system,\n      BlinkMacSystemFont,\n      'Segoe UI',\n      Roboto,\n      Oxygen,\n      Ubuntu,\n      Cantarell,\n      'Open Sans',\n      'Helvetica Neue',\n      sans-serif\n    );\n    font-size: 16px;\n  }\n\n  .svg-btn {\n    border: none;\n    padding: 0px;\n    margin: 0px;\n    background: none;\n  }\n\n  .link-btn {\n    display: grid;\n    grid-auto-flow: column;\n    font-size: 16px;\n    column-gap: 7.5px;\n    background: none;\n    border: none;\n    width: fit-content;\n    align-items: center;\n    padding: 0px;\n  }\n\n  .nav-btn {\n    height: 50px;\n    background-color: #18a0fb;\n    border-width: 0px;\n    border-radius: 6px;\n    font-size: 18px;\n    color: #ffffff;\n    margin: 0px 0px -200px 0px;\n    padding: 0px 25px;\n  }\n\n  .btn--centered {\n    justify-self: center;\n    justify-content: center;\n  }\n\n  .btn--curved {\n    border-radius: 8px;\n  }\n\n  .btn--clickable {\n    box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.1),\n      0px 2px 4px rgba(0, 0, 0, 0.2), 0px 4px 8px rgba(0, 0, 0, 0.2),\n      0px 8px 16px rgba(0, 0, 0, 0.2);\n  }\n\n  .btn--clickable:not([disabled]):hover {\n    transform: translateY(-2px);\n    transition: 0.2s;\n    box-shadow: 0px 7px 10px 0px rgba(0, 0, 0, 0.3),\n      0px 4px 4px rgba(0, 0, 0, 0.2), 0px 6px 8px rgba(0, 0, 0, 0.2),\n      0px 10px 16px rgba(0, 0, 0, 0.2);\n  }\n\n  .btn--clickable:not([disabled]):active {\n    transform: translateY(2px);\n    transition: 0.2s;\n    box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.1),\n      0px 2px 4px rgba(0, 0, 0, 0.2), 0px 4px 8px rgba(0, 0, 0, 0.2),\n      0px 8px 16px rgba(0, 0, 0, 0.2);\n  }\n\n  /* Text Styles */\n\n  p {\n    font-family: var(\n      --prci-font-family,\n      -apple-system,\n      BlinkMacSystemFont,\n      'Segoe UI',\n      Roboto,\n      Oxygen,\n      Ubuntu,\n      Cantarell,\n      'Open Sans',\n      'Helvetica Neue',\n      sans-serif\n    );\n    font-size: 16px;\n    padding: 0px;\n    margin: 0px;\n  }\n\n  span {\n    font-family: var(\n      --prci-font-family,\n      -apple-system,\n      BlinkMacSystemFont,\n      'Segoe UI',\n      Roboto,\n      Oxygen,\n      Ubuntu,\n      Cantarell,\n      'Open Sans',\n      'Helvetica Neue',\n      sans-serif\n    );\n    font-size: 16px;\n  }\n\n  textarea {\n    font-family: var(\n      --prci-font-family,\n      -apple-system,\n      BlinkMacSystemFont,\n      'Segoe UI',\n      Roboto,\n      Oxygen,\n      Ubuntu,\n      Cantarell,\n      'Open Sans',\n      'Helvetica Neue',\n      sans-serif\n    );\n    font-size: 16px;\n    background: #f8f8fc;\n    border: 1px solid #e5e5e5;\n    border-radius: 8px;\n  }\n\n  .text--underline {\n    text-decoration: underline;\n  }\n\n  .text--italic {\n    font-style: italic;\n  }\n\n  .text--center-vertical {\n    align-items: center;\n    justify-content: center;\n  }\n\n  /* Container Styles */\n\n  .view-ctr {\n    padding: 60px;\n  }\n\n  .provenance-restriction {\n    border: none;\n    padding: 0px;\n    margin: 0px;\n  }\n\n  .provenance-restriction input {\n    margin: 20px 0px 20px 30px;\n  }\n\n  .provenance-restriction input:nth-last-child(3) {\n    margin: 20px 0px 0px 30px;\n  }\n\n  .provenance-restriction input:first-child {\n    margin: 35px 0px 20px 30px;\n  }\n\n  .date-restriction {\n    display: grid;\n    row-gap: 35px;\n  }\n\n  .date-restriction div {\n    padding: 0px 0px 0px 30px;\n  }\n`;\n","import { html, css, LitElement } from 'lit';\nimport { customElement } from 'lit/decorators.js';\n\n/**\n * WIP - Display a list of \"bread and butter\" requests relevant\n * to the user of the component.\n */\n@customElement('frequent-requests-menu')\nexport class FrequentRequestsMenu extends LitElement {\n  static styles = css``;\n\n  render() {\n    return html``;\n  }\n}\n","/* eslint-disable lit/binding-positions */\nimport { msg } from '@lit/localize';\nimport { css, html, LitElement, PropertyValueMap } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { map } from 'lit/directives/map.js';\nimport { when } from 'lit/directives/when.js';\nimport {\n  ACTION,\n  DATA_CATEGORY,\n  PROVENANCE,\n  TARGET,\n  Demand,\n} from '@blindnet/core';\nimport { PRCIStyles } from './styles.js';\nimport {\n  ACTION_DESCRIPTIONS,\n  ACTION_TITLES,\n  DATA_CATEGORY_DESCRIPTIONS,\n  PROVENANCE_DESCRIPTIONS,\n  TARGET_DESCRIPTIONS,\n} from './utils/dictionary.js';\nimport { ComponentState } from './utils/states.js';\n\nconst editSvg = new URL('./assets/icons/edit-fill.svg', import.meta.url).href;\n\nconst trashSvg = new URL('./assets/icons/delete.svg', import.meta.url).href;\n\n@customElement('review-view')\nexport class ReviewView extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        display: grid;\n      }\n\n      :host([confirm-delete]) .dmd-review-ctr {\n        background: #c4c4c4;\n        opacity: 0.7;\n      }\n\n      #review-heading-row {\n        display: grid;\n        grid-area: 1/1/2/2;\n        grid-template-columns: repeat(2, 1fr);\n        z-index: 2;\n      }\n\n      .dmd-review-ctr {\n        display: grid;\n        padding: 40px;\n      }\n\n      #review-btns {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        column-gap: 20px;\n      }\n\n      .review-btn {\n        width: 24px;\n        height: 24px;\n      }\n\n      #review-content {\n        display: grid;\n        grid-area: 2/1/3/2;\n        z-index: 1;\n      }\n\n      .extra-msg-txt {\n        padding: 0px 0px 0px 20px;\n      }\n\n      .review-list li:not(:last-child) {\n        margin: 0px 0px 20px 0px;\n      }\n\n      .review-list {\n        margin: 0px;\n      }\n\n      #request-settings {\n        margin: 20px 0px 0px 0px;\n      }\n\n      #delete-confirm-popup {\n        display: grid;\n        row-gap: 20px;\n        background: white;\n        padding: 40px;\n        z-index: 2;\n        grid-area: 1/1/3/2;\n        justify-self: center;\n        align-self: center;\n        width: 40%;\n        height: 150px;\n      }\n\n      .popup-txt {\n        text-align: center;\n      }\n\n      #popup-btns-ctr {\n        display: flex;\n        column-gap: 50px;\n        justify-content: center;\n      }\n\n      .popup-btn {\n        min-width: 30%;\n        max-width: 200px;\n        /* width: 30%; */\n        font-size: 18px;\n      }\n\n      #confirm-delete-btn {\n        background: red;\n        color: white;\n        border: none;\n      }\n\n      #cancel-delete-btn {\n        background: white;\n        color: black;\n        border: 2px solid #18a0fb;\n      }\n\n      #submit-btn {\n        transform: translateY(35px);\n      }\n\n      h2,\n      h3 {\n        margin-top: 0px;\n      }\n\n      h4 {\n        font-weight: normal;\n      }\n    `,\n  ];\n\n  @property({ attribute: false }) demandGroupId: string = '';\n\n  @property({ attribute: false }) demands: Demand[] = [];\n\n  @property({ attribute: false }) demand: Demand = { action: ACTION.ACCESS };\n\n  @property({ type: Boolean, reflect: true, attribute: 'confirm-delete' })\n  confirmDelete: boolean = false;\n\n  @property({ attribute: false }) target: TARGET = TARGET.PARTNERS;\n\n  @state() _action: ACTION = ACTION.ACCESS;\n\n  getAccessReviewTemplate() {\n    const from = this.demand.restrictions?.date_range?.from;\n    const to = this.demand.restrictions?.date_range?.to;\n    const provenance = this.demand.restrictions?.provenance;\n    const privacyScope = this.demand.restrictions?.privacy_scope;\n    return html`\n      <h4>${msg('I want to access:')}</h4>\n      <ul id=\"access-review-list\" class=\"review-list\">\n        ${when(\n          privacyScope &&\n            Object.values(DATA_CATEGORY)\n              .filter(dc => !dc.includes('.') && dc !== DATA_CATEGORY.ALL)\n              .every(dc => privacyScope.map(psr => psr.dc).includes(dc)),\n          () => html`\n            <li>${DATA_CATEGORY_DESCRIPTIONS[DATA_CATEGORY.ALL]()}</li>\n          `,\n          () => html`\n            ${map(\n              this.demand.restrictions?.privacy_scope,\n              psr => html`<li>${DATA_CATEGORY_DESCRIPTIONS[psr.dc]()}</li> `\n            )}\n          `\n        )}\n      </ul>\n      ${when(\n        from || to,\n        () => html`<p>${this.getDateRangeReviewTemplate(from, to)}</p>`\n      )}\n      ${when(\n        provenance?.term !== PROVENANCE.ALL,\n        () => html`\n          <p>\n            ${msg('For:')} <b>${PROVENANCE_DESCRIPTIONS[provenance!.term]()}</b>\n          </p>\n        `\n      )}\n      ${when(\n        provenance?.target !== TARGET.SYSTEM,\n        () => html`\n          <p>\n            ${msg('From:')} <b>${TARGET_DESCRIPTIONS[provenance!.target!]()}</b>\n          </p>\n        `\n      )}\n      ${when(\n        this.demand.message,\n        () => html`\n          <h4>${msg('Plus additional info:')}</h4>\n          <span class=\"extra-msg-txt\"><i>${this.demand.message}</i></span>\n        `\n      )}\n    `;\n  }\n\n  getDeleteReviewTemplate() {\n    const from = this.demand.restrictions?.date_range?.from;\n    const to = this.demand.restrictions?.date_range?.to;\n    const provenance = this.demand.restrictions?.provenance;\n    const privacyScope = this.demand.restrictions?.privacy_scope;\n    return html`\n      <h4>${msg('I want to delete:')}</h4>\n      <ul id=\"delete-review-list\" class=\"review-list\">\n        ${when(\n          privacyScope &&\n            Object.values(DATA_CATEGORY)\n              .filter(dc => !dc.includes('.') && dc !== DATA_CATEGORY.ALL)\n              .every(dc => privacyScope.map(psr => psr.dc).includes(dc)),\n          () => html`\n            <li>${DATA_CATEGORY_DESCRIPTIONS[DATA_CATEGORY.ALL]()}</li>\n          `,\n          () => html`\n            ${map(\n              this.demand.restrictions?.privacy_scope,\n              psr => html`<li>${DATA_CATEGORY_DESCRIPTIONS[psr.dc]()}</li> `\n            )}\n          `\n        )}\n      </ul>\n      ${when(\n        from || to,\n        () => html`<p>${this.getDateRangeReviewTemplate(from, to)}</p>`\n      )}\n      ${when(\n        provenance?.term !== PROVENANCE.ALL,\n        () => html`\n          <p>\n            ${msg('For:')} <b>${PROVENANCE_DESCRIPTIONS[provenance!.term]()}</b>\n          </p>\n        `\n      )}\n      ${when(\n        provenance?.target !== TARGET.SYSTEM,\n        () => html`\n          <p>\n            ${msg('From:')} <b>${TARGET_DESCRIPTIONS[provenance!.target!]()}</b>\n          </p>\n        `\n      )}\n      ${when(\n        this.demand.message,\n        () => html`\n          <h4>${msg('Plus additional info:')}</h4>\n          <span class=\"extra-msg-txt\"><i>${this.demand.message}</i></span>\n        `\n      )}\n    `;\n  }\n\n  getModifyReviewTemplate() {\n    return html``;\n  }\n\n  getObjectReviewTemplate() {\n    return html``;\n  }\n\n  getPortabilityReviewTemplate() {\n    return html``;\n  }\n\n  getRestrictReviewTemplate() {\n    return html``;\n  }\n\n  /**\n   * FIXME: Use actual revoke texts once the endpoint provides them\n   * @returns\n   */\n  getRevokeReviewTemplate() {\n    return html`\n      <h4>${msg('I no longer consent to:')}</h4>\n      <ul class=\"review-list\">\n        ${map(\n          this.demands,\n          () => html`\n            <li>\n              The storage and processing of my data for the purposes of the\n              prize draw\n            </li>\n          `\n        )}\n      </ul>\n      ${when(\n        this.demands[0].message,\n        () => html`\n          <span>${msg('Plus additional info:')}</span>\n          <span class=\"extra-msg-txt\"><i>${this.demands[0].message}</i></span>\n        `\n      )}\n    `;\n  }\n\n  getTransparencyReviewTemplate() {\n    const provenance = this.demands[0].restrictions?.provenance;\n    return html`\n      <h4>${msg('I want to know:')}</h4>\n      <ul id=\"transparency-review-list\" class=\"review-list\">\n        ${map(\n          this.demands,\n          d => html` <li><b>${ACTION_DESCRIPTIONS[d.action]()}</b></li> `\n        )}\n      </ul>\n      ${when(\n        provenance?.term !== PROVENANCE.ALL,\n        () => html`\n          <p>\n            ${msg('For:')} <b>${PROVENANCE_DESCRIPTIONS[provenance!.term]()}</b>\n          </p>\n        `\n      )}\n      ${when(\n        this.demands[0].message,\n        () => html`\n          <h4>${msg('Plus additional info:')}</h4>\n          <span class=\"extra-msg-txt\"><i>${this.demands[0].message}</i></span>\n        `\n      )}\n    `;\n  }\n\n  getOtherDemandReviewTemplate() {\n    return html``;\n  }\n\n  getDateRangeReviewTemplate(from: Date | undefined, to: Date | undefined) {\n    if (from && to) {\n      return html`${msg('From')} <b>${from?.toLocaleDateString('en-GB')}</b> to\n        <b>${to?.toLocaleDateString('en-GB')}</b>`;\n    }\n    if (from) {\n      return html`${msg('Since')} <b>${from?.toLocaleDateString('en-GB')}</b>`;\n    }\n    if (to) {\n      return html`${msg('Up to')} <b>${to?.toLocaleDateString('en-GB')}</b>`;\n    }\n    return html``;\n  }\n\n  handleEditClick() {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.EDIT,\n          // Use transparency action for any of its subtypes\n          newAction: this.demands[0].action.includes('TRANSPARENCY')\n            ? ACTION.TRANSPARENCY\n            : this.demands[0].action,\n          demandGroupId: this.demandGroupId,\n        },\n      })\n    );\n  }\n\n  handleDeleteClick() {\n    this.confirmDelete = true;\n  }\n\n  handleConfirmDeleteClick() {\n    this.dispatchEvent(\n      new CustomEvent('demand-delete', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          demandGroupId: this.demandGroupId,\n        },\n      })\n    );\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.MENU,\n        },\n      })\n    );\n  }\n\n  handleCancelDeleteClick() {\n    this.confirmDelete = false;\n  }\n\n  handleTargetClick(e: Event) {\n    const { id } = (e as CustomEvent).target as HTMLInputElement;\n    this.target = id as TARGET;\n    this.dispatchEvent(\n      new CustomEvent('request-target-change', {\n        bubbles: true,\n        composed: true,\n        detail: { id },\n      })\n    );\n  }\n\n  handleSubmitClick() {\n    this.dispatchEvent(\n      new Event('submit-request', {\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  /**\n   * Determine the action to use for this review container whenever demands changes\n   * @param _changedProperties Properties that have changed in this update\n   */\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    if (_changedProperties.has('demands') && this.demands.length > 0) {\n      this._action = this.demands[0].action;\n      if (this._action.includes('TRANSPARENCY')) {\n        this._action = ACTION.TRANSPARENCY;\n      } else {\n        [this.demand] = this.demands;\n      }\n    }\n  }\n\n  render() {\n    return html`\n      <h2><b>${msg('My demand(s):')}</b></h2>\n\n      <div class=\"dmd-review-ctr border--light border--rounded\">\n        <div id=\"review-heading-row\">\n          <h3 id=\"review-action-heading\">${ACTION_TITLES[\n            this._action\n          ]()} Demand</h3>\n          <div id=\"review-btns\">\n            <button class='svg-btn' @click=${this.handleEditClick}>\n              <img src=${editSvg} alt='edit'/>\n            </button>\n            <button class='svg-btn' @click=${this.handleDeleteClick}>\n              <img src=${trashSvg} alt='delete'/>\n            </button>\n          </div>\n        </div>\n        <div id=\"review-content\">\n          ${choose(this._action, [\n            [ACTION.ACCESS, () => this.getAccessReviewTemplate()],\n            [ACTION.DELETE, () => this.getDeleteReviewTemplate()],\n            [ACTION.MODIFY, () => this.getModifyReviewTemplate()],\n            [ACTION.OBJECT, () => this.getObjectReviewTemplate()],\n            [ACTION.PORTABILITY, () => this.getPortabilityReviewTemplate()],\n            [ACTION.RESTRICT, () => this.getRestrictReviewTemplate()],\n            [ACTION.REVOKE, () => this.getRevokeReviewTemplate()],\n            [ACTION.TRANSPARENCY, () => this.getTransparencyReviewTemplate()],\n            [ACTION['OTHER.DEMAND'], () => this.getOtherDemandReviewTemplate()],\n          ])}\n        </div>\n        ${when(\n          this.confirmDelete,\n          () => html`\n            <div id=\"delete-confirm-popup\" class=\"border--rounded\">\n              <span class=\"popup-txt\"\n                >${msg('You are about to remove a demand')}</span\n              >\n              <span class=\"popup-txt\"\n                >${msg(html`Do you confirm <b>deleting this demand</b>?`)}</span\n              >\n              <div id=\"popup-btns-ctr\">\n                <button\n                  id=\"confirm-delete-btn\"\n                  class=\"btn--curved popup-btn\"\n                  @click=${this.handleConfirmDeleteClick}\n                >\n                  ${msg('Delete')}\n                </button>\n                <button\n                  id=\"cancel-delete-btn\"\n                  class=\"btn--curved popup-btn\"\n                  @click=${this.handleCancelDeleteClick}\n                >\n                  ${msg('Cancel')}\n                </button>\n              </div>\n            </div>\n          `\n        )}\n        </div>\n\n      </div>\n      <!-- Uncomment when supporting multiple demands -->\n      <!-- <div id=\"new-dmd-ctr\" class=\"border--medium border--rounded\">\n        <span><b>${msg('I want to add another demand')}</b></span>\n        <button class=\"svg-btn\">\n          <img src=\"packages/prci/src/assets/icons/add-circle.svg\" alt=\"add icon\"></img>\n        </button>\n      </div> -->\n      <!-- Submit button -->\n      <slotted-dropdown\n        id='request-settings'\n        .header=${msg('Privacy Request Advanced settings')}\n        include-buttons\n      >\n        <div>\n          <span> ${msg('I address my Privacy Request to:')} </span>\n          <fieldset class=\"provenance-restriction\">\n            ${Object.values(TARGET)\n              .filter(t => t !== TARGET.ALL)\n              .map(\n                t => html`\n                <input\n                  id=${t}\n                  name='provenance-target'\n                  type='radio'\n                  ?checked=${this.target === t}\n                  @click=${this.handleTargetClick}>\n                </input>\n                <label for=${t}>${TARGET_DESCRIPTIONS[t]()}</label><br/>\n              `\n              )}\n          </fieldset>\n        </div>\n      </slotted-dropdown>\n      <button\n        id=\"submit-btn\"\n        class=\"nav-btn btn--centered  btn--clickable\"\n        @click=${this.handleSubmitClick}\n      >\n        ${msg('Submit Privacy Request')}\n      </button>\n    `;\n  }\n}\n","import { localized } from '@lit/localize';\nimport { html, css, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { ACTION } from '@blindnet/core';\nimport { PRCIStyles } from './styles.js';\nimport { ACTION_DESCRIPTIONS, ACTION_TITLES } from './utils/dictionary.js';\nimport { ComponentState } from './utils/states.js';\n\n@customElement('action-item')\n/**\n * Button element representing a single demand action. Used in the action menu.\n */\n@localized()\nexport class ActionItem extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      /* :host button {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,\n          Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n        font-size: 16px;\n      } */\n\n      .action-button {\n        border-radius: 15px;\n        border: 0.5px solid #5b5b5b;\n        background-color: #fafafa;\n        padding: 10px 40px;\n        height: 120px;\n        width: 100%;\n        max-width: 400px;\n        text-align: left;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .btn-txt {\n        /* text-overflow: ellipsis; */\n        overflow: hidden;\n      }\n\n      .bolder {\n        font-weight: 700;\n      }\n    `,\n  ];\n\n  @property({ attribute: false }) action: ACTION = ACTION.ACCESS;\n\n  // Boolean mapping to the disabled attribute of the HTMLButtonElement\n  @property({ type: Boolean }) disabled: boolean = false;\n\n  handleClick() {\n    const event = new CustomEvent('component-state-change', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        newState: ComponentState.EDIT,\n        newAction: this.action,\n      },\n    });\n    this.dispatchEvent(event);\n  }\n\n  render() {\n    return html`\n      <button\n        class=\"action-button btn--clickable\"\n        @click=\"${this.handleClick}\"\n        ?disabled=${this.disabled}\n      >\n        <strong>${ACTION_TITLES[this.action]()}:</strong> ${ACTION_DESCRIPTIONS[\n          this.action\n        ]()}\n      </button>\n    `;\n  }\n}\n","import { html, css, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { localized, msg } from '@lit/localize';\nimport './ActionItem.js';\nimport { ACTION } from '@blindnet/core';\nimport { enabledActions } from './utils/conf.js';\nimport { PRCIStyles } from './styles.js';\nimport { ComponentState } from './utils/states.js';\n\nconst arrowForwardSvg = new URL(\n  './assets/icons/arrow-forward.svg',\n  import.meta.url\n).href;\n\n/**\n * Menu of clickable action types\n */\n@localized()\n@customElement('action-menu-view')\nexport class ActionMenu extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      .actions-container {\n        display: grid;\n        grid-template-columns: repeat(3, 1fr);\n        gap: 50px;\n        /* padding: 30px 40px 10px 40px; */\n      }\n\n      .prompt-heading {\n        font-size: 16px;\n        text-align: left;\n        padding: 0px 0px 0px 0px;\n        margin: 0px 0px 35px 0px;\n      }\n\n      #other-dmd-btn {\n        margin: 20px 0px 0px 0px;\n        justify-self: right;\n        color: #5b5b5b;\n      }\n\n      #below-menu-btns-ctr {\n        display: grid;\n        row-gap: 50px;\n        max-width: 1170px;\n      }\n\n      #requests-btn {\n        display: flex;\n        justify-content: center;\n        justify-self: center;\n        align-items: center;\n        column-gap: 20px;\n        background: none;\n        padding: 20px;\n        width: 35%;\n        font-size: 18px;\n        border-radius: 15px;\n      }\n\n      #requests-btn img {\n        float: right;\n      }\n    `,\n  ];\n\n  // Text displayed above menu\n  @property({ type: String }) prompt = 'Type of demand I want to submit:';\n\n  // Actions to be displayed in the menu, each corresponding to an ActionItem.\n  @property({ attribute: false }) includedActions: ACTION[] = [];\n\n  handleRequestsClick() {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.REQUESTS,\n        },\n      })\n    );\n  }\n\n  render() {\n    return html`\n      <div class=\"view-ctr border--medium border--rounded\">\n        <div class=\"prompt-heading\"><b>${this.prompt}</b></div>\n        <div class=\"actions-container\">\n          ${this.includedActions\n            .filter(a => a !== ACTION['OTHER.DEMAND'])\n            .map(\n              a =>\n                html`<action-item\n                  .action=${a}\n                  ?disabled=${!enabledActions.get(a)}\n                ></action-item>`\n            )}\n        </div>\n      </div>\n      <div id=\"below-menu-btns-ctr\">\n        <button id=\"other-dmd-btn\" class=\"link-btn text--underline\">\n          ${msg(\n            'Click here if you want to make some other demand (please note that it might take longer to be answered)'\n          )}\n        </button>\n        <button\n          id=\"requests-btn\"\n          class=\"btn--curved border--medium border--rounded btn--clickable\"\n          @click=${this.handleRequestsClick}\n        >\n          <span>${msg('Access my submitted Privacy Requests')}</span>\n          <img src=${arrowForwardSvg} alt=\"\" />\n        </button>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, LitElement } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\nimport {\n  REQUEST_STATUS,\n  RequestHistoryItem,\n  ComputationAPI,\n} from '@blindnet/core';\nimport { PRCIStyles } from './styles.js';\nimport { STATUS_DESCRIPTIONS } from './utils/dictionary.js';\nimport { ComponentState } from './utils/states.js';\n\n@customElement('requests-view')\nexport class RequestsView extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        display: grid;\n        max-width: 1000px;\n        margin: auto;\n        row-gap: 40px;\n        justify-items: center;\n      }\n\n      #table-ctr {\n        width: 100%;\n      }\n\n      #requests-list {\n        display: grid;\n        row-gap: 30px;\n      }\n\n      .list__row--header {\n        display: grid;\n        padding: 0px 10px;\n        grid-column-gap: 5px;\n        grid-template-columns: 3fr 2fr 1fr 2fr;\n        text-align: center;\n      }\n\n      .list__row {\n        display: grid;\n        grid-template-columns: 3fr 2fr 1fr 2fr;\n        grid-column-gap: 5px;\n        padding: 20px 10px;\n        border: 2px solid #5b5b5b;\n        border-radius: 10px;\n        box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.5);\n      }\n\n      .list__field {\n        display: inline-flex;\n        justify-items: center;\n        text-align: center;\n        justify-self: center;\n        align-items: center;\n      }\n\n      .list__field:last-child {\n        padding: 0px 20px 0px 0px;\n      }\n\n      #new-request-btn {\n        font-size: 18px;\n      }\n    `,\n  ];\n\n  @state() _requests: RequestHistoryItem[] = [];\n\n  connectedCallback(): void {\n    // eslint-disable-next-line wc/guard-super-call\n    super.connectedCallback();\n\n    ComputationAPI.getInstance()\n      .getRequestHistory()\n      .then(response => {\n        this._requests = response.history;\n      });\n  }\n\n  handleRequestClick(e: Event) {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.STATUS,\n          requestId: (e.target as HTMLInputElement).id,\n        },\n      })\n    );\n  }\n\n  handleNewRequestClick() {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.MENU,\n        },\n      })\n    );\n  }\n\n  render() {\n    return html`\n      <div id=\"table-ctr\">\n        <div id=\"requests-list\">\n          <div class=\"list__row--header\">\n            <span><b>${msg('Created')}</b></span>\n            <span><b>${msg('Status')}</b></span>\n            <span><b>${msg('Demands')}</b></span>\n            <span></span>\n          </div>\n          ${map(\n            this._requests,\n            r => html`\n              <div class=\"list__row\">\n                <span class=\"list__field\"\n                  >${new Date(r.date).toLocaleString()}</span\n                >\n                <span class=\"list__field\"\n                  >${STATUS_DESCRIPTIONS[r.status as REQUEST_STATUS]()}</span\n                >\n                <span class=\"list__field\">${r.demands}</span>\n                <button\n                  id=${r.id}\n                  class=\"link-btn dark-font text--underline list__field\"\n                  @click=${this.handleRequestClick}\n                >\n                  ${msg('See Details')}\n                </button>\n              </div>\n            `\n          )}\n        </div>\n      </div>\n      <div id=\"new-request-ctr\">\n        <button\n          id=\"new-request-btn\"\n          class=\"link-btn dark-font text--underline\"\n          @click=${this.handleNewRequestClick}\n        >\n          ${msg('Submit a new Privacy Request')}\n        </button>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { map } from 'lit/directives/map.js';\nimport { when } from 'lit/directives/when.js';\nimport {\n  ACTION,\n  DATA_CATEGORY,\n  DEMAND_STATUS,\n  PROCESSING_CATEGORY,\n  PROVENANCE,\n  PURPOSE,\n  PrivacyResponseItem,\n  ComputationAPI,\n} from '@blindnet/core';\nimport { LegalBase } from './models/legal-base.js';\nimport { Provenance } from './models/provenance.js';\nimport { RetentionPolicy } from './models/retention-policy.js';\nimport { PRCIStyles } from './styles.js';\nimport {\n  ACTION_DESCRIPTIONS,\n  ACTION_TITLES,\n  DEMAND_STATUS_DESCRIPTIONS,\n} from './utils/dictionary.js';\nimport { getRetentionPolicyString } from './utils/utils.js';\n\n/**\n * Status for a single demand in a Privacy Request\n */\n@customElement('status-view-item')\nexport class StatusViewItem extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      .demand-status-ctr {\n        display: flex;\n        flex-direction: column;\n        border-radius: 15px;\n        border: 2px solid #e6e6e6;\n        box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.5);\n      }\n\n      .status-type-ctr {\n        font-size: 16px;\n      }\n\n      .demand-status-ctr span {\n        padding: 10px 0px;\n      }\n\n      .dmd-action-ctr {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        align-items: center;\n        justify-items: center;\n        column-gap: 20px;\n        padding: 20px 20px;\n        background: white;\n      }\n\n      .granted-dmd {\n        background-color: #51d214;\n        border-color: #51d214;\n      }\n\n      .granted-dmd button {\n        border: 2px solid #51d214;\n      }\n\n      :host([open]) .granted-dmd button {\n        background-color: #51d214;\n      }\n\n      .denied-dmd {\n        background-color: #f90707;\n        border-color: #f90707;\n      }\n\n      .denied-dmd button {\n        border: 2px solid #f90707;\n      }\n\n      :host([open]) .denied-dmd button {\n        background-color: #f90707;\n      }\n\n      .partially-granted-dmd {\n        background-color: #ff7a00;\n        border-color: #ff7a00;\n      }\n\n      .partially-granted-dmd button {\n        border: 2px solid #ff7a00;\n      }\n\n      :host([open]) .partially-granted-dmd button {\n        background-color: #ff7a00;\n      }\n\n      :host([open]) .details-btn {\n        color: white;\n      }\n\n      /* :host([open]) .cancel-btn {\n        background-color: #f90707;\n        color: white;\n      } */\n\n      .status-btn {\n        background: none;\n        padding: 10px 40px;\n        width: 100%;\n        justify-self: center;\n        align-self: flex-end;\n        float: right;\n        font-size: 16px;\n        font-weight: bold;\n      }\n\n      .details-btn {\n        background-color: white;\n        color: black;\n      }\n\n      .cancel-btn {\n        border: 2px solid #f90707;\n      }\n\n      .cancel-confirm-btn {\n        background: none;\n        padding: 10px 40px;\n      }\n\n      #cancel-dmd-btn {\n        border-color: #f90707;\n      }\n\n      .round-bottom {\n        border-bottom-left-radius: 15px;\n        border-bottom-right-radius: 15px;\n      }\n\n      .granted-dmd span {\n        color: white;\n      }\n\n      .denied-dmd span {\n        color: white;\n      }\n\n      .partially-granted-dmd span {\n        color: white;\n      }\n\n      .under-review-dmd {\n        background-color: #e6e6e6;\n        border-color: #e6e6e6;\n      }\n\n      .canceled-dmd {\n        background-color: #ffc1bd;\n        border-color: #f90707;\n      }\n\n      .canceled-dmd .status-type-ctr {\n        border-bottom: 2px solid #f90707;\n      }\n\n      .canceled-dmd .dmd-action-ctr {\n        grid-template-columns: 1fr;\n      }\n\n      #cancel-btns-ctr {\n        display: flex;\n        justify-content: center;\n        column-gap: 10px;\n      }\n\n      .action-title {\n        justify-self: center;\n      }\n\n      .dmd-details-ctr {\n        display: grid;\n        background-color: white;\n        row-gap: 20px;\n        padding: 10px 20px 30px 20px;\n      }\n\n      p {\n        margin: 0;\n        padding: 0;\n      }\n    `,\n  ];\n\n  @property({ attribute: false }) demand: PrivacyResponseItem = {\n    demand_id: '',\n    date: '',\n    requested_action: ACTION.ACCESS,\n    status: DEMAND_STATUS.GRANTED,\n    includes: [],\n    system: '',\n  };\n\n  @property({ attribute: false }) demands: PrivacyResponseItem[] = [];\n\n  @property({ type: Boolean, reflect: true }) open: boolean = false;\n\n  accessResponseTemplate(demand: PrivacyResponseItem) {\n    return html`\n      ${when(\n        [DEMAND_STATUS.GRANTED, DEMAND_STATUS['PARTIALLY-GRANTED']].includes(\n          demand.status\n        ),\n        () => {\n          if (demand.data) {\n            return html`\n              <div>\n                ${msg(\n                  // NOTE: For now, we assume demand.data is a JSON file\n                  html`Click <a href=\"${demand.data}.json\">here</a> to download\n                    your data.`\n                )}\n              </div>\n            `;\n          }\n          return html`${msg(\n            'Obtaining data, please wait and refresh the page later.'\n          )}`;\n        }\n      )}\n    `;\n  }\n\n  deleteResponseTemplate() {\n    return html``;\n  }\n\n  transparencyResponseTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyDcTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(demand.answer as Array<string>, dc => html` ${dc}<br /> `)}\n    `;\n  }\n\n  transparencyDpoTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyKnownTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyLbTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        demand.answer as Array<LegalBase>,\n        lb => html`\n          Type: ${lb.lb_type}<br />\n          Name: ${lb.name}<br />\n          Description: ${lb.description}<br /><br />\n        `\n      )}\n    `;\n  }\n\n  transparencyOrgTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyPolicyTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyPcTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        demand.answer as Array<PROCESSING_CATEGORY>,\n        pc => html` ${pc}<br /> `\n      )}\n    `;\n  }\n\n  transparencyProvTemplate(demand: PrivacyResponseItem) {\n    const answer = demand.answer as {\n      'AFFILIATION.selector_1': Provenance[];\n      'AFFILIATION.MEMBERSHIP.selector_2': Provenance[];\n      'FINANCIAL.BANK-ACCOUNT.selector_3': Provenance[];\n    };\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(Object.entries(demand.answer as Object), ([d, p]) => {\n        const dc = d as DATA_CATEGORY;\n        const provenances = p as Provenance[];\n        return html`\n          ${map(\n            provenances,\n            prov => html`\n              <p>\n                <i>${dc}</i> data:\n                ${choose(prov.provenance, [\n                  [PROVENANCE.ALL, () => msg(html``)],\n                  [\n                    PROVENANCE.USER,\n                    () =>\n                      msg(\n                        html`Provided by a user of the\n                          <i>${prov.system}</i> system`\n                      ),\n                  ],\n                  [\n                    PROVENANCE['USER.DATA-SUBJECT'],\n                    () =>\n                      msg(\n                        html`Provided by you as a user of the\n                          <i>${prov.system}</i> system`\n                      ),\n                  ],\n                  [\n                    PROVENANCE.TRANSFERRED,\n                    () =>\n                      msg(\n                        html`Derived by user actions, extracted from other data,\n                          or inferred by the <i>${prov.system}</i> system`\n                      ),\n                  ],\n                  [\n                    PROVENANCE.DERIVED,\n                    () =>\n                      msg(\n                        html`Obtained by transfer from the\n                          <i>${prov.system}</i> system`\n                      ),\n                  ],\n                ])}\n              </p>\n            `\n          )}\n        `;\n      })}\n      ${map(\n        answer['AFFILIATION.selector_1'],\n        prov => html`\n          Provenance: ${prov.provenance}<br />\n          System: ${prov.system}<br /><br />\n        `\n      )}\n    `;\n  }\n\n  transparencyPurposeTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        demand.answer as Array<PURPOSE>,\n        purpose => html` ${purpose}<br /> `\n      )}\n    `;\n  }\n\n  transparencyRetTemplate(demand: PrivacyResponseItem) {\n    const answer = demand.answer as {\n      NAME: RetentionPolicy[];\n    };\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        answer.NAME,\n        rp =>\n          html`<p>\n            ${getRetentionPolicyString(\n              DATA_CATEGORY.NAME,\n              rp.policy_type,\n              rp.duration,\n              rp.after\n            )}\n          </p>`\n      )}\n    `;\n  }\n\n  transparencyWhereTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(demand.answer as Array<string>, where => html` ${where}<br /> `)}\n    `;\n  }\n\n  transparencyWhoTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(demand.answer as Array<string>, who => html` ${who}<br /> `)}\n    `;\n  }\n\n  handleConfirmCancelClick() {\n    ComputationAPI.getInstance().cancelDemand(this.demand.demand_id);\n  }\n\n  render() {\n    return html`\n      <div\n        class=\"demand-status-ctr ${this.demand.status.toLowerCase()}-dmd border--medium border--rounded\"\n      >\n        <span class=\"status-type-ctr\"><b>${this.demand.status}</b></span>\n        <div class=\"dmd-action-ctr ${this.open ? '' : 'round-bottom'}\">\n          <p class=\"action-title\">\n            <b\n              >${ACTION_TITLES[this.demand.requested_action]()}\n              ${msg('Demand')}</b\n            >\n          </p>\n          ${when(\n            [\n              DEMAND_STATUS.GRANTED,\n              DEMAND_STATUS['PARTIALLY-GRANTED'],\n              DEMAND_STATUS.DENIED,\n            ].includes(this.demand.status),\n            () => html`\n              <button\n                class=\"status-btn ${this.demand.status.toLowerCase()}-${this\n                  .open\n                  ? 'open'\n                  : 'closed'}-btn details-btn btn--curved btn--clickable\"\n                @click=${() => {\n                  this.open = !this.open;\n                }}\n              >\n                ${msg('Details')}\n              </button>\n            `\n          )}\n          ${when(\n            this.demand.status === DEMAND_STATUS['UNDER-REVIEW'],\n            () => html`\n              ${when(\n                this.open,\n                () => html`\n                  <button\n                    class=\"status-btn cancel-btn btn--curved btn--clickable\"\n                    @click=${() => {\n                      this.open = !this.open;\n                    }}\n                    disabled\n                  >\n                    ${msg('Cancel Demand')}\n                  </button>\n                `,\n                () => html`\n                  <button\n                    class=\"status-btn cancel-btn btn--curved btn--clickable\"\n                    @click=${() => {\n                      this.open = !this.open;\n                    }}\n                  >\n                    ${msg('Cancel Demand')}\n                  </button>\n                `\n              )}\n            `\n          )}\n        </div>\n        ${when(\n          this.open,\n          () => html`\n            <div\n              id=\"${this.demand.demand_id}-details-ctr\"\n              class=\"dmd-details-ctr round-bottom\"\n            >\n              ${when(\n                this.demand.status === DEMAND_STATUS['UNDER-REVIEW'],\n                () => html`\n                  <span\n                    >${msg(\n                      html`Do you confirm\n                        <strong>canceling your demand?</strong>`\n                    )}</span\n                  >\n                  <div id=\"cancel-btns-ctr\">\n                    <button\n                      id=\"keep-dmd-btn\"\n                      class=\"cancel-confirm-btn btn--curved btn--clickable\"\n                      @click=${() => {\n                        this.open = !this.open;\n                      }}\n                    >\n                      ${msg('Keep Demand')}\n                    </button>\n                    <button\n                      id=\"cancel-dmd-btn\"\n                      class=\"cancel-confirm-btn btn--curved btn--clickable\"\n                      @click=${this.handleConfirmCancelClick}\n                    >\n                      <strong>${msg('Confirm')}</strong>\n                    </button>\n                  </div>\n                `,\n                () => html`\n                  ${when(\n                    [\n                      DEMAND_STATUS.GRANTED,\n                      DEMAND_STATUS['PARTIALLY-GRANTED'],\n                      DEMAND_STATUS.DENIED,\n                    ].includes(this.demand.status),\n                    () => html`\n                      <strong\n                        >${msg('Your demand has been ')}\n                        ${DEMAND_STATUS_DESCRIPTIONS[\n                          this.demand.status\n                        ]()}.</strong\n                      >\n                    `,\n                    () => html``\n                  )}\n                `\n              )}\n              ${choose(this.demand.requested_action, [\n                [ACTION.ACCESS, () => this.accessResponseTemplate(this.demand)],\n                [\n                  ACTION.TRANSPARENCY,\n                  () => this.transparencyResponseTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.DATA.CATEGORIES'],\n                  () => this.transparencyDcTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.DPO'],\n                  () => this.transparencyDpoTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.KNOWN'],\n                  () => this.transparencyKnownTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.LEGAL.BASES'],\n                  () => this.transparencyLbTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.ORGANIZATION'],\n                  () => this.transparencyOrgTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.POLICY'],\n                  () => this.transparencyPolicyTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.PROCESSING.CATEGORIES'],\n                  () => this.transparencyPcTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.PROVENANCE'],\n                  () => this.transparencyProvTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.PURPOSE'],\n                  () => this.transparencyPurposeTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.RETENTION'],\n                  () => this.transparencyRetTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.WHERE'],\n                  () => this.transparencyWhereTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.WHO'],\n                  () => this.transparencyWhoTemplate(this.demand),\n                ],\n              ])}\n              ${when(\n                this.demand.message,\n                () => html`\n                  <p>Included message:</p>\n                  <i>${this.demand.message}</i>\n                `\n              )}\n            </div>\n          `\n        )}\n      </div>\n    `;\n  }\n}\n","import { msg, str } from '@lit/localize';\nimport { css, html, LitElement, PropertyValueMap } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\nimport { when } from 'lit/directives/when.js';\nimport {\n  ACTION,\n  DEMAND_STATUS,\n  PrivacyResponseItem,\n  ComputationAPI,\n} from '@blindnet/core';\n\nimport './StatusViewItem.js';\nimport { ComponentState } from './utils/states.js';\nimport { PRCIStyles } from './styles.js';\nimport { getRequestLink, removeQueryParam } from './utils/utils.js';\n\nconst linkSvg = new URL('./assets/icons/link.svg', import.meta.url).href;\n\n/**\n * View the status of a Privacy Request\n */\n@customElement('status-view')\nexport class StatusView extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        display: grid;\n        row-gap: 20px;\n        max-width: 900px;\n        text-align: center;\n        margin: auto;\n      }\n\n      .req-progress-ctr {\n        display: grid;\n        row-gap: 10px;\n      }\n\n      .dmds-ctr {\n        display: grid;\n        row-gap: 20px;\n        padding: 30px 40px 40px 40px;\n      }\n\n      .dmds-ctr span {\n        padding: 0px 0px 20px 0px;\n      }\n\n      #completed-dmds-ctr {\n        border: 1px solid #18a0fb;\n        background: rgba(24, 160, 251, 0.11);\n      }\n\n      #nav-btns-ctr {\n        display: flex;\n        /* grid-template-columns: repeat(2, 1fr); */\n        column-gap: 20px;\n        justify-content: center;\n        justify-items: center;\n      }\n\n      .status-nav-btn {\n        font-size: 18px;\n      }\n\n      p {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      button {\n        display: inline-flex;\n        align-items: center;\n      }\n    `,\n  ];\n\n  @property({ type: String, attribute: 'request-id' }) requestId: string = '';\n\n  @property({ type: Boolean }) newRequest: boolean = false;\n\n  @state() _requestDate: Date = new Date();\n\n  @state() _completedDemands: PrivacyResponseItem[] = [];\n\n  @state() _processingDemands: PrivacyResponseItem[] = [];\n\n  @state() _cancelledDemands: PrivacyResponseItem[] = [];\n\n  // eslint-disable-next-line no-undef\n  @state() _intervalId: any = undefined;\n\n  reloadRequest() {\n    // Get the status of the current request once there is an API token set\n    if (ComputationAPI.getInstance().hasApiToken()) {\n      ComputationAPI.getInstance()\n        .getRequest(this.requestId)\n        .then(response => {\n          if (response.length > 0) {\n            this._requestDate = new Date(response[0].date);\n            this._completedDemands = response.filter(d =>\n              [\n                DEMAND_STATUS.GRANTED,\n                DEMAND_STATUS['PARTIALLY-GRANTED'],\n                DEMAND_STATUS.DENIED,\n              ].includes(d.status)\n            );\n            this._processingDemands = response.filter(\n              d => d.status === DEMAND_STATUS['UNDER-REVIEW']\n            );\n            this._cancelledDemands = response.filter(\n              d => d.status === DEMAND_STATUS.CANCELED\n            );\n          }\n\n          // If no more demands are processing, the reload interval exists, and the data for\n          // all ACCESS responses has arrived, stop reloading the request.\n          if (\n            this._processingDemands.length === 0 &&\n            this._intervalId &&\n            !this._completedDemands.some(\n              d => d.requested_action === ACTION.ACCESS && !d.data\n            )\n          ) {\n            clearInterval(this._intervalId);\n            this._intervalId = undefined;\n          } else if (\n            !this._intervalId &&\n            this._processingDemands.length !== 0\n          ) {\n            // FIXME: reload should happen after a user interaction, not automatically\n            // Setup an interval to get the status of processing demands every 3 seconds\n            this._intervalId = setInterval(() => this.reloadRequest(), 3000);\n          }\n        });\n    } else {\n      this._intervalId = setInterval(() => this.reloadRequest(), 3000);\n    }\n  }\n\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    if (_changedProperties.has('requestId') && this.requestId !== '') {\n      this.reloadRequest();\n    }\n  }\n\n  handleCopyIdClick() {\n    navigator.clipboard.writeText(this.requestId);\n  }\n\n  handleCopyLinkClick() {\n    navigator.clipboard.writeText(getRequestLink(this.requestId).toString());\n  }\n\n  handleBackClick() {\n    removeQueryParam('requestId');\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.REQUESTS,\n        },\n      })\n    );\n  }\n\n  handleNewRequestClick() {\n    removeQueryParam('requestId');\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.MENU,\n        },\n      })\n    );\n  }\n\n  /**\n   * Stop fetching this request when leaving status view\n   */\n  disconnectedCallback(): void {\n    if (this._intervalId) {\n      clearInterval(this._intervalId);\n    }\n  }\n\n  render() {\n    return html`\n      ${when(\n        this._processingDemands.length > 0,\n        () => html`\n          <p>\n            ${msg(\n              str`Your Privacy Request, sent on\n              ${this._requestDate.toLocaleDateString('en-gb')}, is currently\n              being processed.`\n            )}\n          </p>\n          ${when(\n            this._completedDemands.length > 0,\n            () => html`\n              <div class=\"req-progress-ctr\">\n                <p>${msg('At the moment:')}</p>\n                <p>\n                  <b\n                    >${msg(\n                      html`${this._completedDemands.length} demand(s) have been\n                      completed${when(\n                        this._cancelledDemands.length > 0,\n                        () =>\n                          html` and ${this._cancelledDemands.length} demand(s)\n                          have been cancelled`\n                      )}`\n                    )}</b\n                  >\n                </p>\n                <p>\n                  ${msg(\n                    html`${this._processingDemands.length} demand(s) are being\n                    processed`\n                  )}\n                </p>\n              </div>\n            `\n          )}\n        `,\n        () => html`\n          <p>\n            ${msg(\n              html`Your Privacy Request, sent on\n              ${this._requestDate.toLocaleDateString('en-gb')}, has been\n              processed.`\n            )}\n          </p>\n        `\n      )}\n      <div>\n        <button class='svg-btn' @click=${this.handleCopyLinkClick}>\n          <img src=${linkSvg} alt='Copy status page link'></img>&nbsp;\n          <span class='text--underline'>${msg('Copy link to this page')}</span>\n        </button>\n      </div>\n      ${when(\n        this._completedDemands.length > 0,\n        () => html`\n          <div\n            id=\"completed-dmds-ctr\"\n            class=\"dmds-ctr border--medium border--rounded\"\n          >\n            <span><b>${msg('Completed Demand(s)')}</b></span>\n            ${map(\n              this._completedDemands,\n              d => html`<status-view-item .demand=${d}></status-view-item>`\n            )}\n          </div>\n        `\n      )}\n      ${when(\n        this._processingDemands.length > 0,\n        () => html`\n          <div\n            id=\"processing-dmds-ctr\"\n            class=\"dmds-ctr border--medium border--rounded\"\n          >\n            <span><b>${msg('Processing Demand(s)')}</b></span>\n            ${map(\n              this._processingDemands,\n              d => html`<status-view-item .demand=${d}></status-view-item>`\n            )}\n          </div>\n        `\n      )}\n      ${when(\n        this._cancelledDemands.length > 0,\n        () => html`\n          <div\n            id=\"cancelled-dmds-ctr\"\n            class=\"dmds-ctr border--medium border--rounded\"\n          >\n            <span><b>${msg('Cancelled Demand(s)')}</b></span>\n            ${map(\n              this._cancelledDemands,\n              d => html`<status-view-item .demand=${d}></status-view-item>`\n            )}\n          </div>\n        `\n      )}\n      <div id=\"nav-btns-ctr\">\n        <button\n          class=\"status-nav-btn link-btn dark-font text--underline\"\n          @click=${this.handleBackClick}\n        >\n          ${msg('Back to my Requests')}\n        </button>\n        <button\n          class=\"status-nav-btn link-btn dark-font text--underline\"\n          @click=${this.handleNewRequestClick}\n        >\n          ${msg('Submit a new Privacy Request')}\n        </button>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { Demand, ACTION } from '@blindnet/core';\nimport { PRCIStyles } from '../styles.js';\nimport { ComponentState, DemandState } from '../utils/states.js';\n\n/**\n * Abstract class for a form that allows the user to create or edit multiple demands.\n */\nexport abstract class MultiDemandForm extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        margin: 0px;\n      }\n\n      .btns-ctr {\n        display: grid;\n        grid-template-columns: 1fr auto 1fr;\n        padding: 0px 0px 0px 0px;\n        margin: 0px 0px 0px 0px;\n        transform: translateY(35px);\n      }\n\n      #back-btn {\n        grid-column: 1/2;\n        min-width: 60%;\n        max-width: 300px;\n      }\n\n      #add-btn {\n        grid-column: 3/4;\n        min-width: 60%;\n        max-width: 300px;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        padding: 0;\n        margin: 0;\n      }\n\n      h2 {\n        font-size: 20px;\n      }\n\n      h3 {\n        font-size: 16px;\n        font-weight: normal;\n      }\n    ` as CSSResultGroup,\n  ];\n\n  @property({ type: Number, attribute: 'demand-state' })\n  demandState: DemandState = DemandState.EDIT_OPEN;\n\n  // eslint-disable-next-line no-restricted-globals\n  @property({ type: String }) demandGroupId = self.crypto.randomUUID();\n\n  @property({ attribute: false }) demands: Demand[] = [];\n\n  setDemand(demand: Demand) {\n    this.demands.push(demand);\n  }\n\n  deleteDemand(action: ACTION) {\n    this.demands.splice(\n      this.demands.findIndex(d => d.action === action),\n      1\n    );\n  }\n\n  addToPrivacyRequest(demandGroupId: string, demands: Demand[]) {\n    this.dispatchEvent(\n      new CustomEvent('demand-set-multiple', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          demandGroupId,\n          demands,\n        },\n      })\n    );\n  }\n\n  /**\n   * Go back to the action menu\n   */\n  handleBackClick() {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.MENU,\n        },\n      })\n    );\n  }\n\n  /**\n   * On add click validate and add data then move to review\n   */\n  handleAddClick() {\n    if (this.validate()) {\n      // Create list of demands from data entered in the form\n      this.demands = this.buildDemands();\n      // Send the demands to the top level component to be added to priacy request\n      this.addToPrivacyRequest(this.demandGroupId, this.demands);\n      // Move to review state\n      this.dispatchEvent(\n        new CustomEvent('component-state-change', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            newState: ComponentState.REVIEW,\n          },\n        })\n      );\n    }\n  }\n\n  /**\n   * Validate data entered before adding to Privacy Request\n   */\n  abstract validate(): boolean;\n\n  /**\n   * Create a list of demands from the data entered in the form\n   */\n  abstract buildDemands(): Demand[];\n\n  /**\n   * Get the edit template for this action\n   * @param useDefault Indicates if form should be populated with default values or from input demands\n   * @returns HTML template\n   */\n  abstract getFormTemplate(): TemplateResult;\n\n  render(): TemplateResult<1 | 2> {\n    return html`\n      ${choose(this.demandState, [\n        [DemandState.EDIT_OPEN, () => this.getFormTemplate()],\n      ])}\n      <!-- Buttons -->\n      <div class=\"btns-ctr\">\n        <button\n          id=\"back-btn\"\n          class=\"nav-btn btn--centered btn--clickable\"\n          @click=${this.handleBackClick}\n        >\n          ${msg('Back')}\n        </button>\n        <button\n          id=\"add-btn\"\n          class=\"nav-btn btn--centered btn--clickable\"\n          @click=${this.handleAddClick}\n        >\n          ${msg('Next')}\n        </button>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, LitElement, PropertyValueMap, TemplateResult } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { when } from 'lit/directives/when.js';\nimport { PRCIStyles } from './styles.js';\nimport { FormComponentState } from './utils/states.js';\n\nconst allCheckboxCheckedSvg = new URL(\n  './assets/icons/all-checkbox-checked.svg',\n  import.meta.url\n).href;\n\nconst allCheckboxDashSvg = new URL(\n  './assets/icons/all-checkbox-dash.svg',\n  import.meta.url\n).href;\n\nconst allCheckboxUncheckedSvg = new URL(\n  './assets/icons/all-checkbox-unchecked.svg',\n  import.meta.url\n).href;\n\nconst closeContainerArrowSvg = new URL(\n  './assets/icons/close-container-arrow.svg',\n  import.meta.url\n).href;\n\nconst openContainerArrowSvg = new URL(\n  './assets/icons/open-container-arrow.svg',\n  import.meta.url\n).href;\n\ninterface Choice {\n  id: string;\n  description: string | TemplateResult<1 | 2>;\n  checked: boolean | false;\n  disabled: boolean;\n}\n\n/**\n * States describing the choice list\n */\nenum SelectionState {\n  ALL,\n  SOME,\n  NONE,\n}\n\n@customElement('all-checklist')\nexport class AllChecklist extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        display: grid;\n      }\n\n      :host([selection-state='0']) .choice-checkbox {\n        opacity: 0.5;\n      }\n\n      :host([selection-state='0']) #all-checkbox:checked + label {\n        opacity: 1;\n      }\n\n      :host([selection-state='1']) #all-checkbox + label {\n        opacity: 1;\n      }\n\n      :host([selection-state='2']) .choice-checkbox {\n        opacity: 1;\n      }\n\n      .choices-list {\n        display: grid;\n        overflow: hidden;\n        grid-template-columns: 1fr;\n        row-gap: 35px;\n        padding: 35px 0px 25px 0px;\n      }\n\n      .choice-ctr {\n        padding: 0px 30px;\n      }\n\n      .all-ctr {\n        display: flex;\n        align-items: center;\n        padding: 0px 30px;\n      }\n\n      .all-prefix {\n        padding: 0px 0px 0px 4px;\n      }\n\n      #all-checkbox {\n        display: none;\n      }\n\n      #all-checkbox + label {\n        height: 13px;\n        width: 13px;\n        display: inline-block;\n        margin: 3px 3px 3px 4px;\n      }\n\n      #other-data-input-ctr {\n        display: flex;\n        column-gap: 5px;\n        padding: 20px 55px;\n        align-items: center;\n      }\n\n      #other-data-input input {\n        height: 30px;\n        width: 100%;\n        background: #f8f8fc;\n        border: 1px solid #e5e5e5;\n        border-radius: 4px;\n      }\n\n      #other-data-input span {\n        flex-shrink: 0;\n      }\n    `,\n  ];\n\n  // List of choices to be displayed with a unique identifier, description string (displayed),\n  // and checked boolean indicating if the option should be checked initially\n  @property({ type: Array }) choices: Choice[] = [];\n\n  // State indicating if all, some, or none of choices are selected\n  @property({ type: Number, reflect: true, attribute: 'selection-state' })\n  selectionState: SelectionState = SelectionState.ALL;\n\n  // UI mode for this component\n  @property({ type: Number, reflect: true, attribute: 'component-mode' })\n  componentMode: FormComponentState = FormComponentState.CLOSED;\n\n  // Should all option be included\n  @property({ type: Boolean }) includeAll: boolean = true;\n\n  // Should all option be checked initially\n  @property({ type: Boolean, reflect: true }) allChecked: boolean = true;\n\n  // String to show with the all option\n  @property({ type: String, attribute: 'all-message' }) allMessage: string =\n    msg('Select all');\n\n  // Prefix for events generated by selecting/deselecting options from the list\n  @property({ type: String, attribute: 'event-prefix' }) eventPrefix: string =\n    'checklist-click';\n\n  // Should include a close button at bottom of container\n  @property({ type: Boolean, attribute: 'include-buttons' }) includeButtons =\n    false;\n\n  @property({ type: Boolean, attribute: 'include-other' }) includeOther = false;\n\n  // Holds the IDs of all selected choices\n  @state() selectedChoices = new Set<string>();\n\n  /**\n   * Select a choice and notify parent component\n   * @param id ID of the choice to select\n   */\n  selectChoice(id: string) {\n    this.selectedChoices.add(id);\n    // Fire add event\n    const event = new CustomEvent(`${this.eventPrefix}-select`, {\n      bubbles: true,\n      composed: true,\n      detail: {\n        id,\n        'first-selection': this.selectedChoices.size === 1,\n      },\n    });\n    this.dispatchEvent(event);\n    this.updateSelectionState();\n  }\n\n  /**\n   * Deselect a choice and notify parent component\n   * @param id ID of the choice to delete\n   */\n  deleteChoice(id: string) {\n    this.selectedChoices.delete(id);\n    // Fire delete event\n    const event = new CustomEvent(`${this.eventPrefix}-deselect`, {\n      bubbles: true,\n      composed: true,\n      detail: {\n        id,\n        'none-selected': this.selectedChoices.size === 0,\n      },\n    });\n    this.dispatchEvent(event);\n    this.updateSelectionState();\n  }\n\n  handleChoiceClick(e: Event) {\n    const { id, checked } = e.target as HTMLInputElement;\n    if (id === 'all-checkbox') {\n      // Get all choice checkboxes\n      const allCheckboxes =\n        this.shadowRoot?.querySelectorAll('.choice-checkbox');\n\n      if (checked) {\n        // Select all deselected choices\n        this.allChecked = true;\n        allCheckboxes?.forEach(element => {\n          const input = element as HTMLInputElement;\n          if (!input.checked) {\n            input.checked = true;\n            this.selectChoice(input.id);\n          }\n        });\n      } else {\n        // Deselect all selected choices\n        this.allChecked = false;\n        allCheckboxes?.forEach(element => {\n          const input = element as HTMLInputElement;\n          if (input.checked) {\n            input.checked = false;\n            this.deleteChoice(input.id);\n          }\n        });\n      }\n    } else if (checked) {\n      // Select a single choice\n      this.selectChoice(id);\n      // Set all to checked\n      const allCheckbox = this.shadowRoot?.getElementById(\n        'all-checkbox'\n      ) as HTMLInputElement;\n      allCheckbox.checked = true;\n    } else {\n      // Deselect a single choice\n      this.deleteChoice(id);\n      // Set all to unchecked if none selected\n      if (this.selectedChoices.size === 0) {\n        const allCheckbox = this.shadowRoot?.getElementById(\n          'all-checkbox'\n        ) as HTMLInputElement;\n        allCheckbox.checked = false;\n      }\n    }\n  }\n\n  handleOtherClick(e: Event) {\n    this.dispatchEvent(\n      new CustomEvent(`${this.eventPrefix}-other-click`, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          checked: (e.target as HTMLInputElement).checked,\n        },\n      })\n    );\n  }\n\n  handleOtherInput(e: Event) {\n    this.dispatchEvent(\n      new CustomEvent(`${this.eventPrefix}-other-input`, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          text: (e.target as HTMLInputElement).value,\n        },\n      })\n    );\n  }\n\n  /**\n   * Update the selection state based on currently selected choices\n   */\n  updateSelectionState() {\n    switch (this.selectedChoices.size) {\n      case 0:\n        this.selectionState = SelectionState.NONE;\n        break;\n      case this.choices.length:\n        this.selectionState = SelectionState.ALL;\n        break;\n      default:\n        this.selectionState = SelectionState.SOME;\n        break;\n    }\n  }\n\n  /**\n   * Determine which choices to display based on the checklist's mode\n   * @returns\n   */\n  getDisplayChoices(): Array<Choice> {\n    switch (this.componentMode) {\n      case FormComponentState.CLOSED:\n        return [];\n\n      case FormComponentState.OPEN:\n        return Array.from(this.choices);\n\n      case FormComponentState.PARTIAL:\n        return Array.from(this.choices).filter(c =>\n          this.selectedChoices.has(c.id)\n        );\n\n      default:\n        return [];\n    }\n  }\n\n  /**\n   * Determine which to switch to when open or close button is clicked\n   */\n  handleButtonClick() {\n    if (\n      this.componentMode === FormComponentState.CLOSED ||\n      this.componentMode === FormComponentState.PARTIAL\n    ) {\n      this.componentMode = FormComponentState.OPEN;\n    } else {\n      this.componentMode = FormComponentState.CLOSED;\n    }\n  }\n\n  /**\n   * Hook into willUpdate to ensure the selected choices set matches choices\n   * @param _changedProperties Map of changed properties for this update\n   */\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    if (_changedProperties.has('choices')) {\n      this.choices.forEach(c => {\n        if (c.checked) {\n          this.selectedChoices.add(c.id);\n        }\n      });\n      this.updateSelectionState();\n    }\n  }\n\n  render() {\n    return html`\n      <div class=\"choices-list\">\n        <!-- Optionally render all button -->\n        ${when(\n          this.includeAll &&\n            !(\n              this.componentMode === FormComponentState.PARTIAL &&\n              this.selectionState === SelectionState.SOME\n            ),\n          () => html`\n            <div class=\"all-ctr\">\n              <input\n                id=\"all-checkbox\"\n                type=\"checkbox\"\n                @click=${this.handleChoiceClick}\n                ?checked=${this.allChecked}\n              />\n              <label for=\"all-checkbox\">\n                ${choose(this.selectionState, [\n                  [\n                    SelectionState.NONE,\n                    () =>\n                      html`<img\n                        src=${allCheckboxUncheckedSvg}\n                        alt=\"empty checkbox\"\n                      />`,\n                  ],\n                  [\n                    SelectionState.SOME,\n                    () =>\n                      html`<img\n                        src=${allCheckboxDashSvg}\n                        alt=\"dash checkbox\"\n                      />`,\n                  ],\n                  [\n                    SelectionState.ALL,\n                    () =>\n                      html`<img\n                        src=${allCheckboxCheckedSvg}\n                        alt=\"checked checkbox\"\n                      />`,\n                  ],\n                ])}\n              </label>\n              <span class=\"all-prefix\">${this.allMessage}</span>\n            </div>\n          `\n        )}\n        <!-- Render each choice -->\n        ${this.getDisplayChoices().map(\n          c => html`\n            <div class=\"choice-ctr\">\n              <input\n                id=${c.id}\n                class=\"choice-checkbox\"\n                type=\"checkbox\"\n                ?checked=${c.checked}\n                ?disabled=${c.disabled}\n                @change=${this.handleChoiceClick}\n              />\n              <label>${c.description}</label>\n            </div>\n          `\n        )}\n        <!-- Optionally include an other option -->\n        ${when(\n          this.includeOther && this.componentMode === FormComponentState.OPEN,\n          () => html`\n          <div id=\"other-data-ctr\">\n            <div class=\"choice-ctr\">\n              <input\n                id='other-checkbox'\n                type=\"checkbox\"\n                @change=${this.handleOtherClick}\n              />\n              <label>${msg(\n                html`<b>OTHER-DATA:</b> Specify another type of data`\n              )}</label>\n            </div>\n            <div id=\"other-data-input-ctr\">\n              <span>${msg('Other data type:')}</span>\n              <input id=\"other-data-input\" type=\"text\"></input>\n            </div>\n          </div>\n        `\n        )}\n      </div>\n      <!-- Optionally include a close button -->\n      ${when(\n        this.includeButtons,\n        () => html`\n          <button class=\"svg-btn\" @click=${this.handleButtonClick}>\n            ${when(\n              this.componentMode === FormComponentState.OPEN,\n              () =>\n                html`<img src=${closeContainerArrowSvg} alt=\"close arrow\" />`,\n              () => html`<img src=${openContainerArrowSvg} alt=\"open arrow\" />`\n            )}\n          </button>\n        `\n      )}\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, TemplateResult } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { Demand, ACTION, PROVENANCE, Restrictions } from '@blindnet/core';\nimport { enabledActions } from '../utils/conf.js';\nimport {\n  ACTION_DESCRIPTIONS,\n  PROVENANCE_DESCRIPTIONS,\n} from '../utils/dictionary.js';\nimport { MultiDemandForm } from './MultiDemandForm.js';\nimport { FormComponentState } from '../utils/states.js';\n\nimport '../AllChecklist.js';\nimport { PRCIStyles } from '../styles.js';\n\n/**\n * MultiDemandForm for the Transparency PRIV action. Includes a dropdown and text element.\n *\n * The transparency form follows a different pattern than the other actions, as each\n * TRANSPARENCY.* actually represents a completely separate demand, but we display them\n * all in one form.\n */\n@customElement('transparency-form')\nexport class TransparencyForm extends MultiDemandForm {\n  static styles = [\n    MultiDemandForm.styles,\n    PRCIStyles,\n    css`\n      :host {\n        display: grid;\n        row-gap: 35px;\n        align-content: flex-start;\n        margin: 0px;\n      }\n\n      .transparency-options {\n        padding: 40px 40px 20px 40px;\n      }\n\n      #dmd-ctr {\n        display: grid;\n        row-gap: 20px;\n      }\n\n      #dmd-ctr ul {\n        margin: 0;\n      }\n\n      #dmd-ctr li:not(:last-child) {\n        margin-bottom: 15px;\n      }\n\n      #edit-heading-1 {\n        font-weight: bold;\n        grid-column: 1/2;\n        padding: 0px;\n      }\n\n      p {\n        margin: 0px;\n      }\n\n      .additional-msg-ctr {\n        display: grid;\n        row-gap: 20px;\n        margin: 0px 0px 25px 0px;\n      }\n    `,\n  ];\n\n  @property({ type: Array, attribute: false })\n  transparencyActions: ACTION[] = Object.values(ACTION).filter(a =>\n    a.includes('TRANSPARENCY.')\n  );\n\n  @property({ type: Array }) advancedSettings = [];\n\n  @property({ attribute: false }) restrictions: Restrictions = {};\n\n  @state() _additionalMessage = '';\n\n  constructor() {\n    super();\n\n    // Transparency action listeners\n    this.addEventListener('transparency-action-select', e => {\n      const details = (e as CustomEvent).detail;\n      const demand: Demand = {\n        action: details.id,\n        message: this._additionalMessage,\n        restrictions: this.restrictions,\n      };\n      this.setDemand(demand);\n    });\n    this.addEventListener('transparency-action-deselect', e => {\n      const { id } = (e as CustomEvent).detail;\n      this.deleteDemand(id);\n    });\n  }\n\n  handleProvenanceTermClick(e: Event) {\n    const { id } = (e as CustomEvent).target as HTMLInputElement;\n    this.restrictions.provenance = { term: id as PROVENANCE };\n    this.demands.forEach(d => {\n      const demand = d;\n      demand.restrictions!.provenance!.term = id as PROVENANCE;\n    });\n  }\n\n  handleAdditionalMessageInput(e: Event) {\n    this._additionalMessage = (e.target as HTMLTextAreaElement).value;\n    this.demands.forEach(d => {\n      const demand = d;\n      demand.message = this._additionalMessage;\n    });\n  }\n\n  // TODO: Make the transparency form follow our new template\n  buildDemands(): Demand[] {\n    return this.demands;\n  }\n\n  validate(): boolean {\n    return true;\n  }\n\n  getFormTemplate(): TemplateResult<1 | 2> {\n    const selectedActions = Object.values(this.demands).map(d => d.action);\n    return html`\n      <p id=\"edit-heading-1\">\n        <b>${msg('Details of my TRANSPARENCY Demand')}</b>\n      </p>\n\n      <div class=\"border--light border--rounded transparency-options\">\n        <span slot=\"prompt\"><b>${msg('I want to know:')}</b></span>\n        <all-checklist\n          .choices=${this.transparencyActions.map(a => ({\n            id: a,\n            description: ACTION_DESCRIPTIONS[a](),\n            checked: selectedActions.includes(a),\n            disabled: !enabledActions.get(a) ?? true,\n          }))}\n          all-message=${msg(\n            'ALL information related to data processing practices and know if the organization has data on me'\n          )}\n          component-mode=${FormComponentState.CLOSED}\n          event-prefix=\"transparency-action\"\n          include-buttons\n        ></all-checklist>\n      </div>\n\n      <slotted-dropdown header=${msg('Advanced settings')} include-buttons>\n        <div>\n          <span>\n            ${msg('My demand applies to data from the following provenance:')}\n          </span>\n          <fieldset class=\"provenance-restriction\">\n            ${Object.values(PROVENANCE).map(\n              p => html`\n                <input\n                  id=${p}\n                  name='provenance-term'\n                  type='radio'\n                  ?checked=${\n                    this.demands[0].restrictions?.provenance?.term === p\n                  }\n                  @click=${this.handleProvenanceTermClick}>\n                </input>\n                <label for=${p}>${PROVENANCE_DESCRIPTIONS[p]()}</label><br/>\n              `\n            )}\n          </fieldset>\n        </div>\n      </slotted-dropdown>\n      <slotted-dropdown\n        header=${msg('Additional message (optional)')}\n        include-buttons\n      >\n        <div class=\"additional-msg-ctr\">\n          <span class=\"\">${msg('My additional message:')}</span>\n          <span\n            ><i\n              >${msg(\n                'Please note that adding a personalized message might lead to the demand taking longer to be processed'\n              )}</i\n            ></span\n          >\n          <textarea\n            id=\"additional-msg\"\n            class=\"std-txt-area\"\n            name=\"paragraph_text\"\n            cols=\"50\"\n            rows=\"10\"\n            @input=${this.handleAdditionalMessageInput}\n            .value=${this.demands.length !== 0\n              ? this.demands[0].message ?? ''\n              : ''}\n          ></textarea>\n        </div>\n      </slotted-dropdown>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValueMap,\n  TemplateResult,\n} from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { Demand, ACTION } from '@blindnet/core';\nimport { PRCIStyles } from '../styles.js';\nimport { ComponentState, DemandState } from '../utils/states.js';\n\n/**\n * Abstract class for a form that allows the user to create or edit a demand.\n */\nexport abstract class DemandForm extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        margin: 0px;\n      }\n\n      .btns-ctr {\n        display: grid;\n        grid-template-columns: 1fr auto 1fr;\n        padding: 0px 0px 0px 0px;\n        margin: 0px 0px 0px 0px;\n        transform: translateY(35px);\n      }\n\n      #back-btn {\n        grid-column: 1/2;\n        min-width: 60%;\n        max-width: 300px;\n      }\n\n      #add-btn {\n        grid-column: 3/4;\n        min-width: 60%;\n        max-width: 300px;\n      }\n    ` as CSSResultGroup,\n  ];\n\n  @property({ type: Number, attribute: 'demand-state' })\n  demandState: DemandState = DemandState.EDIT_OPEN;\n\n  @property({ attribute: false }) demand: Demand = { action: ACTION.ACCESS };\n\n  // eslint-disable-next-line no-restricted-globals\n  @property({ type: String }) demandGroupId = self.crypto.randomUUID();\n\n  @property({ type: Boolean }) default = false;\n\n  /**\n   * Send this demand up to the top level component to add to the Privacy Request\n   * @param demandGroupId uuid of this demand group\n   * @param demand demand to add\n   */\n  addToPrivacyRequest(demandGroupId: string, demand: Demand) {\n    this.dispatchEvent(\n      new CustomEvent('demand-set', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          demandGroupId,\n          demand,\n        },\n      })\n    );\n  }\n\n  /**\n   * Go back to the action menu\n   */\n  handleBackClick() {\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          newState: ComponentState.MENU,\n        },\n      })\n    );\n  }\n\n  /**\n   * Validate and add demand to request when add clicked\n   */\n  handleAddClick() {\n    if (this.validate()) {\n      this.addToPrivacyRequest(this.demandGroupId, this.demand);\n      this.dispatchEvent(\n        new CustomEvent('component-state-change', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            newState: ComponentState.REVIEW,\n          },\n        })\n      );\n    }\n  }\n\n  /**\n   * Validate data entered before adding to Privacy Request\n   */\n  abstract validate(): boolean;\n\n  /**\n   * Get the edit template for this action\n   * @param useDefault Indicates if form should be populated with default values or from input demands\n   * @returns HTML template\n   */\n  abstract getFormTemplate(demand: Demand): TemplateResult;\n\n  abstract getDefaultDemand(): Demand;\n\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    if (_changedProperties.has('default') && this.default) {\n      this.demand = this.getDefaultDemand();\n    }\n  }\n\n  render(): TemplateResult<1 | 2> {\n    return html`\n      <div>\n        ${choose(this.demandState, [\n          [DemandState.EDIT_OPEN, () => this.getFormTemplate(this.demand)],\n        ])}\n      </div>\n      <!-- Buttons -->\n      <div class=\"btns-ctr\">\n        <button\n          id=\"back-btn\"\n          class=\"nav-btn btn--centered btn--clickable\"\n          @click=${this.handleBackClick}\n        >\n          ${msg('Back')}\n        </button>\n        <button\n          id=\"add-btn\"\n          class=\"nav-btn btn--centered btn--clickable\"\n          @click=${this.handleAddClick}\n        >\n          ${msg('Next')}\n        </button>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport {\n  ACTION,\n  DATA_CATEGORY,\n  PROCESSING_CATEGORY,\n  PROVENANCE,\n  PURPOSE,\n  TARGET,\n  Demand,\n} from '@blindnet/core';\nimport {\n  DATA_CATEGORY_DESCRIPTIONS,\n  PROVENANCE_DESCRIPTIONS,\n  TARGET_DESCRIPTIONS,\n} from '../utils/dictionary.js';\nimport { DemandForm } from './DemandForm.js';\nimport { FormComponentState } from '../utils/states.js';\nimport '../AllChecklist.js';\nimport { PRCIStyles } from '../styles.js';\n\n/**\n * ActionForm for the Access PRIV action. Includes a dropdown and text element.\n */\n@customElement('access-form')\nexport class AccessForm extends DemandForm {\n  static styles = [\n    DemandForm.styles,\n    PRCIStyles,\n    css`\n      #access-form {\n        display: grid;\n        row-gap: 35px;\n        align-content: flex-start;\n        margin: 0px;\n      }\n\n      .access-options {\n        padding: 40px 40px 20px 40px;\n      }\n\n      #dmd-ctr {\n        display: grid;\n        row-gap: 20px;\n      }\n\n      #dmd-ctr ul {\n        margin: 0;\n      }\n\n      #dmd-ctr li:not(:last-child) {\n        margin-bottom: 15px;\n      }\n\n      #edit-heading-1 {\n        font-weight: bold;\n        grid-column: 1/2;\n        padding: 0px;\n      }\n\n      p {\n        margin: 0px;\n      }\n\n      .additional-msg-ctr {\n        display: grid;\n        row-gap: 20px;\n        margin: 0px 0px 25px 0px;\n      }\n    `,\n  ];\n\n  @property({ type: Array, attribute: false })\n  allowedDataCategories: DATA_CATEGORY[] = [];\n\n  constructor() {\n    super();\n\n    // Access data category listeners\n    this.addEventListener('access-option-select', e => {\n      const { id } = (e as CustomEvent).detail;\n      this.demand.restrictions!.privacy_scope!.push({\n        dc: id as DATA_CATEGORY,\n        pc: PROCESSING_CATEGORY.ALL,\n        pp: PURPOSE.ALL,\n      });\n    });\n    this.addEventListener('access-option-deselect', e => {\n      const { id } = (e as CustomEvent).detail;\n      this.demand.restrictions!.privacy_scope!.splice(\n        this.demand.restrictions!.privacy_scope!.findIndex(\n          psr => psr.dc === (id as DATA_CATEGORY)\n        ),\n        1\n      );\n    });\n\n    // FIXME: Disabled until we resolve how to handle OTHER-DATA\n    // this.addEventListener('access-option-other-click', e => {\n    //   const { checked } = (e as CustomEvent).detail;\n    //   if (checked) {\n    //     this.demand.dataCategory?.add(DATA_CATEGORY['OTHER-DATA']);\n    //   } else {\n    //     this.demand.dataCategory?.delete(DATA_CATEGORY['OTHER-DATA']);\n    //   }\n    // });\n    // this.addEventListener('access-option-other-input', e => {\n    //   const { text } = (e as CustomEvent).detail\n    //   // TODO: What demand field to put the other-data category\n    // })\n  }\n\n  handleAdditionalMessageInput(e: Event) {\n    const { value } = e.target as HTMLTextAreaElement;\n    this.demand.message = value;\n  }\n\n  handleProvenanceTermClick(e: Event) {\n    const { id } = (e as CustomEvent).target as HTMLInputElement;\n    this.demand.restrictions!.provenance!.term = id as PROVENANCE;\n  }\n\n  handleProvenanceTargetClick(e: Event) {\n    const { id } = (e as CustomEvent).target as HTMLInputElement;\n    this.demand.restrictions!.provenance!.target = id as TARGET;\n  }\n\n  handleDateRestrictionInput(e: Event) {\n    const { id, value } = e.target as HTMLInputElement;\n    if (id === 'date-start') {\n      if (value) {\n        this.demand.restrictions!.date_range!.from = new Date(value);\n      } else {\n        // Value is false when user hits 'clear' button on date picker\n        delete this.demand.restrictions?.date_range?.from;\n      }\n    } else if (id === 'date-end') {\n      if (value) {\n        this.demand.restrictions!.date_range!.to = new Date(value);\n      } else {\n        delete this.demand.restrictions?.date_range?.to;\n      }\n    }\n  }\n\n  validate(): boolean {\n    return true;\n  }\n\n  getDefaultDemand(): Demand {\n    return {\n      action: ACTION.ACCESS,\n      restrictions: {\n        privacy_scope: this.allowedDataCategories.map(dc => ({\n          dc,\n          pc: PROCESSING_CATEGORY.ALL,\n          pp: PURPOSE.ALL,\n        })),\n        provenance: {\n          term: PROVENANCE.ALL,\n          target: TARGET.SYSTEM,\n        },\n        date_range: {},\n      },\n    };\n  }\n\n  getFormTemplate(demand: Demand): TemplateResult<1 | 2> {\n    return html`\n      <div id=\"access-form\">\n        <p id=\"edit-heading-1\">\n          <b>${msg('Details of my ACCESS Demand')}</b>\n        </p>\n\n        <div class=\"border--light border--rounded access-options\">\n          <span slot=\"prompt\">${msg('I want to access:')}</span>\n          <all-checklist\n            .choices=${this.allowedDataCategories.map(dc => ({\n              id: dc,\n              description: DATA_CATEGORY_DESCRIPTIONS[dc](),\n              checked:\n                demand.restrictions?.privacy_scope?.findIndex(\n                  psr => psr.dc === dc\n                ) !== -1,\n              disabled: false,\n            }))}\n            all-message=${msg(\n              'ALL categories of data the organization has data on me'\n            )}\n            component-mode=${FormComponentState.CLOSED}\n            event-prefix=\"access-option\"\n            include-buttons\n          ></all-checklist>\n        </div>\n\n        <slotted-dropdown header=${msg('Advanced settings')} include-buttons>\n          <div class=\"date-restriction\">\n            <p>\n              ${msg(\n                'Specify a date range for the selected category(ies) of data:'\n              )}\n            </p>\n            <div>\n              <span>${msg('From')}</span>\n              <input\n                id=\"date-start\"\n                type=\"date\"\n                .value=${demand.restrictions?.date_range?.from\n                  ? demand.restrictions?.date_range?.from\n                      .toISOString()\n                      .split('T')[0]\n                  : ''}\n                @input=${this.handleDateRestrictionInput}\n              />\n              <span>${msg('to')}</span>\n              <input\n                id=\"date-end\"\n                type=\"date\"\n                .value=${demand.restrictions?.date_range?.to\n                  ? demand.restrictions?.date_range?.to\n                      .toISOString()\n                      .split('T')[0]\n                  : ''}\n                @input=${this.handleDateRestrictionInput}\n              />\n            </div>\n          </div>\n          <div>\n            <span>\n              ${msg('My demand applies to data from the following provenance:')}\n            </span>\n            <fieldset class=\"provenance-restriction\">\n              ${Object.values(PROVENANCE).map(\n                p => html`\n                  <input\n                    id=${p}\n                    name='provenance-term'\n                    type='radio'\n                    ?checked=${demand.restrictions?.provenance?.term === p}\n                    @click=${this.handleProvenanceTermClick}>\n                  </input>\n                  <label for=${p}>${PROVENANCE_DESCRIPTIONS[p]()}</label><br/>\n                `\n              )}\n            </fieldset>\n          </div>\n          <div>\n            <span> ${msg('I address my demand to:')} </span>\n            <fieldset class=\"provenance-restriction\">\n              ${Object.values(TARGET)\n                .filter(t => t !== TARGET.ALL)\n                .map(\n                  t => html`\n                  <input\n                    id=${t}\n                    name='provenance-target'\n                    type='radio'\n                    ?checked=${demand.restrictions?.provenance?.target === t}\n                    @click=${this.handleProvenanceTargetClick}>\n                  </input>\n                  <label for=${t}>${TARGET_DESCRIPTIONS[t]()}</label><br/>\n                `\n                )}\n            </fieldset>\n          </div>\n        </slotted-dropdown>\n        <slotted-dropdown\n          header=${msg('Additional message (optional)')}\n          include-buttons\n        >\n          <div class=\"additional-msg-ctr\">\n            <span class=\"\">${msg('My additional message:')}</span>\n            <span\n              ><i\n                >${msg(\n                  'Please note that adding a personalized message might lead to the demand taking longer to be processed'\n                )}</i\n              ></span\n            >\n            <textarea\n              id=\"additional-msg\"\n              class=\"std-txt-area\"\n              name=\"paragraph_text\"\n              cols=\"50\"\n              rows=\"10\"\n              @input=${this.handleAdditionalMessageInput}\n              .value=${demand.message ?? ''}\n            ></textarea>\n          </div>\n        </slotted-dropdown>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport {\n  ACTION,\n  DATA_CATEGORY,\n  PROCESSING_CATEGORY,\n  PROVENANCE,\n  PURPOSE,\n  TARGET,\n  Demand,\n} from '@blindnet/core';\nimport {\n  DATA_CATEGORY_DESCRIPTIONS,\n  PROVENANCE_DESCRIPTIONS,\n  TARGET_DESCRIPTIONS,\n} from '../utils/dictionary.js';\nimport { DemandForm } from './DemandForm.js';\nimport { FormComponentState } from '../utils/states.js';\n\nimport '../AllChecklist.js';\nimport { PRCIStyles } from '../styles.js';\n\n/**\n * ActionForm for the Delete PRIV action.\n */\n@customElement('delete-form')\nexport class DeleteForm extends DemandForm {\n  static styles = [\n    DemandForm.styles,\n    PRCIStyles,\n    css`\n      #delete-form {\n        display: grid;\n        row-gap: 35px;\n        align-content: flex-start;\n        margin: 0px;\n      }\n\n      .delete-options {\n        padding: 40px 40px 20px 40px;\n      }\n\n      #dmd-ctr {\n        display: grid;\n        row-gap: 20px;\n      }\n\n      #dmd-ctr ul {\n        margin: 0;\n      }\n\n      #dmd-ctr li:not(:last-child) {\n        margin-bottom: 15px;\n      }\n\n      #edit-heading-1 {\n        font-weight: bold;\n        grid-column: 1/2;\n        padding: 0px;\n      }\n\n      p {\n        margin: 0px;\n      }\n\n      .additional-msg-ctr {\n        display: grid;\n        row-gap: 20px;\n        margin: 0px 0px 25px 0px;\n      }\n    `,\n  ];\n\n  @property({ type: Array, attribute: false })\n  allowedDataCategories: DATA_CATEGORY[] = [];\n\n  constructor() {\n    super();\n\n    // Data category listeners\n    this.addEventListener('delete-option-select', e => {\n      const { id } = (e as CustomEvent).detail;\n      this.demand.restrictions!.privacy_scope!.push({\n        dc: id as DATA_CATEGORY,\n        pc: PROCESSING_CATEGORY.ALL,\n        pp: PURPOSE.ALL,\n      });\n    });\n    this.addEventListener('delete-option-deselect', e => {\n      const { id } = (e as CustomEvent).detail;\n      this.demand.restrictions!.privacy_scope!.splice(\n        this.demand.restrictions!.privacy_scope!.findIndex(\n          psr => psr.dc === (id as DATA_CATEGORY)\n        ),\n        1\n      );\n    });\n\n    // FIXME: Disabled until we resolve how to handle OTHER-DATA\n    // this.addEventListener('delete-option-other-click', e => {\n    //   const { checked } = (e as CustomEvent).detail;\n    //   if (checked) {\n    //     this.demand.dataCategory?.add(DATA_CATEGORY['OTHER-DATA']);\n    //   } else {\n    //     this.demand.dataCategory?.delete(DATA_CATEGORY['OTHER-DATA']);\n    //   }\n    // });\n    // this.addEventListener('delete-option-other-input', e => {\n    //   const { text } = (e as CustomEvent).detail\n    //   // TODO: What demand field to put the other-data category\n    // })\n  }\n\n  handleAdditionalMessageInput(e: Event) {\n    const { value } = e.target as HTMLTextAreaElement;\n    this.demand.message = value;\n  }\n\n  handleProvenanceTermClick(e: Event) {\n    const { id } = (e as CustomEvent).target as HTMLInputElement;\n    this.demand.restrictions!.provenance!.term = id as PROVENANCE;\n  }\n\n  handleProvenanceTargetClick(e: Event) {\n    const { id } = (e as CustomEvent).target as HTMLInputElement;\n    this.demand.restrictions!.provenance!.target = id as TARGET;\n  }\n\n  handleDateRestrictionInput(e: Event) {\n    const { id, value } = e.target as HTMLInputElement;\n    if (id === 'date-start') {\n      if (value) {\n        this.demand.restrictions!.date_range!.from = new Date(value);\n      } else {\n        // Value is false when user hits 'clear' button on date picker\n        delete this.demand.restrictions?.date_range?.from;\n      }\n    } else if (id === 'date-end') {\n      if (value) {\n        this.demand.restrictions!.date_range!.to = new Date(value);\n      } else {\n        delete this.demand.restrictions?.date_range?.to;\n      }\n    }\n  }\n\n  validate(): boolean {\n    return true;\n  }\n\n  getDefaultDemand(): Demand {\n    return {\n      action: ACTION.DELETE,\n      restrictions: {\n        privacy_scope: this.allowedDataCategories.map(dc => ({\n          dc,\n          pc: PROCESSING_CATEGORY.ALL,\n          pp: PURPOSE.ALL,\n        })),\n        provenance: {\n          term: PROVENANCE.ALL,\n          target: TARGET.SYSTEM,\n        },\n        date_range: {},\n      },\n    };\n  }\n\n  getFormTemplate(demand: Demand): TemplateResult<1 | 2> {\n    return html`\n      <div id=\"delete-form\">\n        <p id=\"edit-heading-1\">\n          <b>${msg('Details of my DELETE Demand')}</b>\n        </p>\n\n        <div class=\"border--light border--rounded delete-options\">\n          <span slot=\"prompt\">${msg('I want to delete:')}</span>\n          <all-checklist\n            .choices=${this.allowedDataCategories.map(dc => ({\n              id: dc,\n              description: DATA_CATEGORY_DESCRIPTIONS[dc](),\n              checked:\n                demand.restrictions?.privacy_scope?.findIndex(\n                  psr => psr.dc === dc\n                ) !== -1,\n              disabled: false,\n            }))}\n            all-message=${msg(\n              'ALL categories of data the organization has data on me'\n            )}\n            component-mode=${FormComponentState.CLOSED}\n            event-prefix=\"delete-option\"\n            include-buttons\n          ></all-checklist>\n        </div>\n\n        <slotted-dropdown header=${msg('Advanced settings')} include-buttons>\n          <div class=\"date-restriction\">\n            <p>\n              ${msg(\n                'Specify a date range for the selected category(ies) of data:'\n              )}\n            </p>\n            <div>\n              <span>${msg('From')}</span>\n              <input\n                id=\"date-start\"\n                type=\"date\"\n                .value=${demand.restrictions?.date_range?.from\n                  ? demand.restrictions?.date_range?.from\n                      .toISOString()\n                      .split('T')[0]\n                  : ''}\n                @input=${this.handleDateRestrictionInput}\n              />\n              <span>${msg('to')}</span>\n              <input\n                id=\"date-end\"\n                type=\"date\"\n                .value=${demand.restrictions?.date_range?.to\n                  ? demand.restrictions?.date_range?.to\n                      .toISOString()\n                      .split('T')[0]\n                  : ''}\n                @input=${this.handleDateRestrictionInput}\n              />\n            </div>\n          </div>\n          <div>\n            <span>\n              ${msg('My demand applies to data from the following provenance:')}\n            </span>\n            <fieldset class=\"provenance-restriction\">\n              ${Object.values(PROVENANCE).map(\n                p => html`\n                  <input\n                    id=${p}\n                    name='provenance-term'\n                    type='radio'\n                    ?checked=${demand.restrictions?.provenance?.term === p}\n                    @click=${this.handleProvenanceTermClick}>\n                  </input>\n                  <label for=${p}>${PROVENANCE_DESCRIPTIONS[p]()}</label><br/>\n                `\n              )}\n            </fieldset>\n          </div>\n          <div>\n            <span> ${msg('I address my demand to:')} </span>\n            <fieldset class=\"provenance-restriction\">\n              ${Object.values(TARGET)\n                .filter(t => t !== TARGET.ALL)\n                .map(\n                  t => html`\n                  <input\n                    id=${t}\n                    name='provenance-target'\n                    type='radio'\n                    ?checked=${demand.restrictions?.provenance?.target === t}\n                    @click=${this.handleProvenanceTargetClick}>\n                  </input>\n                  <label for=${t}>${TARGET_DESCRIPTIONS[t]()}</label><br/>\n                `\n                )}\n            </fieldset>\n          </div>\n        </slotted-dropdown>\n        <slotted-dropdown\n          header=${msg('Additional message (optional)')}\n          include-buttons\n        >\n          <div class=\"additional-msg-ctr\">\n            <span class=\"\">${msg('My additional message:')}</span>\n            <span\n              ><i\n                >${msg(\n                  'Please note that adding a personalized message might lead to the demand taking longer to be processed'\n                )}</i\n              ></span\n            >\n            <textarea\n              id=\"additional-msg\"\n              class=\"std-txt-area\"\n              name=\"paragraph_text\"\n              cols=\"50\"\n              rows=\"10\"\n              @input=${this.handleAdditionalMessageInput}\n              .value=${demand.message ?? ''}\n            ></textarea>\n          </div>\n        </slotted-dropdown>\n      </div>\n    `;\n  }\n}\n","import { msg } from '@lit/localize';\nimport { css, html, PropertyValueMap, TemplateResult } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\nimport { when } from 'lit/directives/when.js';\n\nimport { Demand, ACTION } from '@blindnet/core';\n\nimport { MultiDemandForm } from './MultiDemandForm.js';\nimport '../AllChecklist.js';\nimport { PRCIStyles } from '../styles.js';\n\n/**\n * ActionForm for the REVOKE PRIV action.\n */\n@customElement('revoke-consent-form')\nexport class RevokeConsentForm extends MultiDemandForm {\n  static styles = [\n    MultiDemandForm.styles,\n    PRCIStyles,\n    css`\n      #revoke-consent-form-ctr {\n        display: grid;\n        row-gap: 40px;\n      }\n\n      #revoke-type-btns {\n        border: none;\n        padding: 0px;\n        margin: 0px;\n      }\n\n      #revoke-type-btns input[type='radio'] {\n        -ms-transform: scale(1.5); /* IE 9 */\n        -webkit-transform: scale(1.5); /* Chrome, Safari, Opera */\n        transform: scale(1.5);\n        margin: 3px 10px 0px 5px;\n      }\n\n      #revoke-type-btns input:not(:nth-last-child(2)) {\n        margin-bottom: 25px;\n      }\n\n      #consents-ctr {\n        padding: 40px;\n      }\n\n      #consents-ctr ul {\n        list-style-type: none;\n        margin-bottom: 0px;\n      }\n\n      #consents-ctr ul li input {\n        margin: 3px 10px 3px 4px;\n      }\n\n      .revoke-options {\n        padding: 40px 40px 20px 40px;\n      }\n\n      .additional-msg-ctr {\n        display: grid;\n        row-gap: 20px;\n      }\n    `,\n  ];\n\n  // @state() _selectedConsentIds: Set<Restrictions> = new Set<Restrictions>();\n\n  @state() _additionalMessage = '';\n\n  @state() _revokeAll: boolean = true;\n\n  @state() _allConsentIds: string[] = [];\n\n  @state() _selectedConsentIds: Set<string> = new Set<string>();\n\n  constructor() {\n    super();\n    // FIXME: For now, we hardcode the demo consent ID here. Once we have an endpoint for\n    // it we should fetch all IDs for the current user here instead.\n    this._allConsentIds = ['28b5bee0-9db8-40ec-840e-64eafbfb9ddd'];\n  }\n\n  handleAdditionalMessageInput(e: Event) {\n    this._additionalMessage = (e.target as HTMLTextAreaElement).value;\n    this.demands.forEach(d => {\n      const demand = d;\n      demand.message = this._additionalMessage;\n    });\n  }\n\n  handleRevokeAllClick() {\n    this._revokeAll = true;\n    // Add a consent restriction for all IDs\n    this._selectedConsentIds = new Set<string>(this._allConsentIds);\n  }\n\n  handleRevokeSomeClick() {\n    this._revokeAll = false;\n    // Set to no restrictions, user selects the consents they want to revoke\n    this._selectedConsentIds.clear();\n  }\n\n  /**\n   * Add or remove a consent restriction for the clicked consent\n   * @param e Click event\n   */\n  handleConsentClick(e: Event) {\n    const { id, checked } = e.target as HTMLInputElement;\n    if (id && checked) {\n      this._selectedConsentIds.add(id);\n    } else if (id) {\n      this._selectedConsentIds.delete(id);\n    }\n  }\n\n  validate(): boolean {\n    return true;\n  }\n\n  /**\n   * Create a list of REVOKE demands, one per each consent restriction\n   * @returns List of Demand objects\n   */\n  buildDemands(): Demand[] {\n    return Array.from(this._selectedConsentIds).map(\n      (id): Demand => ({\n        action: ACTION.REVOKE,\n        restrictions: { consent: { id } },\n      })\n    );\n  }\n\n  /**\n   * FIXME: Once we fetch restrictions, only do this once they have loaded\n   * @param _changedProperties\n   */\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    if (_changedProperties.has('demands')) {\n      // Reset restrictions and get new ones from demands\n      this._selectedConsentIds.clear();\n      this.demands.forEach(d => {\n        if (d.restrictions && d.restrictions.consent) {\n          this._selectedConsentIds.add(d.restrictions.consent.id);\n        }\n      });\n\n      // If we got consent restriction(s) from demands, select only those\n      if (this._selectedConsentIds.size > 0) {\n        // Set revokeAll if every possible consent is included in the restrictions passed in\n        this._revokeAll = this._allConsentIds.every(id =>\n          this._selectedConsentIds.has(id)\n        );\n      } else {\n        // Default to revoke all if no consent restrictions passed in\n        this._revokeAll = true;\n        this._selectedConsentIds = new Set<string>(this._allConsentIds);\n      }\n    }\n  }\n\n  getFormTemplate(): TemplateResult<1 | 2> {\n    return html`\n      <div id=\"revoke-consent-form-ctr\">\n        <h2>${msg('Details of my REVOKE CONSENT Demand')}</h2>\n\n        ${when(\n          this._allConsentIds.length > 0,\n          () => html`\n            <fieldset id=\"revoke-type-btns\">\n              <input\n                id=\"revoke-all-radio\"\n                name=\"revoke-type\"\n                type=\"radio\"\n                ?checked=${this._revokeAll}\n                @click=${this.handleRevokeAllClick}\n              />\n              <label for=\"revoke-all-radio\"\n                >${msg(html`Revoke <strong>all</strong> consents`)}</label\n              ><br />\n              <input\n                id=\"revoke-some-radio\"\n                name=\"revoke-type\"\n                type=\"radio\"\n                ?checked=${!this._revokeAll}\n                @click=${this.handleRevokeSomeClick}\n              />\n              <label for=\"revoke-some-radio\"\n                >${msg(html`Revoke <strong>some</strong> consents`)}</label\n              >\n            </fieldset>\n\n            ${when(\n              !this._revokeAll,\n              () => html`\n                <div id=\"consents-ctr\" class=\"border--light border--rounded\">\n                  <h3>\n                    ${msg(\n                      html`Check the consents you wish to\n                        <strong>revoke</strong>:`\n                    )}\n                  </h3>\n                  <ul>\n                    ${map(\n                      this._allConsentIds,\n                      id => html`\n                  <li><input id=${id} type='checkbox' @click=${\n                        this.handleConsentClick\n                      } ?checked=${this._selectedConsentIds.has(\n                        id\n                      )}><label for=${id}><strong>I no longer consent to</strong> the storage and processing of my data for the purposes of the prize draw.</label></input></li>\n                `\n                    )}\n                  </ul>\n                </div>\n              `\n            )}\n\n            <slotted-dropdown\n              header=${msg('Additional message (optional)')}\n              include-buttons\n            >\n              <div class=\"additional-msg-ctr\">\n                <span class=\"\">${msg('My additional message:')}</span>\n                <span\n                  ><i\n                    >${msg(\n                      'Please note that adding a personalized message might lead to the demand taking longer to be processed'\n                    )}</i\n                  ></span\n                >\n                <textarea\n                  id=\"additional-msg\"\n                  class=\"std-txt-area\"\n                  name=\"paragraph_text\"\n                  cols=\"50\"\n                  rows=\"10\"\n                  @input=${this.handleAdditionalMessageInput}\n                  .value=${this._additionalMessage}\n                ></textarea>\n              </div>\n            </slotted-dropdown>\n          `\n        )}\n      </div>\n    `;\n  }\n}\n","import { html, css, LitElement, PropertyValueMap, TemplateResult } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { map } from 'lit/directives/map.js';\nimport { localized, msg } from '@lit/localize';\nimport {\n  DATA_CATEGORY,\n  TARGET,\n  Demand,\n  PrivacyRequest,\n  ComputationAPI,\n  CoreConfigurationMixin,\n  ACTION,\n} from '@blindnet/core';\nimport { ComponentState } from './utils/states.js';\nimport {\n  getDefaultActions,\n  getDefaultDataCategories,\n  getDefaultDemands,\n} from './utils/utils.js';\nimport { PRCI_CONFIG } from './utils/conf.js';\nimport { PRCIStyles } from './styles.js';\n\nimport './FrequentRequestsMenu.js';\nimport './ReviewView.js';\nimport './ActionMenuView.js';\nimport './RequestsView.js';\nimport './StatusView.js';\nimport './demand-forms/TransparencyForm.js';\nimport './demand-forms/AccessForm.js';\nimport './demand-forms/DeleteForm.js';\nimport './demand-forms/RevokeConsentForm.js';\n\n/**\n * Decode a base64url string\n * @param input String to decode\n * @returns Decoded string\n */\nfunction decode(input: string) {\n  let output = input.replace(/-/g, '+').replace(/_/g, '/');\n\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += '==';\n      break;\n    case 3:\n      output += '=';\n      break;\n    default:\n      throw Error('Illegal base64url string!');\n  }\n  return atob(output);\n}\n\n/**\n * Top level component encapsulating a single PrivacyRequest. Contains one or\n * more DemandBuilder elements, each for a single demand action type.\n *\n */\n@customElement('bldn-priv-request')\n@localized()\nexport class BldnPrivRequest extends CoreConfigurationMixin(LitElement) {\n  /** JSON list of allowed actions */\n  @property({ type: String }) actions = '';\n\n  /** JSON list of allowed data categories */\n  @property({ type: String, attribute: 'data-categories' })\n  dataCategories: string = '';\n\n  /** @prop {string} requestId - a request ID. If provided, the initial PRCI view will be the status page for the provided request ID */\n  @property({ type: String, attribute: 'request-id' }) requestId: string = '';\n\n  // Array of available actions, given by actions property if a valid list was passed\n  @state() _includedActions: ACTION[] = getDefaultActions();\n\n  // Array of available data categories, given by dataCategories property if a valid list was passed\n  @state() _includedDataCategories: DATA_CATEGORY[] =\n    getDefaultDataCategories();\n\n  @state() _currentRequestId: string = '';\n\n  @state() _currentDemandGroupId: string = '';\n\n  @state() _currentAction: ACTION = ACTION.TRANSPARENCY;\n\n  // Privacy request object, empty until some demands are added\n  @state() _privacyRequest: PrivacyRequest = {\n    demands: [],\n    email: '',\n    target: TARGET.PARTNERS,\n  };\n\n  // Map of demand group ids to sets of demands\n  @state() _demands: Map<string, Demand[]> = new Map<string, Demand[]>();\n\n  @state() _config = PRCI_CONFIG;\n\n  // UI state indicating which view to show\n  @state() _componentState: ComponentState = ComponentState.MENU;\n\n  constructor() {\n    super();\n\n    const params = new URLSearchParams(window.location.search);\n    const requestId = params.get('requestId');\n    if (requestId) {\n      this._currentRequestId = requestId;\n      this._componentState = ComponentState.STATUS;\n    }\n\n    // Initialize demands and current demand group to the same uuid\n    const initialGroup = crypto.randomUUID();\n    this._demands.set(initialGroup, []);\n    this._currentDemandGroupId = initialGroup;\n\n    // State change listener\n    this.addEventListener('component-state-change', e => {\n      const details = (e as CustomEvent).detail;\n      this._componentState = details.newState;\n\n      switch (this._componentState) {\n        case ComponentState.EDIT:\n          this._currentAction = details.newAction;\n          if (details.demandGroupId !== undefined) {\n            this._currentDemandGroupId = details.demandGroupId;\n          }\n          break;\n        case ComponentState.SUBMITTED:\n          break;\n        case ComponentState.MENU:\n          // For now, going back to the menu means we reset. This will change\n          // when supporting multiple demands.\n          this._demands.set(this._currentDemandGroupId, []);\n          break;\n        case ComponentState.STATUS:\n          this._currentRequestId = details.requestId;\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  private setMultipleDemands = (e: Event) => {\n    if (e instanceof CustomEvent) {\n      const { demandGroupId, demands } = e.detail;\n      this._demands.set(demandGroupId, demands);\n    }\n  };\n\n  private setDemand = (e: Event) => {\n    if (e instanceof CustomEvent) {\n      const { demandGroupId, demand } = e.detail;\n      this._demands.set(demandGroupId, [demand]);\n    }\n  };\n\n  private deleteDemand = (e: Event) => {\n    if (e instanceof CustomEvent) {\n      const { demandGroupId } = e.detail;\n      this._demands.delete(demandGroupId);\n      this.requestUpdate();\n    }\n  };\n\n  private changeRequestTarget = (e: Event) => {\n    if (e instanceof CustomEvent) {\n      const { id } = e.detail;\n      this._privacyRequest.target = id as TARGET;\n    }\n  };\n\n  private submitRequest = async () => {\n    const allDemands = Array.from(this._demands.values()).reduce(\n      (dmds, dmdGroup) => dmds.concat(dmdGroup),\n      []\n    );\n    this._privacyRequest.demands = allDemands.map((d, i) => {\n      // eslint-disable-next-line no-param-reassign\n      d.id = i.toString();\n      return d;\n    });\n\n    const response = await ComputationAPI.getInstance().sendPrivacyRequest(\n      this._privacyRequest\n    );\n\n    this.dispatchEvent(\n      new CustomEvent('component-state-change', {\n        detail: {\n          newState: ComponentState.STATUS,\n          requestId: response.request_id,\n        },\n      })\n    );\n  };\n\n  connectedCallback(): void {\n    // eslint-disable-next-line wc/guard-super-call\n    super.connectedCallback();\n\n    // Demand update listener\n    this.addEventListener('demand-set-multiple', this.setMultipleDemands);\n    this.addEventListener('demand-set', this.setDemand);\n    this.addEventListener('demand-delete', this.deleteDemand);\n\n    // Request target listener\n    this.addEventListener('request-target-change', this.changeRequestTarget);\n\n    // Submit request listener\n    this.addEventListener('submit-request', this.submitRequest);\n  }\n\n  disconnectedCallback(): void {\n    this.removeEventListener('demand-set-multiple', this.setMultipleDemands);\n    this.removeEventListener('demand-set', this.setDemand);\n    this.removeEventListener('demand-delete', this.deleteDemand);\n    this.removeEventListener('request-target-change', this.changeRequestTarget);\n    this.removeEventListener('submit-request', this.submitRequest);\n  }\n\n  /**\n   * Reset most states\n   * // TODO: Remove this and use something like getDefaultDemand() from the forms\n   */\n  handleRestartClick() {\n    this._privacyRequest = {\n      demands: [],\n      email: '',\n      target: TARGET.PARTNERS,\n    };\n\n    if (this.apiToken) {\n      const decodedToken = JSON.parse(atob(this.apiToken.split('.')[1]));\n      this._privacyRequest.data_subject = [\n        {\n          id: decodedToken.uid,\n          schema: 'dsid',\n        },\n      ];\n    }\n\n    this._demands = new Map<string, Demand[]>();\n  }\n\n  /**\n   * Return a form based on action type with either default or prepopulated demand data\n   * @param action PRIV action for which to return a form\n   * @returns\n   */\n  actionFormFactory(action: ACTION) {\n    const demandGroup = this._demands.get(this._currentDemandGroupId);\n\n    // Use one of the multi demand forms\n    if (action === ACTION.TRANSPARENCY) {\n      // Decide if we should use the default demand or not\n      const multiDemand =\n        demandGroup && demandGroup.length !== 0\n          ? demandGroup\n          : getDefaultDemands(action);\n      return html`\n        <transparency-form\n          .demands=${multiDemand}\n          .demandGroupId=${this._currentDemandGroupId}\n          .restrictions=${multiDemand[0].restrictions}\n        ></transparency-form>\n      `;\n    }\n\n    // Use one of the single demand forms\n    const demand =\n      demandGroup && demandGroup.length !== 0 ? demandGroup[0] : undefined;\n    const useDefault = !demandGroup || demandGroup.length === 0;\n    // Get the form for all other action types\n    return html`\n      ${choose(\n        action,\n        [\n          [\n            ACTION.ACCESS,\n            () => html`\n              <access-form\n                .demand=${demandGroup ?? ''}\n                .demandGroupId=${this._currentDemandGroupId}\n                .allowedDataCategories=${this._includedDataCategories}\n                .default=${useDefault}\n              ></access-form>\n            `,\n          ],\n          [\n            ACTION.DELETE,\n            () => html`\n              <delete-form\n                .demand=${demand}\n                .demandGroupId=${this._currentDemandGroupId}\n                .allowedDataCategories=${this._includedDataCategories}\n                .default=${useDefault}\n              ></delete-form>\n            `,\n          ],\n          [ACTION.MODIFY, () => html``],\n          [ACTION.OBJECT, () => html``],\n          [ACTION.PORTABILITY, () => html``],\n          [ACTION.RESTRICT, () => html``],\n          [\n            ACTION.REVOKE,\n            () => html`\n              <revoke-consent-form\n                .demand=${demand}\n                .demandGroupId=${this._currentDemandGroupId}\n              ></revoke-consent-form>\n            `,\n          ],\n          [ACTION['OTHER.DEMAND'], () => html``],\n        ],\n        () => html`${msg('Error: Invalid Action')}`\n      )}\n    `;\n  }\n\n  getHeadingString(componentState: ComponentState): TemplateResult<1 | 2> {\n    switch (componentState) {\n      case ComponentState.REQUESTS:\n        return html`${msg('My Submitted Privacy Request(s)')}`;\n      case ComponentState.STATUS:\n        return html`${msg('My Privacy Request Status')}`;\n      default:\n        return html`${msg('My Privacy Request')}`;\n    }\n  }\n\n  // Hook into willUpdate lifecycle method to set the included actions state if a valid list of actions is passed as an attribute\n  protected willUpdate(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    super.willUpdate(_changedProperties);\n    if (_changedProperties.has('actions') && this.actions) {\n      try {\n        // Select the valid actions from those passed in\n        const actionsList = (\n          Array.from(JSON.parse(this.actions)) as string[]\n        ).map(a => a.toLocaleLowerCase());\n        const validActionsList = getDefaultActions().filter(a =>\n          actionsList.includes(a.toLocaleLowerCase())\n        );\n        // If any valid actions were passed in, use them\n        if (validActionsList.length > 0) {\n          this._includedActions = validActionsList;\n        }\n      } catch {\n        this._includedActions = getDefaultActions();\n      }\n    }\n\n    if (_changedProperties.has('dataCategories') && this.dataCategories) {\n      try {\n        // Select the valid data categories from those passed in\n        const dataCategoriesList = (\n          Array.from(JSON.parse(this.dataCategories)) as string[]\n        ).map(dc => dc.toLocaleLowerCase());\n        const validDataCategories = getDefaultDataCategories().filter(dc =>\n          dataCategoriesList.includes(dc.toLocaleLowerCase())\n        );\n        // If any valid data categories were passed in, use them\n        if (validDataCategories.length > 0) {\n          this._includedDataCategories = validDataCategories;\n        }\n      } catch {\n        this._includedDataCategories = getDefaultDataCategories();\n      }\n    }\n\n    if (_changedProperties.has('apiToken') && this.apiToken) {\n      const decodedToken = JSON.parse(decode(this.apiToken.split('.')[1]));\n      this._privacyRequest.data_subject = [\n        {\n          id: decodedToken.uid,\n          schema: 'dsid',\n        },\n      ];\n    }\n  }\n\n  render() {\n    return html`\n      <div id=\"prci-ctr\">\n        <div id=\"heading-ctr\">\n          <span class=\"req-hdr\"\n            >${this.getHeadingString(this._componentState)}</span\n          >\n        </div>\n        ${choose(this._componentState, [\n          [\n            ComponentState.MENU,\n            () => html`\n              <div>\n                <action-menu-view\n                  .includedActions=${this._includedActions}\n                ></action-menu-view>\n              </div>\n            `,\n          ],\n          [\n            ComponentState.EDIT,\n            () => html`\n              <div class=\"border--medium border--rounded view-ctr\">\n                ${this.actionFormFactory(this._currentAction)}\n              </div>\n            `,\n          ],\n          [\n            ComponentState.REVIEW,\n            () => html`\n              <div class=\"border--medium border--rounded view-ctr\">\n                ${map(\n                  this._demands.entries(),\n                  ([groupId, demands]) => html`<review-view\n                    .demandGroupId=${groupId}\n                    .demands=${demands}\n                  ></review-view>`\n                )}\n              </div>\n            `,\n          ],\n          [\n            ComponentState.REQUESTS,\n            () => html`<requests-view></requests-view>`,\n          ],\n          [\n            ComponentState.STATUS,\n            () => html` <status-view\n              request-id=${this._currentRequestId}\n            ></status-view>`,\n          ],\n          [\n            ComponentState.SUBMITTED,\n            () => html`\n              <p>\n                <b>${msg('Your Privacy Request has been sent!')} 🎉</b>\n              </p>\n              <p>${msg('You may track the status of your request below.')}</p>\n            `,\n          ],\n          [ComponentState.AUTH, () => html` <auth-view></auth-view> `],\n        ])}\n      </div>\n    `;\n  }\n\n  static styles = [\n    PRCIStyles,\n    css`\n      :host {\n        display: flex;\n        justify-content: center;\n        justify-items: center;\n\n        font-family: var(\n          --prci-font-family,\n          -apple-system,\n          BlinkMacSystemFont,\n          'Segoe UI',\n          Roboto,\n          Oxygen,\n          Ubuntu,\n          Cantarell,\n          'Open Sans',\n          'Helvetica Neue',\n          sans-serif\n        );\n        color: var(--prci-font-color, #000000);\n        font-size: 16;\n        text-align: left;\n      }\n\n      #prci-ctr {\n        padding: 20px;\n        max-width: 1350px;\n      }\n\n      #heading-ctr {\n        padding: 0px 0px 40px 0px;\n        max-width: 1170px;\n      }\n\n      .req-hdr {\n        display: block;\n        font-weight: bold;\n        font-size: 24px;\n        grid-column: 2/3;\n        text-align: center;\n      }\n\n      button:disabled {\n        background-color: #a9d1ff;\n      }\n    `,\n  ];\n}\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","ComponentState","RequestState","DemandState","FormComponentState","enabledActions","Map","ACTION","ACCESS","DELETE","MODIFY","OBJECT","PORTABILITY","RESTRICT","REVOKE","TRANSPARENCY","PRCI_CONFIG","DATA_CATEGORY","CONTACT","NAME","UID","ACTION_TITLES","msg","ACTION_DESCRIPTIONS","PROVENANCE_DESCRIPTIONS","USER","DERIVED","TRANSFERRED","DATA_CATEGORY_TITLES","AFFILIATION","BEHAVIOR","BIOMETRIC","DEMOGRAPHIC","DEVICE","FINANCIAL","GENETIC","HEALTH","IMAGE","LOCATION","PROFILING","RELATIONSHIPS","DATA_CATEGORY_DESCRIPTIONS","html","TARGET_DESCRIPTIONS","SYSTEM","ORGANIZATION","PARTNERS","STATUS_DESCRIPTIONS","IN_PROCESSING","PARTIALLY_COMPLETED","COMPLETED","CANCELED","DEMAND_STATUS_DESCRIPTIONS","GRANTED","DENIED","POLICY_TYPE_TITLES","AFTER_TITLES","getDefaultActions","values","filter","a","includes","getDefaultDataCategories","dc","removeQueryParam","param","url","URL","document","searchParams","delete","window","history","pushState","PRCIStyles","css","FrequentRequestsMenu","LitElement","render","styles","customElement","editSvg","import","meta","href","trashSvg","ReviewView","constructor","this","demandGroupId","demands","demand","action","confirmDelete","TARGET","_action","getAccessReviewTemplate","from","_b","_a","restrictions","date_range","to","_d","_c","provenance","_e","privacyScope","_f","privacy_scope","when","ALL","every","map","psr","getDateRangeReviewTemplate","term","PROVENANCE","message","getDeleteReviewTemplate","getModifyReviewTemplate","getObjectReviewTemplate","getPortabilityReviewTemplate","getRestrictReviewTemplate","getRevokeReviewTemplate","getTransparencyReviewTemplate","getOtherDemandReviewTemplate","toLocaleDateString","handleEditClick","dispatchEvent","CustomEvent","bubbles","composed","detail","newState","EDIT","newAction","handleDeleteClick","handleConfirmDeleteClick","MENU","handleCancelDeleteClick","handleTargetClick","e","id","handleSubmitClick","Event","willUpdate","_changedProperties","has","choose","t","property","attribute","prototype","type","Boolean","reflect","state","ActionItem","disabled","handleClick","event","localized","arrowForwardSvg","ActionMenu","prompt","includedActions","handleRequestsClick","REQUESTS","get","String","RequestsView","_requests","connectedCallback","super","ComputationAPI","getInstance","getRequestHistory","then","response","handleRequestClick","STATUS","requestId","handleNewRequestClick","Date","date","toLocaleString","status","StatusViewItem","demand_id","requested_action","DEMAND_STATUS","system","open","accessResponseTemplate","data","deleteResponseTemplate","transparencyResponseTemplate","answer","transparencyDcTemplate","transparencyDpoTemplate","transparencyKnownTemplate","transparencyLbTemplate","lb","lb_type","name","description","transparencyOrgTemplate","transparencyPolicyTemplate","transparencyPcTemplate","pc","transparencyProvTemplate","entries","p","prov","transparencyPurposeTemplate","purpose","transparencyRetTemplate","rp","dataCategory","policyType","policy_type","duration","after","toLocaleUpperCase","transparencyWhereTemplate","where","transparencyWhoTemplate","who","handleConfirmCancelClick","cancelDemand","toLowerCase","linkSvg","StatusView","newRequest","_requestDate","_completedDemands","_processingDemands","_cancelledDemands","_intervalId","undefined","reloadRequest","hasApiToken","getRequest","some","clearInterval","setInterval","handleCopyIdClick","navigator","clipboard","writeText","handleCopyLinkClick","set","getRequestLink","toString","handleBackClick","disconnectedCallback","str","MultiDemandForm","demandState","EDIT_OPEN","self","crypto","randomUUID","setDemand","push","deleteDemand","splice","findIndex","addToPrivacyRequest","handleAddClick","validate","buildDemands","REVIEW","getFormTemplate","Number","allCheckboxCheckedSvg","allCheckboxDashSvg","allCheckboxUncheckedSvg","closeContainerArrowSvg","openContainerArrowSvg","SelectionState","AllChecklist","choices","selectionState","componentMode","CLOSED","includeAll","allChecked","allMessage","eventPrefix","includeButtons","includeOther","selectedChoices","Set","selectChoice","add","size","updateSelectionState","deleteChoice","handleChoiceClick","checked","allCheckboxes","shadowRoot","querySelectorAll","forEach","element","input","getElementById","handleOtherClick","handleOtherInput","text","value","NONE","SOME","getDisplayChoices","OPEN","Array","PARTIAL","handleButtonClick","TransparencyForm","transparencyActions","advancedSettings","_additionalMessage","addEventListener","handleProvenanceTermClick","handleAdditionalMessageInput","selectedActions","DemandForm","default","getDefaultDemand","AccessForm","allowedDataCategories","PROCESSING_CATEGORY","pp","PURPOSE","handleProvenanceTargetClick","handleDateRestrictionInput","toISOString","split","_h","_g","_j","DeleteForm","RevokeConsentForm","_revokeAll","_allConsentIds","_selectedConsentIds","handleRevokeAllClick","handleRevokeSomeClick","clear","handleConsentClick","consent","BldnPrivRequest","CoreConfigurationMixin","actions","dataCategories","_includedActions","_includedDataCategories","_currentRequestId","_currentDemandGroupId","_currentAction","_privacyRequest","email","_demands","_config","_componentState","setMultipleDemands","requestUpdate","changeRequestTarget","submitRequest","async","allDemands","reduce","dmds","dmdGroup","concat","sendPrivacyRequest","request_id","URLSearchParams","location","search","initialGroup","details","SUBMITTED","removeEventListener","handleRestartClick","apiToken","decodedToken","JSON","parse","atob","data_subject","uid","schema","actionFormFactory","demandGroup","multiDemand","Error","getDefaultDemands","useDefault","getHeadingString","componentState","actionsList","toLocaleLowerCase","validActionsList","dataCategoriesList","validDataCategories","output","replace","decode","groupId","AUTH"],"mappings":"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"}