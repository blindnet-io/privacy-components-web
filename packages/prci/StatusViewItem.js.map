{"version":3,"file":"StatusViewItem.js","sources":["../src/StatusViewItem.ts"],"sourcesContent":["import { msg } from '@lit/localize';\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { map } from 'lit/directives/map.js';\nimport { when } from 'lit/directives/when.js';\nimport {\n  ACTION,\n  DATA_CATEGORY,\n  DEMAND_STATUS,\n  PROCESSING_CATEGORY,\n  PROVENANCE,\n  PURPOSE,\n  PrivacyResponseItem,\n  ComputationAPI,\n} from '@blindnet/core';\nimport { LegalBase } from './models/legal-base.js';\nimport { Provenance } from './models/provenance.js';\nimport { RetentionPolicy } from './models/retention-policy.js';\nimport { PRCIStyles } from './styles.js';\nimport {\n  ACTION_DESCRIPTIONS,\n  ACTION_TITLES,\n  DEMAND_STATUS_DESCRIPTIONS,\n} from './utils/dictionary.js';\nimport { getRetentionPolicyString } from './utils/utils.js';\n\n/**\n * Status for a single demand in a Privacy Request\n */\n@customElement('status-view-item')\nexport class StatusViewItem extends LitElement {\n  static styles = [\n    PRCIStyles,\n    css`\n      .demand-status-ctr {\n        display: flex;\n        flex-direction: column;\n        border-radius: 15px;\n        border: 2px solid #e6e6e6;\n        box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.5);\n      }\n\n      .status-type-ctr {\n        font-size: 16px;\n      }\n\n      .demand-status-ctr span {\n        padding: 10px 0px;\n      }\n\n      .dmd-action-ctr {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        align-items: center;\n        justify-items: center;\n        column-gap: 20px;\n        padding: 20px 20px;\n        background: white;\n      }\n\n      .granted-dmd {\n        background-color: #51d214;\n        border-color: #51d214;\n      }\n\n      .granted-dmd button {\n        border: 2px solid #51d214;\n      }\n\n      :host([open]) .granted-dmd button {\n        background-color: #51d214;\n      }\n\n      .denied-dmd {\n        background-color: #f90707;\n        border-color: #f90707;\n      }\n\n      .denied-dmd button {\n        border: 2px solid #f90707;\n      }\n\n      :host([open]) .denied-dmd button {\n        background-color: #f90707;\n      }\n\n      .partially-granted-dmd {\n        background-color: #ff7a00;\n        border-color: #ff7a00;\n      }\n\n      .partially-granted-dmd button {\n        border: 2px solid #ff7a00;\n      }\n\n      :host([open]) .partially-granted-dmd button {\n        background-color: #ff7a00;\n      }\n\n      :host([open]) .details-btn {\n        color: white;\n      }\n\n      /* :host([open]) .cancel-btn {\n        background-color: #f90707;\n        color: white;\n      } */\n\n      .status-btn {\n        background: none;\n        padding: 10px 40px;\n        width: 100%;\n        justify-self: center;\n        align-self: flex-end;\n        float: right;\n        font-size: 16px;\n        font-weight: bold;\n      }\n\n      .details-btn {\n        background-color: white;\n        color: black;\n      }\n\n      .cancel-btn {\n        border: 2px solid #f90707;\n      }\n\n      .cancel-confirm-btn {\n        background: none;\n        padding: 10px 40px;\n      }\n\n      #cancel-dmd-btn {\n        border-color: #f90707;\n      }\n\n      .round-bottom {\n        border-bottom-left-radius: 15px;\n        border-bottom-right-radius: 15px;\n      }\n\n      .granted-dmd span {\n        color: white;\n      }\n\n      .denied-dmd span {\n        color: white;\n      }\n\n      .partially-granted-dmd span {\n        color: white;\n      }\n\n      .under-review-dmd {\n        background-color: #e6e6e6;\n        border-color: #e6e6e6;\n      }\n\n      .canceled-dmd {\n        background-color: #ffc1bd;\n        border-color: #f90707;\n      }\n\n      .canceled-dmd .status-type-ctr {\n        border-bottom: 2px solid #f90707;\n      }\n\n      .canceled-dmd .dmd-action-ctr {\n        grid-template-columns: 1fr;\n      }\n\n      #cancel-btns-ctr {\n        display: flex;\n        justify-content: center;\n        column-gap: 10px;\n      }\n\n      .action-title {\n        justify-self: center;\n      }\n\n      .dmd-details-ctr {\n        display: grid;\n        background-color: white;\n        row-gap: 20px;\n        padding: 10px 20px 30px 20px;\n      }\n\n      p {\n        margin: 0;\n        padding: 0;\n      }\n    `,\n  ];\n\n  @property({ attribute: false }) demand: PrivacyResponseItem = {\n    demand_id: '',\n    date: '',\n    requested_action: ACTION.ACCESS,\n    status: DEMAND_STATUS.GRANTED,\n    includes: [],\n    system: '',\n  };\n\n  @property({ attribute: false }) demands: PrivacyResponseItem[] = [];\n\n  @property({ type: Boolean, reflect: true }) open: boolean = false;\n\n  accessResponseTemplate(demand: PrivacyResponseItem) {\n    return html`\n      ${when(\n        [DEMAND_STATUS.GRANTED, DEMAND_STATUS['PARTIALLY-GRANTED']].includes(\n          demand.status\n        ),\n        () => {\n          if (demand.data) {\n            return html`\n              <div>\n                ${msg(\n                  // NOTE: For now, we assume demand.data is a JSON file\n                  html`Click <a href=\"${demand.data}.json\">here</a> to download\n                    your data.`\n                )}\n              </div>\n            `;\n          }\n          return html`${msg(\n            'Obtaining data, please wait and refresh the page later.'\n          )}`;\n        }\n      )}\n    `;\n  }\n\n  deleteResponseTemplate() {\n    return html``;\n  }\n\n  transparencyResponseTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyDcTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(demand.answer as Array<string>, dc => html` ${dc}<br /> `)}\n    `;\n  }\n\n  transparencyDpoTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyKnownTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyLbTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        demand.answer as Array<LegalBase>,\n        lb => html`\n          Type: ${lb.lb_type}<br />\n          Name: ${lb.name}<br />\n          Description: ${lb.description}<br /><br />\n        `\n      )}\n    `;\n  }\n\n  transparencyOrgTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyPolicyTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${demand.answer}\n    `;\n  }\n\n  transparencyPcTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        demand.answer as Array<PROCESSING_CATEGORY>,\n        pc => html` ${pc}<br /> `\n      )}\n    `;\n  }\n\n  transparencyProvTemplate(demand: PrivacyResponseItem) {\n    const answer = demand.answer as {\n      'AFFILIATION.selector_1': Provenance[];\n      'AFFILIATION.MEMBERSHIP.selector_2': Provenance[];\n      'FINANCIAL.BANK-ACCOUNT.selector_3': Provenance[];\n    };\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(Object.entries(demand.answer as Object), ([d, p]) => {\n        const dc = d as DATA_CATEGORY;\n        const provenances = p as Provenance[];\n        return html`\n          ${map(\n            provenances,\n            prov => html`\n              <p>\n                <i>${dc}</i> data:\n                ${choose(prov.provenance, [\n                  [PROVENANCE.ALL, () => msg(html``)],\n                  [\n                    PROVENANCE.USER,\n                    () =>\n                      msg(\n                        html`Provided by a user of the\n                          <i>${prov.system}</i> system`\n                      ),\n                  ],\n                  [\n                    PROVENANCE['USER.DATA-SUBJECT'],\n                    () =>\n                      msg(\n                        html`Provided by you as a user of the\n                          <i>${prov.system}</i> system`\n                      ),\n                  ],\n                  [\n                    PROVENANCE.TRANSFERRED,\n                    () =>\n                      msg(\n                        html`Derived by user actions, extracted from other data,\n                          or inferred by the <i>${prov.system}</i> system`\n                      ),\n                  ],\n                  [\n                    PROVENANCE.DERIVED,\n                    () =>\n                      msg(\n                        html`Obtained by transfer from the\n                          <i>${prov.system}</i> system`\n                      ),\n                  ],\n                ])}\n              </p>\n            `\n          )}\n        `;\n      })}\n      ${map(\n        answer['AFFILIATION.selector_1'],\n        prov => html`\n          Provenance: ${prov.provenance}<br />\n          System: ${prov.system}<br /><br />\n        `\n      )}\n    `;\n  }\n\n  transparencyPurposeTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        demand.answer as Array<PURPOSE>,\n        purpose => html` ${purpose}<br /> `\n      )}\n    `;\n  }\n\n  transparencyRetTemplate(demand: PrivacyResponseItem) {\n    const answer = demand.answer as {\n      NAME: RetentionPolicy[];\n    };\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(\n        answer.NAME,\n        rp =>\n          html`<p>\n            ${getRetentionPolicyString(\n              DATA_CATEGORY.NAME,\n              rp.policy_type,\n              rp.duration,\n              rp.after\n            )}\n          </p>`\n      )}\n    `;\n  }\n\n  transparencyWhereTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(demand.answer as Array<string>, where => html` ${where}<br /> `)}\n    `;\n  }\n\n  transparencyWhoTemplate(demand: PrivacyResponseItem) {\n    return html`\n      <p>\n        <b>Requested info:</b> ${ACTION_DESCRIPTIONS[demand.requested_action]()}\n      </p>\n      ${map(demand.answer as Array<string>, who => html` ${who}<br /> `)}\n    `;\n  }\n\n  handleConfirmCancelClick() {\n    ComputationAPI.getInstance().cancelDemand(this.demand.demand_id);\n  }\n\n  render() {\n    return html`\n      <div\n        class=\"demand-status-ctr ${this.demand.status.toLowerCase()}-dmd border--medium border--rounded\"\n      >\n        <span class=\"status-type-ctr\"><b>${this.demand.status}</b></span>\n        <div class=\"dmd-action-ctr ${this.open ? '' : 'round-bottom'}\">\n          <p class=\"action-title\">\n            <b\n              >${ACTION_TITLES[this.demand.requested_action]()}\n              ${msg('Demand')}</b\n            >\n          </p>\n          ${when(\n            [\n              DEMAND_STATUS.GRANTED,\n              DEMAND_STATUS['PARTIALLY-GRANTED'],\n              DEMAND_STATUS.DENIED,\n            ].includes(this.demand.status),\n            () => html`\n              <button\n                class=\"status-btn ${this.demand.status.toLowerCase()}-${this\n                  .open\n                  ? 'open'\n                  : 'closed'}-btn details-btn btn--curved btn--clickable\"\n                @click=${() => {\n                  this.open = !this.open;\n                }}\n              >\n                ${msg('Details')}\n              </button>\n            `\n          )}\n          ${when(\n            this.demand.status === DEMAND_STATUS['UNDER-REVIEW'],\n            () => html`\n              ${when(\n                this.open,\n                () => html`\n                  <button\n                    class=\"status-btn cancel-btn btn--curved btn--clickable\"\n                    @click=${() => {\n                      this.open = !this.open;\n                    }}\n                    disabled\n                  >\n                    ${msg('Cancel Demand')}\n                  </button>\n                `,\n                () => html`\n                  <button\n                    class=\"status-btn cancel-btn btn--curved btn--clickable\"\n                    @click=${() => {\n                      this.open = !this.open;\n                    }}\n                  >\n                    ${msg('Cancel Demand')}\n                  </button>\n                `\n              )}\n            `\n          )}\n        </div>\n        ${when(\n          this.open,\n          () => html`\n            <div\n              id=\"${this.demand.demand_id}-details-ctr\"\n              class=\"dmd-details-ctr round-bottom\"\n            >\n              ${when(\n                this.demand.status === DEMAND_STATUS['UNDER-REVIEW'],\n                () => html`\n                  <span\n                    >${msg(\n                      html`Do you confirm\n                        <strong>canceling your demand?</strong>`\n                    )}</span\n                  >\n                  <div id=\"cancel-btns-ctr\">\n                    <button\n                      id=\"keep-dmd-btn\"\n                      class=\"cancel-confirm-btn btn--curved btn--clickable\"\n                      @click=${() => {\n                        this.open = !this.open;\n                      }}\n                    >\n                      ${msg('Keep Demand')}\n                    </button>\n                    <button\n                      id=\"cancel-dmd-btn\"\n                      class=\"cancel-confirm-btn btn--curved btn--clickable\"\n                      @click=${this.handleConfirmCancelClick}\n                    >\n                      <strong>${msg('Confirm')}</strong>\n                    </button>\n                  </div>\n                `,\n                () => html`\n                  ${when(\n                    [\n                      DEMAND_STATUS.GRANTED,\n                      DEMAND_STATUS['PARTIALLY-GRANTED'],\n                      DEMAND_STATUS.DENIED,\n                    ].includes(this.demand.status),\n                    () => html`\n                      <strong\n                        >${msg('Your demand has been ')}\n                        ${DEMAND_STATUS_DESCRIPTIONS[\n                          this.demand.status\n                        ]()}.</strong\n                      >\n                    `,\n                    () => html``\n                  )}\n                `\n              )}\n              ${choose(this.demand.requested_action, [\n                [ACTION.ACCESS, () => this.accessResponseTemplate(this.demand)],\n                [\n                  ACTION.TRANSPARENCY,\n                  () => this.transparencyResponseTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.DATA.CATEGORIES'],\n                  () => this.transparencyDcTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.DPO'],\n                  () => this.transparencyDpoTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.KNOWN'],\n                  () => this.transparencyKnownTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.LEGAL.BASES'],\n                  () => this.transparencyLbTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.ORGANIZATION'],\n                  () => this.transparencyOrgTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.POLICY'],\n                  () => this.transparencyPolicyTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.PROCESSING.CATEGORIES'],\n                  () => this.transparencyPcTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.PROVENANCE'],\n                  () => this.transparencyProvTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.PURPOSE'],\n                  () => this.transparencyPurposeTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.RETENTION'],\n                  () => this.transparencyRetTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.WHERE'],\n                  () => this.transparencyWhereTemplate(this.demand),\n                ],\n                [\n                  ACTION['TRANSPARENCY.WHO'],\n                  () => this.transparencyWhoTemplate(this.demand),\n                ],\n              ])}\n              ${when(\n                this.demand.message,\n                () => html`\n                  <p>Included message:</p>\n                  <i>${this.demand.message}</i>\n                `\n              )}\n            </div>\n          `\n        )}\n      </div>\n    `;\n  }\n}\n"],"names":[],"mappings":"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"}