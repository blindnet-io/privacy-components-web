import{html as e,css as t,LitElement as i}from"https://unpkg.com/lit@~2.2.8/index.js?module";import{customElement as a,property as n,state as s}from"https://unpkg.com/lit@~2.2.8/decorators.js?module";import{choose as d}from"https://unpkg.com/lit@~2.2.8/directives/choose.js?module";import{map as o}from"https://unpkg.com/lit@~2.2.8/directives/map.js?module";import{msg as r,localized as l,str as c}from"https://unpkg.com/@lit/localize@~0.11.3/lit-localize.js?module";import{ACTION as p,DATA_CATEGORY as h,PROVENANCE as m,TARGET as u,ComputationAPI as b,DEMAND_STATUS as g,PROCESSING_CATEGORY as v,PURPOSE as E,CoreConfigurationMixin as A}from"https://unpkg.com/@blindnet/core@~0.10.0/dist/index.js?module";import{when as R}from"https://unpkg.com/lit@~2.2.8/directives/when.js?module";function f(e,t,i,a){var n,s=arguments.length,d=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(d=(s<3?n(d):s>3?n(t,i,d):n(t,i))||d);return s>3&&d&&Object.defineProperty(t,i,d),d}var y,C,T,I;!function(e){e[e.MENU=0]="MENU",e[e.EDIT=1]="EDIT",e[e.REVIEW=2]="REVIEW",e[e.REQUESTS=3]="REQUESTS",e[e.SUBMITTED=4]="SUBMITTED",e[e.STATUS=5]="STATUS",e[e.AUTH=6]="AUTH"}(y||(y={})),function(e){e[e.BUILD=0]="BUILD",e[e.REVIEW=1]="REVIEW",e[e.SENT=2]="SENT"}(C||(C={})),function(e){e[e.SELECT_ACTION=0]="SELECT_ACTION",e[e.AUTH=1]="AUTH",e[e.EDIT_OPEN=2]="EDIT_OPEN",e[e.EDIT_COLLAPSED=3]="EDIT_COLLAPSED",e[e.REVIEW=4]="REVIEW"}(T||(T={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.PARTIAL=1]="PARTIAL",e[e.OPEN=2]="OPEN"}(I||(I={}));const N=new Map([[p.ACCESS,!0],[p.DELETE,!0],[p.MODIFY,!1],[p.OBJECT,!1],[p.PORTABILITY,!1],[p.RESTRICT,!1],[p.REVOKE,!0],[p.TRANSPARENCY,!0],[p["TRANSPARENCY.DATA.CATEGORIES"],!0],[p["TRANSPARENCY.DPO"],!0],[p["TRANSPARENCY.KNOWN"],!0],[p["TRANSPARENCY.LEGAL.BASES"],!0],[p["TRANSPARENCY.ORGANIZATION"],!0],[p["TRANSPARENCY.POLICY"],!0],[p["TRANSPARENCY.PROCESSING.CATEGORIES"],!0],[p["TRANSPARENCY.PURPOSE"],!0],[p["TRANSPARENCY.PROVENANCE"],!0],[p["TRANSPARENCY.RETENTION"],!0],[p["TRANSPARENCY.WHERE"],!0],[p["TRANSPARENCY.WHO"],!0],[p["OTHER.DEMAND"],!0]]),x={"access-allowed-data-categories":[h.CONTACT,h.NAME,h.UID,h["OTHER-DATA"]],"delete-allowed-data-categories":[h.CONTACT,h.NAME,h.UID,h["OTHER-DATA"]]},$={ACCESS:()=>r("ACCESS"),DELETE:()=>r("DELETE"),MODIFY:()=>r("MODIFY"),OBJECT:()=>r("OBJECT"),PORTABILITY:()=>r("PORTABILITY"),RESTRICT:()=>r("RESTRICT"),"REVOKE-CONSENT":()=>r("REVOKE-CONSENT"),TRANSPARENCY:()=>r("TRANSPARENCY"),"TRANSPARENCY.DATA-CATEGORIES":()=>r("TRANSPARENCY.DATA-CATEGORIES"),"TRANSPARENCY.DPO":()=>r("TRANSPARENCY.DPO"),"TRANSPARENCY.KNOWN":()=>r("TRANSPARENCY.KNOWN"),"TRANSPARENCY.LEGAL-BASES":()=>r("TRANSPARENCY.LEGAL-BASES"),"TRANSPARENCY.ORGANIZATION":()=>r("TRANSPARENCY.ORGANIZATION"),"TRANSPARENCY.POLICY":()=>r("TRANSPARENCY.POLICY"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>r("TRANSPARENCY.PROCESSING-CATEGORIES"),"TRANSPARENCY.PROVENANCE":()=>r("TRANSPARENCY.PROVENANCE"),"TRANSPARENCY.PURPOSE":()=>r("TRANSPARENCY.PURPOSE"),"TRANSPARENCY.RETENTION":()=>r("TRANSPARENCY.RETENTION"),"TRANSPARENCY.WHERE":()=>r("TRANSPARENCY.WHERE"),"TRANSPARENCY.WHO":()=>r("TRANSPARENCY.WHO"),"OTHER-DEMAND":()=>r("OTHER-DEMAND")},S={ACCESS:()=>r("Access my data"),DELETE:()=>r("Have my data deleted"),MODIFY:()=>r("Modify or complement my data"),OBJECT:()=>r("Object to processing of my data"),PORTABILITY:()=>r("Take my data and have it transfered somewhere else"),RESTRICT:()=>r("Restrict processing of my data to a particular scope"),"REVOKE-CONSENT":()=>r("Revoke previously given consent for data processing"),TRANSPARENCY:()=>r("Demand information related to data processing practices and know if the system has data on me"),"OTHER-DEMAND":()=>r("Do or know something else"),"TRANSPARENCY.DATA-CATEGORIES":()=>r("The categories of the data the organization has on me"),"TRANSPARENCY.DPO":()=>r("The contact details of the data protection officer"),"TRANSPARENCY.KNOWN":()=>r("If the organization has data on me"),"TRANSPARENCY.LEGAL-BASES":()=>r("The legal bases for processing my data (including legitimate interests)"),"TRANSPARENCY.ORGANIZATION":()=>r("The identity and contact details of the organization processing my data"),"TRANSPARENCY.POLICY":()=>r("The policies applied to processing of data concerning me"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>r("The cateogories of processing being done on the data the organization has on me"),"TRANSPARENCY.PROVENANCE":()=>r("The sources that the data concerning me come from"),"TRANSPARENCY.PURPOSE":()=>r("The purpose of the processing of the data the organization has on me"),"TRANSPARENCY.RETENTION":()=>r("For how long the data concerning me kept"),"TRANSPARENCY.WHERE":()=>r("Where the data about me is stored"),"TRANSPARENCY.WHO":()=>r("Who can access the data that the organization has on me")},w={"*":()=>r("All provenances"),USER:()=>r("The data provided by a user of the system (potentially the Data Subject)"),"USER.DATA-SUBJECT":()=>r("The data is provided by the Data Subject"),DERIVED:()=>r("The data derived from user actions, extracted from other data or inferred"),TRANSFERRED:()=>r("The data obtained by transfer from another System")},k={"*":()=>r(""),AFFILIATION:()=>r("affiliation"),"AFFILIATION.MEMBERSHIP":()=>r("affiliation membership"),"AFFILIATION.MEMBERSHIP.UNION":()=>r(""),"AFFILIATION.SCHOOL":()=>r(""),"AFFILIATION.WORKPLACE":()=>r(""),BEHAVIOR:()=>r("behavior"),"BEHAVIOR.ACTIVITY":()=>r(""),"BEHAVIOR.CONNECTION":()=>r(""),"BEHAVIOR.PREFERENCE":()=>r(""),"BEHAVIOR.TELEMETRY":()=>r(""),BIOMETRIC:()=>r("biometric"),CONTACT:()=>r("contact"),"CONTACT.EMAIL":()=>r(""),"CONTACT.ADDRESS":()=>r(""),"CONTACT.PHONE":()=>r(""),DEMOGRAPHIC:()=>r("demographic"),"DEMOGRAPHIC.AGE":()=>r(""),"DEMOGRAPHIC.BELIEFS":()=>r(""),"DEMOGRAPHIC.GENDER":()=>r(""),"DEMOGRAPHIC.ORIGIN":()=>r(""),"DEMOGRAPHIC.RACE":()=>r(""),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>r(""),DEVICE:()=>r("device"),FINANCIAL:()=>r("financial"),"FINANCIAL.BANK-ACCOUNT":()=>r("finacial bank account"),GENETIC:()=>r("genetic"),HEALTH:()=>r("health"),IMAGE:()=>r("image"),LOCATION:()=>r("location"),NAME:()=>r("name"),PROFILING:()=>r("profiling"),RELATIONSHIPS:()=>r("relationships"),UID:()=>r("uid"),"UID.ID":()=>r(""),"UID.IP":()=>r(""),"UID.USER-ACCOUNT":()=>r(""),"UID.SOCIAL-MEDIA":()=>r(""),"OTHER-DATA":()=>r("other data")},D={"*":()=>r(e`<b>ALL information related to data processing practices and know if the organization has data on me</b>`),AFFILIATION:()=>r(e`<b>AFFILIATION data:</b> Groups and Organisations I am linked to through work, studies, or membership`),"AFFILIATION.MEMBERSHIP":()=>r(e``),"AFFILIATION.MEMBERSHIP.UNION":()=>r(e``),"AFFILIATION.SCHOOL":()=>r(e``),"AFFILIATION.WORKPLACE":()=>r(e``),BEHAVIOR:()=>r(e`<b>BEHAVIOR data:</b> Data about my behavior`),"BEHAVIOR.ACTIVITY":()=>r(e``),"BEHAVIOR.CONNECTION":()=>r(e``),"BEHAVIOR.PREFERENCE":()=>r(e``),"BEHAVIOR.TELEMETRY":()=>r(e``),BIOMETRIC:()=>r(e`<b>BIOMETRIC data</b>`),CONTACT:()=>r(e`<b>CONTACT data:</b> Data allowing to contact me`),"CONTACT.EMAIL":()=>r(e``),"CONTACT.ADDRESS":()=>r(e``),"CONTACT.PHONE":()=>r(e``),DEMOGRAPHIC:()=>r(e`<b>DEMOGRAPHIC data:</b> All information allowing to class me in a demographic category`),"DEMOGRAPHIC.AGE":()=>r(e``),"DEMOGRAPHIC.BELIEFS":()=>r(e``),"DEMOGRAPHIC.GENDER":()=>r(e``),"DEMOGRAPHIC.ORIGIN":()=>r(e``),"DEMOGRAPHIC.RACE":()=>r(e``),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>r(e``),DEVICE:()=>r(e`<b>DEVICE data:</b> Data about the device I used`),FINANCIAL:()=>r(e`<b>FINANCIAL data:</b> Payment data, financial history and data about my financial situation`),"FINANCIAL.BANK-ACCOUNT":()=>r(e``),GENETIC:()=>r(e`<b>GENETIC data</b>`),HEALTH:()=>r(e`<b>HEALTH data:</b> Data about my health`),IMAGE:()=>r(e`<b>IMAGE data:</b> Any graphic representation (e.g., image, video) of me`),LOCATION:()=>r(e`<b>LOCATION data:</b> Geographic location`),NAME:()=>r(e`<b>NAME data:</b> First names, last names, nicknames, and other names`),PROFILING:()=>r(e`<b>PROFILING data:</b> Any data establishing a degree of similarity of with others (e.g., clusters, user-profiles)`),RELATIONSHIPS:()=>r(e`<b>RELATIONSHIPS data:</b> Data about relationships I have with others, social activity and interaction`),UID:()=>r(e`<b>UID data:</b> Any data that uniquely identifies me`),"UID.ID":()=>r(e``),"UID.IP":()=>r(e``),"UID.USER-ACCOUNT":()=>r(e``),"UID.SOCIAL-MEDIA":()=>r(e``),"OTHER-DATA":()=>r(e`<b>OTHER DATA:</b> Any other categories or forms of data`)},O={"*":()=>r(e`All targets`),SYSTEM:()=>r(e`This system`),ORGANIZATION:()=>r(e`This system and all systems within this organization`),PARTNERS:()=>r(e`This system, all systems within this organization, and all partners systems where data has been <b>shared or obtained</b>`),"PARTNERS.DOWNWARD":()=>r(e`This system, all systems within this organization, and all partners systems with which data has been <b>shared</b>`),"PARTNERS.UPWARD":()=>r(e`This system, all systems within this organization, and all partners systems from which data has been <b>obtained</b>`)},P={IN_PROCESSING:()=>r(e`In processing`),PARTIALLY_COMPLETED:()=>r(e`Partially completed`),COMPLETED:()=>r(e`Completed`),CANCELED:()=>r(e`Canceled`)},_={GRANTED:()=>r("granted"),DENIED:()=>r("denied"),"PARTIALLY-GRANTED":()=>r("partially granted"),"UNDER-REVIEW":()=>r("under review"),CANCELED:()=>r("canceled")},L={"NO-LONGER-THAN":()=>r("no longer than"),"NO-LESS-THAN":()=>r("no less than")},q={"CAPTURE-DATE":()=>r("capture date"),"RELATIONSHIP-START":()=>r("relationship start"),"RELATIONSHIP-END":()=>r("relationship end"),"SERVICE-START":()=>r("service start"),"SERVICE-END":()=>r("service end")};function M(){return Object.values(p).filter((e=>!e.includes("TRANSPARENCY.")))}function U(){return Object.values(h).filter((e=>!e.includes(".")))}function Y(e){const t=new URL(document.URL);t.searchParams.delete(e),window.history.pushState({},"",t)}const G=t`.border--light{border:1px solid;border-color:var(--prci-border-light-color,#c4c4c4)}.border--medium{border:1px solid;border-color:var(--prci-border-medium-color,#5b5b5b)}.border--dark{border:1px solid;border-color:var(--prci-border-dark-color,#000)}.border--rounded{border-radius:10px}.border--thin{border-width:var(--prci-border-thin,1px)}.border--thick{border-width:var(--prci-border-thick,2px)}button{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px}.svg-btn{border:none;padding:0;margin:0;background:0 0}.link-btn{display:grid;grid-auto-flow:column;font-size:16px;column-gap:7.5px;background:0 0;border:none;width:fit-content;align-items:center;padding:0}.nav-btn{height:50px;background-color:#18a0fb;border-width:0;border-radius:6px;font-size:18px;color:#fff;margin:0 0 -200px 0;padding:0 25px}.btn--centered{justify-self:center;justify-content:center}.btn--curved{border-radius:8px}.btn--clickable{box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}.btn--clickable:not([disabled]):hover{transform:translateY(-2px);transition:.2s;box-shadow:0 7px 10px 0 rgba(0,0,0,.3),0 4px 4px rgba(0,0,0,.2),0 6px 8px rgba(0,0,0,.2),0 10px 16px rgba(0,0,0,.2)}.btn--clickable:not([disabled]):active{transform:translateY(2px);transition:.2s;box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}p{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px;padding:0;margin:0}span{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px}textarea{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px;background:#f8f8fc;border:1px solid #e5e5e5;border-radius:8px}.text--underline{text-decoration:underline}.text--italic{font-style:italic}.text--center-vertical{align-items:center;justify-content:center}.view-ctr{padding:60px}.provenance-restriction{border:none;padding:0;margin:0}.provenance-restriction input{margin:20px 0 20px 30px}.provenance-restriction input:nth-last-child(3){margin:20px 0 0 30px}.provenance-restriction input:first-child{margin:35px 0 20px 30px}.date-restriction{display:grid;row-gap:35px}.date-restriction div{padding:0 0 0 30px}`;let H=class extends i{render(){return e``}};H.styles=t``,H=f([a("frequent-requests-menu")],H);const B=new URL(new URL("assets/edit-fill.svg",import.meta.url).href,import.meta.url).href,F=new URL(new URL("assets/delete.svg",import.meta.url).href,import.meta.url).href;let j=class extends i{constructor(){super(...arguments),this.demandGroupId="",this.demands=[],this.demand={action:p.ACCESS},this.confirmDelete=!1,this.target=u.PARTNERS,this._action=p.ACCESS}getAccessReviewTemplate(){var t,i,a,n,s,d;const l=null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i?void 0:i.from,c=null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n?void 0:n.to,p=null===(s=this.demand.restrictions)||void 0===s?void 0:s.provenance,b=null===(d=this.demand.restrictions)||void 0===d?void 0:d.privacy_scope;return e`
      <h4>${r("I want to access:")}</h4>
      <ul id="access-review-list" class="review-list">
        ${R(b&&Object.values(h).filter((e=>!e.includes(".")&&e!==h.ALL)).every((e=>b.map((e=>e.dc)).includes(e))),(()=>e`
            <li>${D[h.ALL]()}</li>
          `),(()=>{var t;return e`
            ${o(null===(t=this.demand.restrictions)||void 0===t?void 0:t.privacy_scope,(t=>e`<li>${D[t.dc]()}</li> `))}
          `}))}
      </ul>
      ${R(l||c,(()=>e`<p>${this.getDateRangeReviewTemplate(l,c)}</p>`))}
      ${R((null==p?void 0:p.term)!==m.ALL,(()=>e`
          <p>
            ${r("For:")} <b>${w[p.term]()}</b>
          </p>
        `))}
      ${R((null==p?void 0:p.target)!==u.SYSTEM,(()=>e`
          <p>
            ${r("From:")} <b>${O[p.target]()}</b>
          </p>
        `))}
      ${R(this.demand.message,(()=>e`
          <h4>${r("Plus additional info:")}</h4>
          <span class="extra-msg-txt"><i>${this.demand.message}</i></span>
        `))}
    `}getDeleteReviewTemplate(){var t,i,a,n,s,d;const l=null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i?void 0:i.from,c=null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n?void 0:n.to,p=null===(s=this.demand.restrictions)||void 0===s?void 0:s.provenance,b=null===(d=this.demand.restrictions)||void 0===d?void 0:d.privacy_scope;return e`
      <h4>${r("I want to delete:")}</h4>
      <ul id="delete-review-list" class="review-list">
        ${R(b&&Object.values(h).filter((e=>!e.includes(".")&&e!==h.ALL)).every((e=>b.map((e=>e.dc)).includes(e))),(()=>e`
            <li>${D[h.ALL]()}</li>
          `),(()=>{var t;return e`
            ${o(null===(t=this.demand.restrictions)||void 0===t?void 0:t.privacy_scope,(t=>e`<li>${D[t.dc]()}</li> `))}
          `}))}
      </ul>
      ${R(l||c,(()=>e`<p>${this.getDateRangeReviewTemplate(l,c)}</p>`))}
      ${R((null==p?void 0:p.term)!==m.ALL,(()=>e`
          <p>
            ${r("For:")} <b>${w[p.term]()}</b>
          </p>
        `))}
      ${R((null==p?void 0:p.target)!==u.SYSTEM,(()=>e`
          <p>
            ${r("From:")} <b>${O[p.target]()}</b>
          </p>
        `))}
      ${R(this.demand.message,(()=>e`
          <h4>${r("Plus additional info:")}</h4>
          <span class="extra-msg-txt"><i>${this.demand.message}</i></span>
        `))}
    `}getModifyReviewTemplate(){return e``}getObjectReviewTemplate(){return e``}getPortabilityReviewTemplate(){return e``}getRestrictReviewTemplate(){return e``}getRevokeReviewTemplate(){return e`
      <h4>${r("I no longer consent to:")}</h4>
      <ul class="review-list">
        ${o(this.demands,(()=>e`
            <li>
              The storage and processing of my data for the purposes of the
              prize draw
            </li>
          `))}
      </ul>
      ${R(this.demands[0].message,(()=>e`
          <span>${r("Plus additional info:")}</span>
          <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span>
        `))}
    `}getTransparencyReviewTemplate(){var t;const i=null===(t=this.demands[0].restrictions)||void 0===t?void 0:t.provenance;return e`
      <h4>${r("I want to know:")}</h4>
      <ul id="transparency-review-list" class="review-list">
        ${o(this.demands,(t=>e` <li><b>${S[t.action]()}</b></li> `))}
      </ul>
      ${R((null==i?void 0:i.term)!==m.ALL,(()=>e`
          <p>
            ${r("For:")} <b>${w[i.term]()}</b>
          </p>
        `))}
      ${R(this.demands[0].message,(()=>e`
          <h4>${r("Plus additional info:")}</h4>
          <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span>
        `))}
    `}getOtherDemandReviewTemplate(){return e``}getDateRangeReviewTemplate(t,i){return t&&i?e`${r("From")} <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b> to
        <b>${null==i?void 0:i.toLocaleDateString("en-GB")}</b>`:t?e`${r("Since")} <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:i?e`${r("Up to")} <b>${null==i?void 0:i.toLocaleDateString("en-GB")}</b>`:e``}handleEditClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.EDIT,newAction:this.demands[0].action.includes("TRANSPARENCY")?p.TRANSPARENCY:this.demands[0].action,demandGroupId:this.demandGroupId}}))}handleDeleteClick(){this.confirmDelete=!0}handleConfirmDeleteClick(){this.dispatchEvent(new CustomEvent("demand-delete",{bubbles:!0,composed:!0,detail:{demandGroupId:this.demandGroupId}})),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.MENU}}))}handleCancelDeleteClick(){this.confirmDelete=!1}handleTargetClick(e){const{id:t}=e.target;this.target=t,this.dispatchEvent(new CustomEvent("request-target-change",{bubbles:!0,composed:!0,detail:{id:t}}))}handleSubmitClick(){this.dispatchEvent(new Event("submit-request",{bubbles:!0,composed:!0}))}willUpdate(e){e.has("demands")&&this.demands.length>0&&(this._action=this.demands[0].action,this._action.includes("TRANSPARENCY")?this._action=p.TRANSPARENCY:[this.demand]=this.demands)}render(){return e`
      <h2><b>${r("My demand(s):")}</b></h2>

      <div class="dmd-review-ctr border--light border--rounded">
        <div id="review-heading-row">
          <h3 id="review-action-heading">${$[this._action]()} Demand</h3>
          <div id="review-btns">
            <button class='svg-btn' @click=${this.handleEditClick}>
              <img src=${B} alt='edit'/>
            </button>
            <button class='svg-btn' @click=${this.handleDeleteClick}>
              <img src=${F} alt='delete'/>
            </button>
          </div>
        </div>
        <div id="review-content">
          ${d(this._action,[[p.ACCESS,()=>this.getAccessReviewTemplate()],[p.DELETE,()=>this.getDeleteReviewTemplate()],[p.MODIFY,()=>this.getModifyReviewTemplate()],[p.OBJECT,()=>this.getObjectReviewTemplate()],[p.PORTABILITY,()=>this.getPortabilityReviewTemplate()],[p.RESTRICT,()=>this.getRestrictReviewTemplate()],[p.REVOKE,()=>this.getRevokeReviewTemplate()],[p.TRANSPARENCY,()=>this.getTransparencyReviewTemplate()],[p["OTHER.DEMAND"],()=>this.getOtherDemandReviewTemplate()]])}
        </div>
        ${R(this.confirmDelete,(()=>e`
            <div id="delete-confirm-popup" class="border--rounded">
              <span class="popup-txt"
                >${r("You are about to remove a demand")}</span
              >
              <span class="popup-txt"
                >${r(e`Do you confirm <b>deleting this demand</b>?`)}</span
              >
              <div id="popup-btns-ctr">
                <button
                  id="confirm-delete-btn"
                  class="btn--curved popup-btn"
                  @click=${this.handleConfirmDeleteClick}
                >
                  ${r("Delete")}
                </button>
                <button
                  id="cancel-delete-btn"
                  class="btn--curved popup-btn"
                  @click=${this.handleCancelDeleteClick}
                >
                  ${r("Cancel")}
                </button>
              </div>
            </div>
          `))}
        </div>

      </div>
      <!-- Uncomment when supporting multiple demands -->
      <!-- <div id="new-dmd-ctr" class="border--medium border--rounded">
        <span><b>${r("I want to add another demand")}</b></span>
        <button class="svg-btn">
          <img src="packages/prci/src/assets/icons/add-circle.svg" alt="add icon"></img>
        </button>
      </div> -->
      <!-- Submit button -->
      <slotted-dropdown
        id='request-settings'
        .header=${r("Privacy Request Advanced settings")}
        include-buttons
      >
        <div>
          <span> ${r("I address my Privacy Request to:")} </span>
          <fieldset class="provenance-restriction">
            ${Object.values(u).filter((e=>e!==u.ALL)).map((t=>e`
                <input
                  id=${t}
                  name='provenance-target'
                  type='radio'
                  ?checked=${this.target===t}
                  @click=${this.handleTargetClick}>
                </input>
                <label for=${t}>${O[t]()}</label><br/>
              `))}
          </fieldset>
        </div>
      </slotted-dropdown>
      <button
        id="submit-btn"
        class="nav-btn btn--centered  btn--clickable"
        @click=${this.handleSubmitClick}
      >
        ${r("Submit Privacy Request")}
      </button>
    `}};j.styles=[G,t`
      :host {
        display: grid;
      }

      :host([confirm-delete]) .dmd-review-ctr {
        background: #c4c4c4;
        opacity: 0.7;
      }

      #review-heading-row {
        display: grid;
        grid-area: 1/1/2/2;
        grid-template-columns: repeat(2, 1fr);
        z-index: 2;
      }

      .dmd-review-ctr {
        display: grid;
        padding: 40px;
      }

      #review-btns {
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        column-gap: 20px;
      }

      .review-btn {
        width: 24px;
        height: 24px;
      }

      #review-content {
        display: grid;
        grid-area: 2/1/3/2;
        z-index: 1;
      }

      .extra-msg-txt {
        padding: 0px 0px 0px 20px;
      }

      .review-list li:not(:last-child) {
        margin: 0px 0px 20px 0px;
      }

      .review-list {
        margin: 0px;
      }

      #request-settings {
        margin: 20px 0px 0px 0px;
      }

      #delete-confirm-popup {
        display: grid;
        row-gap: 20px;
        background: white;
        padding: 40px;
        z-index: 2;
        grid-area: 1/1/3/2;
        justify-self: center;
        align-self: center;
        width: 40%;
        height: 150px;
      }

      .popup-txt {
        text-align: center;
      }

      #popup-btns-ctr {
        display: flex;
        column-gap: 50px;
        justify-content: center;
      }

      .popup-btn {
        min-width: 30%;
        max-width: 200px;
        /* width: 30%; */
        font-size: 18px;
      }

      #confirm-delete-btn {
        background: red;
        color: white;
        border: none;
      }

      #cancel-delete-btn {
        background: white;
        color: black;
        border: 2px solid #18a0fb;
      }

      #submit-btn {
        transform: translateY(35px);
      }

      h2,
      h3 {
        margin-top: 0px;
      }

      h4 {
        font-weight: normal;
      }
    `],f([n({attribute:!1})],j.prototype,"demandGroupId",void 0),f([n({attribute:!1})],j.prototype,"demands",void 0),f([n({attribute:!1})],j.prototype,"demand",void 0),f([n({type:Boolean,reflect:!0,attribute:"confirm-delete"})],j.prototype,"confirmDelete",void 0),f([n({attribute:!1})],j.prototype,"target",void 0),f([s()],j.prototype,"_action",void 0),j=f([a("review-view")],j);let z=class extends i{constructor(){super(...arguments),this.action=p.ACCESS,this.disabled=!1}handleClick(){const e=new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.EDIT,newAction:this.action}});this.dispatchEvent(e)}render(){return e`<button class="action-button btn--clickable" @click="${this.handleClick}" ?disabled="${this.disabled}"><strong>${$[this.action]()}:</strong> ${S[this.action]()}</button>`}};z.styles=[G,t`.action-button{border-radius:15px;border:.5px solid #5b5b5b;background-color:#fafafa;padding:10px 40px;height:120px;width:100%;max-width:400px;text-align:left;overflow:hidden;text-overflow:ellipsis}.btn-txt{overflow:hidden}.bolder{font-weight:700}`],f([n({attribute:!1})],z.prototype,"action",void 0),f([n({type:Boolean})],z.prototype,"disabled",void 0),z=f([a("action-item"),l()],z);const V=new URL(new URL("assets/arrow-forward.svg",import.meta.url).href,import.meta.url).href;let W=class extends i{constructor(){super(...arguments),this.prompt="Type of demand I want to submit:",this.includedActions=[]}handleRequestsClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.REQUESTS}}))}render(){return e`<div class="view-ctr border--medium border--rounded"><div class="prompt-heading"><b>${this.prompt}</b></div><div class="actions-container">${this.includedActions.filter((e=>e!==p["OTHER.DEMAND"])).map((t=>e`<action-item .action="${t}" ?disabled="${!N.get(t)}"></action-item>`))}</div></div><div id="below-menu-btns-ctr"><button id="other-dmd-btn" class="link-btn text--underline">${r("Click here if you want to make some other demand (please note that it might take longer to be answered)")}</button> <button id="requests-btn" class="btn--curved border--medium border--rounded btn--clickable" @click="${this.handleRequestsClick}"><span>${r("Access my submitted Privacy Requests")}</span> <img src="${V}" alt=""></button></div>`}};W.styles=[G,t`.actions-container{display:grid;grid-template-columns:repeat(3,1fr);gap:50px}.prompt-heading{font-size:16px;text-align:left;padding:0;margin:0 0 35px 0}#other-dmd-btn{margin:20px 0 0 0;justify-self:right;color:#5b5b5b}#below-menu-btns-ctr{display:grid;row-gap:50px;max-width:1170px}#requests-btn{display:flex;justify-content:center;justify-self:center;align-items:center;column-gap:20px;background:0 0;padding:20px;width:35%;font-size:18px;border-radius:15px}#requests-btn img{float:right}`],f([n({type:String})],W.prototype,"prompt",void 0),f([n({attribute:!1})],W.prototype,"includedActions",void 0),W=f([l(),a("action-menu-view")],W);let K=class extends i{constructor(){super(...arguments),this._requests=[]}connectedCallback(){super.connectedCallback(),b.getInstance().getRequestHistory().then((e=>{this._requests=e.history}))}handleRequestClick(e){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.STATUS,requestId:e.target.id}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.MENU}}))}render(){return e`<div id="table-ctr"><div id="requests-list"><div class="list__row--header"><span><b>${r("Created")}</b></span> <span><b>${r("Status")}</b></span> <span><b>${r("Demands")}</b></span> <span></span></div>${o(this._requests,(t=>e`<div class="list__row"><span class="list__field">${new Date(t.date).toLocaleString()}</span> <span class="list__field">${P[t.status]()}</span> <span class="list__field">${t.demands}</span> <button id="${t.id}" class="link-btn dark-font text--underline list__field" @click="${this.handleRequestClick}">${r("See Details")}</button></div>`))}</div></div><div id="new-request-ctr"><button id="new-request-btn" class="link-btn dark-font text--underline" @click="${this.handleNewRequestClick}">${r("Submit a new Privacy Request")}</button></div>`}};K.styles=[G,t`:host{display:grid;max-width:1000px;margin:auto;row-gap:40px;justify-items:center}#table-ctr{width:100%}#requests-list{display:grid;row-gap:30px}.list__row--header{display:grid;padding:0 10px;grid-column-gap:5px;grid-template-columns:3fr 2fr 1fr 2fr;text-align:center}.list__row{display:grid;grid-template-columns:3fr 2fr 1fr 2fr;grid-column-gap:5px;padding:20px 10px;border:2px solid #5b5b5b;border-radius:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.list__field{display:inline-flex;justify-items:center;text-align:center;justify-self:center;align-items:center}.list__field:last-child{padding:0 20px 0 0}#new-request-btn{font-size:18px}`],f([s()],K.prototype,"_requests",void 0),K=f([a("requests-view")],K);let J=class extends i{constructor(){super(...arguments),this.demand={demand_id:"",date:"",requested_action:p.ACCESS,status:g.GRANTED,includes:[],system:""},this.demands=[],this.open=!1}accessResponseTemplate(t){return e`${R([g.GRANTED,g["PARTIALLY-GRANTED"]].includes(t.status),(()=>t.data?e`<div>${r(e`Click <a href="${t.data}.json">here</a> to download your data.`)}</div>`:e`${r("Obtaining data, please wait and refresh the page later.")}`))}`}deleteResponseTemplate(){return e``}transparencyResponseTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${t.answer}`}transparencyDcTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(t.answer,(t=>e`${t}<br>`))}`}transparencyDpoTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${t.answer}`}transparencyKnownTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${t.answer}`}transparencyLbTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(t.answer,(t=>e`Type: ${t.lb_type}<br>Name: ${t.name}<br>Description: ${t.description}<br><br>`))}`}transparencyOrgTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${t.answer}`}transparencyPolicyTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${t.answer}`}transparencyPcTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(t.answer,(t=>e`${t}<br>`))}`}transparencyProvTemplate(t){const i=t.answer;return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(Object.entries(t.answer),(([t,i])=>{const a=t;return e`${o(i,(t=>e`<p><i>${a}</i> data: ${d(t.provenance,[[m.ALL,()=>r(e``)],[m.USER,()=>r(e`Provided by a user of the <i>${t.system}</i> system`)],[m["USER.DATA-SUBJECT"],()=>r(e`Provided by you as a user of the <i>${t.system}</i> system`)],[m.TRANSFERRED,()=>r(e`Derived by user actions, extracted from other data, or inferred by the <i>${t.system}</i> system`)],[m.DERIVED,()=>r(e`Obtained by transfer from the <i>${t.system}</i> system`)]])}</p>`))}`}))} ${o(i["AFFILIATION.selector_1"],(t=>e`Provenance: ${t.provenance}<br>System: ${t.system}<br><br>`))}`}transparencyPurposeTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(t.answer,(t=>e`${t}<br>`))}`}transparencyRetTemplate(t){const i=t.answer;return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(i.NAME,(t=>{return e`<p>${i=h.NAME,a=t.policy_type,n=t.duration,s=t.after,e`<i>${k[i]().toLocaleUpperCase()}</i> data is kept <i>${L[a]().toLocaleUpperCase()}</i> <i>${n}</i> months after <i>${q[s]().toLocaleUpperCase()}</i>`}</p>`;var i,a,n,s}))}`}transparencyWhereTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(t.answer,(t=>e`${t}<br>`))}`}transparencyWhoTemplate(t){return e`<p><b>Requested info:</b> ${S[t.requested_action]()}</p>${o(t.answer,(t=>e`${t}<br>`))}`}handleConfirmCancelClick(){b.getInstance().cancelDemand(this.demand.demand_id)}render(){return e`<div class="demand-status-ctr ${this.demand.status.toLowerCase()}-dmd border--medium border--rounded"><span class="status-type-ctr"><b>${this.demand.status}</b></span><div class="dmd-action-ctr ${this.open?"":"round-bottom"}"><p class="action-title"><b>${$[this.demand.requested_action]()} ${r("Demand")}</b></p>${R([g.GRANTED,g["PARTIALLY-GRANTED"],g.DENIED].includes(this.demand.status),(()=>e`<button class="status-btn ${this.demand.status.toLowerCase()}-${this.open?"open":"closed"}-btn details-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}">${r("Details")}</button>`))} ${R(this.demand.status===g["UNDER-REVIEW"],(()=>e`${R(this.open,(()=>e`<button class="status-btn cancel-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}" disabled="disabled">${r("Cancel Demand")}</button>`),(()=>e`<button class="status-btn cancel-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}">${r("Cancel Demand")}</button>`))}`))}</div>${R(this.open,(()=>e`<div id="${this.demand.demand_id}-details-ctr" class="dmd-details-ctr round-bottom">${R(this.demand.status===g["UNDER-REVIEW"],(()=>e`<span>${r(e`Do you confirm <strong>canceling your demand?</strong>`)}</span><div id="cancel-btns-ctr"><button id="keep-dmd-btn" class="cancel-confirm-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}">${r("Keep Demand")}</button> <button id="cancel-dmd-btn" class="cancel-confirm-btn btn--curved btn--clickable" @click="${this.handleConfirmCancelClick}"><strong>${r("Confirm")}</strong></button></div>`),(()=>e`${R([g.GRANTED,g["PARTIALLY-GRANTED"],g.DENIED].includes(this.demand.status),(()=>e`<strong>${r("Your demand has been ")} ${_[this.demand.status]()}.</strong>`),(()=>e``))}`))} ${d(this.demand.requested_action,[[p.ACCESS,()=>this.accessResponseTemplate(this.demand)],[p.TRANSPARENCY,()=>this.transparencyResponseTemplate(this.demand)],[p["TRANSPARENCY.DATA.CATEGORIES"],()=>this.transparencyDcTemplate(this.demand)],[p["TRANSPARENCY.DPO"],()=>this.transparencyDpoTemplate(this.demand)],[p["TRANSPARENCY.KNOWN"],()=>this.transparencyKnownTemplate(this.demand)],[p["TRANSPARENCY.LEGAL.BASES"],()=>this.transparencyLbTemplate(this.demand)],[p["TRANSPARENCY.ORGANIZATION"],()=>this.transparencyOrgTemplate(this.demand)],[p["TRANSPARENCY.POLICY"],()=>this.transparencyPolicyTemplate(this.demand)],[p["TRANSPARENCY.PROCESSING.CATEGORIES"],()=>this.transparencyPcTemplate(this.demand)],[p["TRANSPARENCY.PROVENANCE"],()=>this.transparencyProvTemplate(this.demand)],[p["TRANSPARENCY.PURPOSE"],()=>this.transparencyPurposeTemplate(this.demand)],[p["TRANSPARENCY.RETENTION"],()=>this.transparencyRetTemplate(this.demand)],[p["TRANSPARENCY.WHERE"],()=>this.transparencyWhereTemplate(this.demand)],[p["TRANSPARENCY.WHO"],()=>this.transparencyWhoTemplate(this.demand)]])} ${R(this.demand.message,(()=>e`<p>Included message:</p><i>${this.demand.message}</i>`))}</div>`))}</div>`}};J.styles=[G,t`.demand-status-ctr{display:flex;flex-direction:column;border-radius:15px;border:2px solid #e6e6e6;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.status-type-ctr{font-size:16px}.demand-status-ctr span{padding:10px 0}.dmd-action-ctr{display:grid;grid-template-columns:repeat(2,1fr);align-items:center;justify-items:center;column-gap:20px;padding:20px 20px;background:#fff}.granted-dmd{background-color:#51d214;border-color:#51d214}.granted-dmd button{border:2px solid #51d214}:host([open]) .granted-dmd button{background-color:#51d214}.denied-dmd{background-color:#f90707;border-color:#f90707}.denied-dmd button{border:2px solid #f90707}:host([open]) .denied-dmd button{background-color:#f90707}.partially-granted-dmd{background-color:#ff7a00;border-color:#ff7a00}.partially-granted-dmd button{border:2px solid #ff7a00}:host([open]) .partially-granted-dmd button{background-color:#ff7a00}:host([open]) .details-btn{color:#fff}.status-btn{background:0 0;padding:10px 40px;width:100%;justify-self:center;align-self:flex-end;float:right;font-size:16px;font-weight:700}.details-btn{background-color:#fff;color:#000}.cancel-btn{border:2px solid #f90707}.cancel-confirm-btn{background:0 0;padding:10px 40px}#cancel-dmd-btn{border-color:#f90707}.round-bottom{border-bottom-left-radius:15px;border-bottom-right-radius:15px}.granted-dmd span{color:#fff}.denied-dmd span{color:#fff}.partially-granted-dmd span{color:#fff}.under-review-dmd{background-color:#e6e6e6;border-color:#e6e6e6}.canceled-dmd{background-color:#ffc1bd;border-color:#f90707}.canceled-dmd .status-type-ctr{border-bottom:2px solid #f90707}.canceled-dmd .dmd-action-ctr{grid-template-columns:1fr}#cancel-btns-ctr{display:flex;justify-content:center;column-gap:10px}.action-title{justify-self:center}.dmd-details-ctr{display:grid;background-color:#fff;row-gap:20px;padding:10px 20px 30px 20px}p{margin:0;padding:0}`],f([n({attribute:!1})],J.prototype,"demand",void 0),f([n({attribute:!1})],J.prototype,"demands",void 0),f([n({type:Boolean,reflect:!0})],J.prototype,"open",void 0),J=f([a("status-view-item")],J);const Q=new URL(new URL("assets/link.svg",import.meta.url).href,import.meta.url).href;let Z=class extends i{constructor(){super(...arguments),this.requestId="",this.newRequest=!1,this._requestDate=new Date,this._completedDemands=[],this._processingDemands=[],this._cancelledDemands=[],this._intervalId=void 0}reloadRequest(){b.getInstance().hasApiToken()?b.getInstance().getRequest(this.requestId).then((e=>{e.length>0&&(this._requestDate=new Date(e[0].date),this._completedDemands=e.filter((e=>[g.GRANTED,g["PARTIALLY-GRANTED"],g.DENIED].includes(e.status))),this._processingDemands=e.filter((e=>e.status===g["UNDER-REVIEW"])),this._cancelledDemands=e.filter((e=>e.status===g.CANCELED))),0===this._processingDemands.length&&this._intervalId&&!this._completedDemands.some((e=>e.requested_action===p.ACCESS&&!e.data))?(clearInterval(this._intervalId),this._intervalId=void 0):this._intervalId||0===this._processingDemands.length||(this._intervalId=setInterval((()=>this.reloadRequest()),3e3))})):this._intervalId=setInterval((()=>this.reloadRequest()),3e3)}willUpdate(e){e.has("requestId")&&""!==this.requestId&&this.reloadRequest()}handleCopyIdClick(){navigator.clipboard.writeText(this.requestId)}handleCopyLinkClick(){navigator.clipboard.writeText(function(e){const t=new URL(document.URL);return t.searchParams.set("requestId",e),t}(this.requestId).toString())}handleBackClick(){Y("requestId"),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.REQUESTS}}))}handleNewRequestClick(){Y("requestId"),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.MENU}}))}disconnectedCallback(){this._intervalId&&clearInterval(this._intervalId)}render(){return e`${R(this._processingDemands.length>0,(()=>e`<p>${r(c`Your Privacy Request, sent on
              ${this._requestDate.toLocaleDateString("en-gb")}, is currently
              being processed.`)}</p>${R(this._completedDemands.length>0,(()=>e`<div class="req-progress-ctr"><p>${r("At the moment:")}</p><p><b>${r(e`${this._completedDemands.length} demand(s) have been completed${R(this._cancelledDemands.length>0,(()=>e`and ${this._cancelledDemands.length} demand(s) have been cancelled`))}`)}</b></p><p>${r(e`${this._processingDemands.length} demand(s) are being processed`)}</p></div>`))}`),(()=>e`<p>${r(e`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, has been processed.`)}</p>`))}<div><button class="svg-btn" @click="${this.handleCopyLinkClick}"><img src="${Q}" alt="Copy status page link">  <span class="text--underline">${r("Copy link to this page")}</span></button></div>${R(this._completedDemands.length>0,(()=>e`<div id="completed-dmds-ctr" class="dmds-ctr border--medium border--rounded"><span><b>${r("Completed Demand(s)")}</b></span> ${o(this._completedDemands,(t=>e`<status-view-item .demand="${t}"></status-view-item>`))}</div>`))} ${R(this._processingDemands.length>0,(()=>e`<div id="processing-dmds-ctr" class="dmds-ctr border--medium border--rounded"><span><b>${r("Processing Demand(s)")}</b></span> ${o(this._processingDemands,(t=>e`<status-view-item .demand="${t}"></status-view-item>`))}</div>`))} ${R(this._cancelledDemands.length>0,(()=>e`<div id="cancelled-dmds-ctr" class="dmds-ctr border--medium border--rounded"><span><b>${r("Cancelled Demand(s)")}</b></span> ${o(this._cancelledDemands,(t=>e`<status-view-item .demand="${t}"></status-view-item>`))}</div>`))}<div id="nav-btns-ctr"><button class="status-nav-btn link-btn dark-font text--underline" @click="${this.handleBackClick}">${r("Back to my Requests")}</button> <button class="status-nav-btn link-btn dark-font text--underline" @click="${this.handleNewRequestClick}">${r("Submit a new Privacy Request")}</button></div>`}};Z.styles=[G,t`:host{display:grid;row-gap:20px;max-width:900px;text-align:center;margin:auto}.req-progress-ctr{display:grid;row-gap:10px}.dmds-ctr{display:grid;row-gap:20px;padding:30px 40px 40px 40px}.dmds-ctr span{padding:0 0 20px 0}#completed-dmds-ctr{border:1px solid #18a0fb;background:rgba(24,160,251,.11)}#nav-btns-ctr{display:flex;column-gap:20px;justify-content:center;justify-items:center}.status-nav-btn{font-size:18px}p{display:flex;align-items:center;justify-content:center}button{display:inline-flex;align-items:center}`],f([n({type:String,attribute:"request-id"})],Z.prototype,"requestId",void 0),f([n({type:Boolean})],Z.prototype,"newRequest",void 0),f([s()],Z.prototype,"_requestDate",void 0),f([s()],Z.prototype,"_completedDemands",void 0),f([s()],Z.prototype,"_processingDemands",void 0),f([s()],Z.prototype,"_cancelledDemands",void 0),f([s()],Z.prototype,"_intervalId",void 0),Z=f([a("status-view")],Z);class X extends i{constructor(){super(...arguments),this.demandState=T.EDIT_OPEN,this.demandGroupId=self.crypto.randomUUID(),this.demands=[]}setDemand(e){this.demands.push(e)}deleteDemand(e){this.demands.splice(this.demands.findIndex((t=>t.action===e)),1)}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set-multiple",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demands:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.MENU}}))}handleAddClick(){this.validate()&&(this.demands=this.buildDemands(),this.addToPrivacyRequest(this.demandGroupId,this.demands),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.REVIEW}})))}render(){return e`${d(this.demandState,[[T.EDIT_OPEN,()=>this.getFormTemplate()]])}<div class="btns-ctr"><button id="back-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleBackClick}">${r("Back")}</button> <button id="add-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleAddClick}">${r("Next")}</button></div>`}}X.styles=[G,t`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:60%;max-width:300px}#add-btn{grid-column:3/4;min-width:60%;max-width:300px}h1,h2,h3,h4,h5,h6{padding:0;margin:0}h2{font-size:20px}h3{font-size:16px;font-weight:400}`],f([n({type:Number,attribute:"demand-state"})],X.prototype,"demandState",void 0),f([n({type:String})],X.prototype,"demandGroupId",void 0),f([n({attribute:!1})],X.prototype,"demands",void 0);const ee=new URL(new URL("assets/all-checkbox-checked.svg",import.meta.url).href,import.meta.url).href,te=new URL(new URL("assets/all-checkbox-dash.svg",import.meta.url).href,import.meta.url).href,ie=new URL(new URL("assets/all-checkbox-unchecked.svg",import.meta.url).href,import.meta.url).href,ae=new URL(new URL("assets/close-container-arrow.svg",import.meta.url).href,import.meta.url).href,ne=new URL(new URL("assets/open-container-arrow.svg",import.meta.url).href,import.meta.url).href;var se;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME",e[e.NONE=2]="NONE"}(se||(se={}));let de=class extends i{constructor(){super(...arguments),this.choices=[],this.selectionState=se.ALL,this.componentMode=I.CLOSED,this.includeAll=!0,this.allChecked=!0,this.allMessage=r("Select all"),this.eventPrefix="checklist-click",this.includeButtons=!1,this.includeOther=!1,this.selectedChoices=new Set}selectChoice(e){this.selectedChoices.add(e);const t=new CustomEvent(`${this.eventPrefix}-select`,{bubbles:!0,composed:!0,detail:{id:e,"first-selection":1===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}deleteChoice(e){this.selectedChoices.delete(e);const t=new CustomEvent(`${this.eventPrefix}-deselect`,{bubbles:!0,composed:!0,detail:{id:e,"none-selected":0===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}handleChoiceClick(e){var t,i,a;const{id:n,checked:s}=e.target;if("all-checkbox"===n){const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll(".choice-checkbox");s?(this.allChecked=!0,null==e||e.forEach((e=>{const t=e;t.checked||(t.checked=!0,this.selectChoice(t.id))}))):(this.allChecked=!1,null==e||e.forEach((e=>{const t=e;t.checked&&(t.checked=!1,this.deleteChoice(t.id))})))}else if(s){this.selectChoice(n);(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("all-checkbox")).checked=!0}else if(this.deleteChoice(n),0===this.selectedChoices.size){(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("all-checkbox")).checked=!1}}handleOtherClick(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-click`,{bubbles:!0,composed:!0,detail:{checked:e.target.checked}}))}handleOtherInput(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-input`,{bubbles:!0,composed:!0,detail:{text:e.target.value}}))}updateSelectionState(){switch(this.selectedChoices.size){case 0:this.selectionState=se.NONE;break;case this.choices.length:this.selectionState=se.ALL;break;default:this.selectionState=se.SOME}}getDisplayChoices(){switch(this.componentMode){case I.CLOSED:return[];case I.OPEN:return Array.from(this.choices);case I.PARTIAL:return Array.from(this.choices).filter((e=>this.selectedChoices.has(e.id)));default:return[]}}handleButtonClick(){this.componentMode===I.CLOSED||this.componentMode===I.PARTIAL?this.componentMode=I.OPEN:this.componentMode=I.CLOSED}willUpdate(e){e.has("choices")&&(this.choices.forEach((e=>{e.checked&&this.selectedChoices.add(e.id)})),this.updateSelectionState())}render(){return e`<div class="choices-list">${R(this.includeAll&&!(this.componentMode===I.PARTIAL&&this.selectionState===se.SOME),(()=>e`<div class="all-ctr"><input id="all-checkbox" type="checkbox" @click="${this.handleChoiceClick}" ?checked="${this.allChecked}"> <label for="all-checkbox">${d(this.selectionState,[[se.NONE,()=>e`<img src="${ie}" alt="empty checkbox">`],[se.SOME,()=>e`<img src="${te}" alt="dash checkbox">`],[se.ALL,()=>e`<img src="${ee}" alt="checked checkbox">`]])}</label> <span class="all-prefix">${this.allMessage}</span></div>`))} ${this.getDisplayChoices().map((t=>e`<div class="choice-ctr"><input id="${t.id}" class="choice-checkbox" type="checkbox" ?checked="${t.checked}" ?disabled="${t.disabled}" @change="${this.handleChoiceClick}"> <label>${t.description}</label></div>`))} ${R(this.includeOther&&this.componentMode===I.OPEN,(()=>e`<div id="other-data-ctr"><div class="choice-ctr"><input id="other-checkbox" type="checkbox" @change="${this.handleOtherClick}"> <label>${r(e`<b>OTHER-DATA:</b> Specify another type of data`)}</label></div><div id="other-data-input-ctr"><span>${r("Other data type:")}</span> <input id="other-data-input" type="text"></div></div>`))}</div>${R(this.includeButtons,(()=>e`<button class="svg-btn" @click="${this.handleButtonClick}">${R(this.componentMode===I.OPEN,(()=>e`<img src="${ae}" alt="close arrow">`),(()=>e`<img src="${ne}" alt="open arrow">`))}</button>`))}`}};de.styles=[G,t`:host{display:grid}:host([selection-state='0']) .choice-checkbox{opacity:.5}:host([selection-state='0']) #all-checkbox:checked+label{opacity:1}:host([selection-state='1']) #all-checkbox+label{opacity:1}:host([selection-state='2']) .choice-checkbox{opacity:1}.choices-list{display:grid;overflow:hidden;grid-template-columns:1fr;row-gap:35px;padding:35px 0 25px 0}.choice-ctr{padding:0 30px}.all-ctr{display:flex;align-items:center;padding:0 30px}.all-prefix{padding:0 0 0 4px}#all-checkbox{display:none}#all-checkbox+label{height:13px;width:13px;display:inline-block;margin:3px 3px 3px 4px}#other-data-input-ctr{display:flex;column-gap:5px;padding:20px 55px;align-items:center}#other-data-input input{height:30px;width:100%;background:#f8f8fc;border:1px solid #e5e5e5;border-radius:4px}#other-data-input span{flex-shrink:0}`],f([n({type:Array})],de.prototype,"choices",void 0),f([n({type:Number,reflect:!0,attribute:"selection-state"})],de.prototype,"selectionState",void 0),f([n({type:Number,reflect:!0,attribute:"component-mode"})],de.prototype,"componentMode",void 0),f([n({type:Boolean})],de.prototype,"includeAll",void 0),f([n({type:Boolean,reflect:!0})],de.prototype,"allChecked",void 0),f([n({type:String,attribute:"all-message"})],de.prototype,"allMessage",void 0),f([n({type:String,attribute:"event-prefix"})],de.prototype,"eventPrefix",void 0),f([n({type:Boolean,attribute:"include-buttons"})],de.prototype,"includeButtons",void 0),f([n({type:Boolean,attribute:"include-other"})],de.prototype,"includeOther",void 0),f([s()],de.prototype,"selectedChoices",void 0),de=f([a("all-checklist")],de);let oe=class extends X{constructor(){super(),this.transparencyActions=Object.values(p).filter((e=>e.includes("TRANSPARENCY."))),this.advancedSettings=[],this.restrictions={},this._additionalMessage="",this.addEventListener("transparency-action-select",(e=>{const t={action:e.detail.id,message:this._additionalMessage,restrictions:this.restrictions};this.setDemand(t)})),this.addEventListener("transparency-action-deselect",(e=>{const{id:t}=e.detail;this.deleteDemand(t)}))}handleProvenanceTermClick(e){const{id:t}=e.target;this.restrictions.provenance={term:t},this.demands.forEach((e=>{e.restrictions.provenance.term=t}))}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}buildDemands(){return this.demands}validate(){return!0}getFormTemplate(){var t;const i=Object.values(this.demands).map((e=>e.action));return e`<p id="edit-heading-1"><b>${r("Details of my TRANSPARENCY Demand")}</b></p><div class="border--light border--rounded transparency-options"><span slot="prompt"><b>${r("I want to know:")}</b></span><all-checklist .choices="${this.transparencyActions.map((e=>{var t;return{id:e,description:S[e](),checked:i.includes(e),disabled:null===(t=!N.get(e))||void 0===t||t}}))}" all-message="${r("ALL information related to data processing practices and know if the organization has data on me")}" component-mode="${I.CLOSED}" event-prefix="transparency-action" include-buttons></all-checklist></div><slotted-dropdown header="${r("Advanced settings")}" include-buttons><div><span>${r("My demand applies to data from the following provenance:")}</span><fieldset class="provenance-restriction">${Object.values(m).map((t=>{var i,a;return e`<input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(a=null===(i=this.demands[0].restrictions)||void 0===i?void 0:i.provenance)||void 0===a?void 0:a.term)===t}" @click="${this.handleProvenanceTermClick}"><label for="${t}">${w[t]()}</label><br>`}))}</fieldset></div></slotted-dropdown><slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${0!==this.demands.length&&null!==(t=this.demands[0].message)&&void 0!==t?t:""}"></textarea></div></slotted-dropdown>`}};oe.styles=[X.styles,G,t`:host{display:grid;row-gap:35px;align-content:flex-start;margin:0}.transparency-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],f([n({type:Array,attribute:!1})],oe.prototype,"transparencyActions",void 0),f([n({type:Array})],oe.prototype,"advancedSettings",void 0),f([n({attribute:!1})],oe.prototype,"restrictions",void 0),f([s()],oe.prototype,"_additionalMessage",void 0),oe=f([a("transparency-form")],oe);class re extends i{constructor(){super(...arguments),this.demandState=T.EDIT_OPEN,this.demand={action:p.ACCESS},this.demandGroupId=self.crypto.randomUUID(),this.default=!1}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demand:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.MENU}}))}handleAddClick(){this.validate()&&(this.addToPrivacyRequest(this.demandGroupId,this.demand),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:y.REVIEW}})))}willUpdate(e){e.has("default")&&this.default&&(this.demand=this.getDefaultDemand())}render(){return e`<div>${d(this.demandState,[[T.EDIT_OPEN,()=>this.getFormTemplate(this.demand)]])}</div><div class="btns-ctr"><button id="back-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleBackClick}">${r("Back")}</button> <button id="add-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleAddClick}">${r("Next")}</button></div>`}}re.styles=[G,t`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:60%;max-width:300px}#add-btn{grid-column:3/4;min-width:60%;max-width:300px}`],f([n({type:Number,attribute:"demand-state"})],re.prototype,"demandState",void 0),f([n({attribute:!1})],re.prototype,"demand",void 0),f([n({type:String})],re.prototype,"demandGroupId",void 0),f([n({type:Boolean})],re.prototype,"default",void 0);let le=class extends re{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("access-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:v.ALL,pp:E.ALL})})),this.addEventListener("access-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getDefaultDemand(){return{action:p.ACCESS,restrictions:{privacy_scope:this.allowedDataCategories.map((e=>({dc:e,pc:v.ALL,pp:E.ALL}))),provenance:{term:m.ALL,target:u.SYSTEM},date_range:{}}}}getFormTemplate(t){var i,a,n,s,d,o,l,c,p;return e`<div id="access-form"><p id="edit-heading-1"><b>${r("Details of my ACCESS Demand")}</b></p><div class="border--light border--rounded access-options"><span slot="prompt">${r("I want to access:")}</span><all-checklist .choices="${this.allowedDataCategories.map((e=>{var i,a;return{id:e,description:D[e](),checked:-1!==(null===(a=null===(i=t.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((t=>t.dc===e))),disabled:!1}}))}" all-message="${r("ALL categories of data the organization has data on me")}" component-mode="${I.CLOSED}" event-prefix="access-option" include-buttons></all-checklist></div><slotted-dropdown header="${r("Advanced settings")}" include-buttons><div class="date-restriction"><p>${r("Specify a date range for the selected category(ies) of data:")}</p><div><span>${r("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(i=t.restrictions)||void 0===i?void 0:i.date_range)||void 0===a?void 0:a.from)?null===(s=null===(n=t.restrictions)||void 0===n?void 0:n.date_range)||void 0===s?void 0:s.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${r("to")}</span> <input id="date-end" type="date" .value="${(null===(o=null===(d=t.restrictions)||void 0===d?void 0:d.date_range)||void 0===o?void 0:o.to)?null===(c=null===(l=t.restrictions)||void 0===l?void 0:l.date_range)||void 0===c?void 0:c.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"></div></div><div><span>${r("My demand applies to data from the following provenance:")}</span><fieldset class="provenance-restriction">${Object.values(m).map((i=>{var a,n;return e`<input id="${i}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=t.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===i}" @click="${this.handleProvenanceTermClick}"><label for="${i}">${w[i]()}</label><br>`}))}</fieldset></div><div><span>${r("I address my demand to:")}</span><fieldset class="provenance-restriction">${Object.values(u).filter((e=>e!==u.ALL)).map((i=>{var a,n;return e`<input id="${i}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=t.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===i}" @click="${this.handleProvenanceTargetClick}"><label for="${i}">${O[i]()}</label><br>`}))}</fieldset></div></slotted-dropdown><slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(p=t.message)&&void 0!==p?p:""}"></textarea></div></slotted-dropdown></div>`}};le.styles=[re.styles,G,t`#access-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.access-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],f([n({type:Array,attribute:!1})],le.prototype,"allowedDataCategories",void 0),le=f([a("access-form")],le);let ce=class extends re{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("delete-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:v.ALL,pp:E.ALL})})),this.addEventListener("delete-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getDefaultDemand(){return{action:p.DELETE,restrictions:{privacy_scope:this.allowedDataCategories.map((e=>({dc:e,pc:v.ALL,pp:E.ALL}))),provenance:{term:m.ALL,target:u.SYSTEM},date_range:{}}}}getFormTemplate(t){var i,a,n,s,d,o,l,c,p;return e`<div id="delete-form"><p id="edit-heading-1"><b>${r("Details of my DELETE Demand")}</b></p><div class="border--light border--rounded delete-options"><span slot="prompt">${r("I want to delete:")}</span><all-checklist .choices="${this.allowedDataCategories.map((e=>{var i,a;return{id:e,description:D[e](),checked:-1!==(null===(a=null===(i=t.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((t=>t.dc===e))),disabled:!1}}))}" all-message="${r("ALL categories of data the organization has data on me")}" component-mode="${I.CLOSED}" event-prefix="delete-option" include-buttons></all-checklist></div><slotted-dropdown header="${r("Advanced settings")}" include-buttons><div class="date-restriction"><p>${r("Specify a date range for the selected category(ies) of data:")}</p><div><span>${r("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(i=t.restrictions)||void 0===i?void 0:i.date_range)||void 0===a?void 0:a.from)?null===(s=null===(n=t.restrictions)||void 0===n?void 0:n.date_range)||void 0===s?void 0:s.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${r("to")}</span> <input id="date-end" type="date" .value="${(null===(o=null===(d=t.restrictions)||void 0===d?void 0:d.date_range)||void 0===o?void 0:o.to)?null===(c=null===(l=t.restrictions)||void 0===l?void 0:l.date_range)||void 0===c?void 0:c.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"></div></div><div><span>${r("My demand applies to data from the following provenance:")}</span><fieldset class="provenance-restriction">${Object.values(m).map((i=>{var a,n;return e`<input id="${i}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=t.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===i}" @click="${this.handleProvenanceTermClick}"><label for="${i}">${w[i]()}</label><br>`}))}</fieldset></div><div><span>${r("I address my demand to:")}</span><fieldset class="provenance-restriction">${Object.values(u).filter((e=>e!==u.ALL)).map((i=>{var a,n;return e`<input id="${i}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=t.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===i}" @click="${this.handleProvenanceTargetClick}"><label for="${i}">${O[i]()}</label><br>`}))}</fieldset></div></slotted-dropdown><slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(p=t.message)&&void 0!==p?p:""}"></textarea></div></slotted-dropdown></div>`}};ce.styles=[re.styles,G,t`#delete-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.delete-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],f([n({type:Array,attribute:!1})],ce.prototype,"allowedDataCategories",void 0),ce=f([a("delete-form")],ce);let pe=class extends X{constructor(){super(),this._additionalMessage="",this._revokeAll=!0,this._allConsentIds=[],this._selectedConsentIds=new Set,this._allConsentIds=["28b5bee0-9db8-40ec-840e-64eafbfb9ddd"]}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}handleRevokeAllClick(){this._revokeAll=!0,this._selectedConsentIds=new Set(this._allConsentIds)}handleRevokeSomeClick(){this._revokeAll=!1,this._selectedConsentIds.clear()}handleConsentClick(e){const{id:t,checked:i}=e.target;t&&i?this._selectedConsentIds.add(t):t&&this._selectedConsentIds.delete(t)}validate(){return!0}buildDemands(){return Array.from(this._selectedConsentIds).map((e=>({action:p.REVOKE,restrictions:{consent:{id:e}}})))}willUpdate(e){e.has("demands")&&(this._selectedConsentIds.clear(),this.demands.forEach((e=>{e.restrictions&&e.restrictions.consent&&this._selectedConsentIds.add(e.restrictions.consent.id)})),this._selectedConsentIds.size>0?this._revokeAll=this._allConsentIds.every((e=>this._selectedConsentIds.has(e))):(this._revokeAll=!0,this._selectedConsentIds=new Set(this._allConsentIds)))}getFormTemplate(){return e`<div id="revoke-consent-form-ctr"><h2>${r("Details of my REVOKE CONSENT Demand")}</h2>${R(this._allConsentIds.length>0,(()=>e`<fieldset id="revoke-type-btns"><input id="revoke-all-radio" name="revoke-type" type="radio" ?checked="${this._revokeAll}" @click="${this.handleRevokeAllClick}"> <label for="revoke-all-radio">${r(e`Revoke <strong>all</strong> consents`)}</label><br><input id="revoke-some-radio" name="revoke-type" type="radio" ?checked="${!this._revokeAll}" @click="${this.handleRevokeSomeClick}"> <label for="revoke-some-radio">${r(e`Revoke <strong>some</strong> consents`)}</label></fieldset>${R(!this._revokeAll,(()=>e`<div id="consents-ctr" class="border--light border--rounded"><h3>${r(e`Check the consents you wish to <strong>revoke</strong>:`)}</h3><ul>${o(this._allConsentIds,(t=>e`<li><input id="${t}" type="checkbox" @click="${this.handleConsentClick}" ?checked="${this._selectedConsentIds.has(t)}"><label for="${t}"><strong>I no longer consent to</strong> the storage and processing of my data for the purposes of the prize draw.</label></li>`))}</ul></div>`))}<slotted-dropdown header="${r("Additional message (optional)")}" include-buttons><div class="additional-msg-ctr"><span>${r("My additional message:")}</span> <span><i>${r("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${this._additionalMessage}"></textarea></div></slotted-dropdown>`))}</div>`}};pe.styles=[X.styles,G,t`#revoke-consent-form-ctr{display:grid;row-gap:40px}#revoke-type-btns{border:none;padding:0;margin:0}#revoke-type-btns input[type=radio]{-ms-transform:scale(1.5);-webkit-transform:scale(1.5);transform:scale(1.5);margin:3px 10px 0 5px}#revoke-type-btns input:not(:nth-last-child(2)){margin-bottom:25px}#consents-ctr{padding:40px}#consents-ctr ul{list-style-type:none;margin-bottom:0}#consents-ctr ul li input{margin:3px 10px 3px 4px}.revoke-options{padding:40px 40px 20px 40px}.additional-msg-ctr{display:grid;row-gap:20px}`],f([s()],pe.prototype,"_additionalMessage",void 0),f([s()],pe.prototype,"_revokeAll",void 0),f([s()],pe.prototype,"_allConsentIds",void 0),f([s()],pe.prototype,"_selectedConsentIds",void 0),pe=f([a("revoke-consent-form")],pe);let he=class extends(A(i)){constructor(){super(),this.actions="",this.dataCategories="",this.requestId="",this._includedActions=M(),this._includedDataCategories=U(),this._currentRequestId="",this._currentDemandGroupId="",this._currentAction=p.TRANSPARENCY,this._privacyRequest={demands:[],email:"",target:u.PARTNERS},this._demands=new Map,this._config=x,this._componentState=y.MENU,this.setMultipleDemands=e=>{if(e instanceof CustomEvent){const{demandGroupId:t,demands:i}=e.detail;this._demands.set(t,i)}},this.setDemand=e=>{if(e instanceof CustomEvent){const{demandGroupId:t,demand:i}=e.detail;this._demands.set(t,[i])}},this.deleteDemand=e=>{if(e instanceof CustomEvent){const{demandGroupId:t}=e.detail;this._demands.delete(t),this.requestUpdate()}},this.changeRequestTarget=e=>{if(e instanceof CustomEvent){const{id:t}=e.detail;this._privacyRequest.target=t}},this.submitRequest=async()=>{const e=Array.from(this._demands.values()).reduce(((e,t)=>e.concat(t)),[]);this._privacyRequest.demands=e.map(((e,t)=>(e.id=t.toString(),e)));const t=await b.getInstance().sendPrivacyRequest(this._privacyRequest);this.dispatchEvent(new CustomEvent("component-state-change",{detail:{newState:y.STATUS,requestId:t.request_id}}))};const e=new URLSearchParams(window.location.search).get("requestId");e&&(this._currentRequestId=e,this._componentState=y.STATUS);const t=crypto.randomUUID();this._demands.set(t,[]),this._currentDemandGroupId=t,this.addEventListener("component-state-change",(e=>{const t=e.detail;switch(this._componentState=t.newState,this._componentState){case y.EDIT:this._currentAction=t.newAction,void 0!==t.demandGroupId&&(this._currentDemandGroupId=t.demandGroupId);break;case y.SUBMITTED:break;case y.MENU:this._demands.set(this._currentDemandGroupId,[]);break;case y.STATUS:this._currentRequestId=t.requestId}}))}connectedCallback(){super.connectedCallback(),this.addEventListener("demand-set-multiple",this.setMultipleDemands),this.addEventListener("demand-set",this.setDemand),this.addEventListener("demand-delete",this.deleteDemand),this.addEventListener("request-target-change",this.changeRequestTarget),this.addEventListener("submit-request",this.submitRequest)}disconnectedCallback(){this.removeEventListener("demand-set-multiple",this.setMultipleDemands),this.removeEventListener("demand-set",this.setDemand),this.removeEventListener("demand-delete",this.deleteDemand),this.removeEventListener("request-target-change",this.changeRequestTarget),this.removeEventListener("submit-request",this.submitRequest)}handleRestartClick(){if(this._privacyRequest={demands:[],email:"",target:u.PARTNERS},this.apiToken){const e=JSON.parse(atob(this.apiToken.split(".")[1]));this._privacyRequest.data_subject=[{id:e.uid,schema:"dsid"}]}this._demands=new Map}actionFormFactory(t){const i=this._demands.get(this._currentDemandGroupId);if(t===p.TRANSPARENCY){const a=i&&0!==i.length?i:function(e){if(e===p.TRANSPARENCY)return Object.values(p).filter((e=>e.includes("TRANSPARENCY."))).map((e=>({action:e,restrictions:{provenance:{term:m.ALL}}})));throw Error("Only TRANSPARENCY action should have multiple demands!")}(t);return e`<transparency-form .demands="${a}" .demandGroupId="${this._currentDemandGroupId}" .restrictions="${a[0].restrictions}"></transparency-form>`}const a=i&&0!==i.length?i[0]:void 0,n=!i||0===i.length;return e`${d(t,[[p.ACCESS,()=>e`<access-form .demand="${null!=i?i:""}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._includedDataCategories}" .default="${n}"></access-form>`],[p.DELETE,()=>e`<delete-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._includedDataCategories}" .default="${n}"></delete-form>`],[p.MODIFY,()=>e``],[p.OBJECT,()=>e``],[p.PORTABILITY,()=>e``],[p.RESTRICT,()=>e``],[p.REVOKE,()=>e`<revoke-consent-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}"></revoke-consent-form>`],[p["OTHER.DEMAND"],()=>e``]],(()=>e`${r("Error: Invalid Action")}`))}`}getHeadingString(t){switch(t){case y.REQUESTS:return e`${r("My Submitted Privacy Request(s)")}`;case y.STATUS:return e`${r("My Privacy Request Status")}`;default:return e`${r("My Privacy Request")}`}}willUpdate(e){if(super.willUpdate(e),e.has("actions")&&this.actions)try{const e=Array.from(JSON.parse(this.actions)).map((e=>e.toLocaleLowerCase())),t=M().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedActions=t)}catch(e){this._includedActions=M()}if(e.has("dataCategories")&&this.dataCategories)try{const e=Array.from(JSON.parse(this.dataCategories)).map((e=>e.toLocaleLowerCase())),t=U().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedDataCategories=t)}catch(e){this._includedDataCategories=U()}if(e.has("apiToken")&&this.apiToken){const e=JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("Illegal base64url string!")}return atob(t)}(this.apiToken.split(".")[1]));this._privacyRequest.data_subject=[{id:e.uid,schema:"dsid"}]}}render(){return e`<div id="prci-ctr"><div id="heading-ctr"><span class="req-hdr">${this.getHeadingString(this._componentState)}</span></div>${d(this._componentState,[[y.MENU,()=>e`<div><action-menu-view .includedActions="${this._includedActions}"></action-menu-view></div>`],[y.EDIT,()=>e`<div class="border--medium border--rounded view-ctr">${this.actionFormFactory(this._currentAction)}</div>`],[y.REVIEW,()=>e`<div class="border--medium border--rounded view-ctr">${o(this._demands.entries(),(([t,i])=>e`<review-view .demandGroupId="${t}" .demands="${i}"></review-view>`))}</div>`],[y.REQUESTS,()=>e`<requests-view></requests-view>`],[y.STATUS,()=>e`<status-view request-id="${this._currentRequestId}"></status-view>`],[y.SUBMITTED,()=>e`<p><b>${r("Your Privacy Request has been sent!")} 🎉</b></p><p>${r("You may track the status of your request below.")}</p>`],[y.AUTH,()=>e`<auth-view></auth-view>`]])}</div>`}};he.styles=[G,t`:host{display:flex;justify-content:center;justify-items:center;font-family:var(
          --prci-font-family,
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          'Open Sans',
          'Helvetica Neue',
          sans-serif
        );color:var(--prci-font-color,#000);font-size:16;text-align:left}#prci-ctr{padding:20px;max-width:1350px}#heading-ctr{padding:0 0 40px 0;max-width:1170px}.req-hdr{display:block;font-weight:700;font-size:24px;grid-column:2/3;text-align:center}button:disabled{background-color:#a9d1ff}`],f([n({type:String})],he.prototype,"actions",void 0),f([n({type:String,attribute:"data-categories"})],he.prototype,"dataCategories",void 0),f([n({type:String,attribute:"request-id"})],he.prototype,"requestId",void 0),f([s()],he.prototype,"_includedActions",void 0),f([s()],he.prototype,"_includedDataCategories",void 0),f([s()],he.prototype,"_currentRequestId",void 0),f([s()],he.prototype,"_currentDemandGroupId",void 0),f([s()],he.prototype,"_currentAction",void 0),f([s()],he.prototype,"_privacyRequest",void 0),f([s()],he.prototype,"_demands",void 0),f([s()],he.prototype,"_config",void 0),f([s()],he.prototype,"_componentState",void 0),he=f([a("bldn-priv-request"),l()],he);export{he as BldnPrivRequest};
//# sourceMappingURL=index.mapped.min.js.map
