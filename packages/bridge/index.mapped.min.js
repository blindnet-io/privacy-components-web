import{configureLocalization as e,msg as t,localized as s}from"https://unpkg.com/@lit/localize@~0.11.3/lit-localize.js?module";import{css as n,LitElement as o,html as d}from"https://unpkg.com/lit@~2.4.1/index.js?module";import{property as r,state as i,customElement as a}from"https://unpkg.com/lit@~2.4.1/decorators.js?module";import{choose as l}from"https://unpkg.com/lit@~2.4.1/directives/choose.js?module";import{bldnStyles as p}from"https://unpkg.com/@blindnet/core-ui@~0.16.2/dist/index.js?module";import{map as c}from"https://unpkg.com/lit@~2.4.1/directives/map.js?module";import{when as g}from"https://unpkg.com/lit@~2.4.1/directives/when.js?module";import{Recommendation as h,ComputationAPI as m,CoreConfigurationMixin as u}from"https://unpkg.com/@blindnet/core@~0.16.2/dist/index.js?module";function b(e,t,s,n){var o,d=arguments.length,r=d<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(r=(d<3?o(r):d>3?o(t,s,r):o(t,s))||r);return d>3&&r&&Object.defineProperty(t,s,r),r}const v=["fr","fr-CA","fr-FR"],{getLocale:y,setLocale:w}=e({sourceLocale:"en-US",targetLocales:v,loadLocale:e=>import(`./generated/locales/${e}.js`)}),_={ACCESS:()=>t("Access"),DELETE:()=>t("Delete"),MODIFY:()=>t("Modify"),OBJECT:()=>t("Object"),PORTABILITY:()=>t("Portability"),RESTRICT:()=>t("Restrict"),"REVOKE-CONSENT":()=>t("Revoke"),TRANSPARENCY:()=>t("Transparency"),"TRANSPARENCY.DATA-CATEGORIES":()=>t("Transparency - Data Categories"),"TRANSPARENCY.DPO":()=>t("Transparency - DPO"),"TRANSPARENCY.KNOWN":()=>t("Transparency - Known"),"TRANSPARENCY.LEGAL-BASES":()=>t("Transparency - Legal Bases"),"TRANSPARENCY.ORGANIZATION":()=>t("Transparency - Organization"),"TRANSPARENCY.POLICY":()=>t("Transparency - Policy"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>t("Transparency - Processing Categories"),"TRANSPARENCY.PROVENANCE":()=>t("Transparency - Provenance"),"TRANSPARENCY.PURPOSE":()=>t("Transparency - Purpose"),"TRANSPARENCY.RETENTION":()=>t("Transparency - Retention"),"TRANSPARENCY.WHERE":()=>t("Transparency - Where"),"TRANSPARENCY.WHO":()=>t("Transparency - Who"),OTHER:()=>t("Other Demand")};var R;!function(e){e[e.Respond=0]="Respond",e[e.History=1]="History",e[e.Responded=2]="Responded"}(R||(R={}));let x=class extends o{constructor(){super(...arguments),this._open=!1,this._dropdownUiState=R.Respond,this._selectedResponseType=void 0,this._message=""}isRecommended(){var e,t;return this._selectedResponseType===(null===(t=null===(e=this._demandDetails)||void 0===e?void 0:e.recommendation)||void 0===t?void 0:t.status)}handleDropdownToggleChange(e){const{newValue:t}=e.detail;this._dropdownUiState="History"===t?R.History:R.Respond}handleMessageInput(e){const{value:t}=e.target;this._message=t}handleSubmitClick(){switch(this._selectedResponseType){case h.status.GRANTED:m.getInstance().grantDemand(this.demand.id,this._message).then((()=>{this._dropdownUiState=R.Responded}));break;case h.status.PARTIALLY_GRANTED:break;case h.status.DENIED:m.getInstance().denyDemand(this.demand.id,h.motive.OTHER_MOTIVE,this._message).then((()=>{this._dropdownUiState=R.Responded}))}}getRadioSVG(e){return e?d`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 7C9.24 7 7 9.24 7 12C7 14.76 9.24 17 12 17C14.76 17 17 14.76 17 12C17 9.24 14.76 7 12 7ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z"/></svg>`:d`<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z"/></svg>`}getArrowSVG(e){return"open"===e?d`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.12 20.5469L16 14.4402L9.88 20.5469L8 18.6669L16 10.6669L24 18.6669L22.12 20.5469Z"/></svg>`:d`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.88 11.4531L16 17.5598L22.12 11.4531L24 13.3331L16 21.3331L8 13.3331L9.88 11.4531Z"/></svg>`}willUpdate(e){e.has("demand")&&this.demand&&m.getInstance().getPendingDemandDetails(this.demand.id).then((e=>{var t,s;this._demandDetails=e,(null===(t=this._demandDetails.recommendation)||void 0===t?void 0:t.status)&&(this._selectedResponseType=null===(s=this._demandDetails.recommendation)||void 0===s?void 0:s.status)}))}render(){const e=[{respStatus:h.status.GRANTED,class:"grant",display:t("Grant")},{respStatus:h.status.DENIED,class:"deny",display:t("Deny")}];return d`${g(void 0!==this.demand,(()=>{var s;return d`<div id="list-item"><span class="list-item__text">${new Date(this.demand.date).toLocaleDateString("en-gb")}</span> <span class="list-item__text">${null===(s=this.demand.data_subject)||void 0===s?void 0:s.id}</span> <span class="list-item__text">${_[this.demand.action]()}</span> <button id="list-item__expand-btn" class="svg-btn" @click="${()=>{this._open=!this._open}}">${this.getArrowSVG(this._open?"open":"close")}</button></div>${g(this._open,(()=>d`<div id="dropdown"><bldn-toggle-button left="Respond" right="History" @bldn-toggle-button-change="${this.handleDropdownToggleChange}"></bldn-toggle-button>${l(this._dropdownUiState,[[R.Respond,()=>d`<div id="dropdown__response-ctr"><span id="dropdown__response-heading">${t("Response")} -${g(this.isRecommended(),(()=>d`<span id="dropdown__response-heading--recommended">${t("Recommended")} <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 1C3.24 1 1 3.24 1 6C1 8.76 3.24 11 6 11C8.76 11 11 8.76 11 6C11 3.24 8.76 1 6 1ZM5 8.5L2.5 6L3.205 5.295L5 7.085L8.795 3.29L9.5 4L5 8.5Z" fill="currentColor"/></svg></span>`),(()=>d`<span id="dropdown__response-heading--not-recommended">${t("Not Recommended")} <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 1C3.235 1 1 3.235 1 6C1 8.765 3.235 11 6 11C8.765 11 11 8.765 11 6C11 3.235 8.765 1 6 1ZM8.5 7.795L7.795 8.5L6 6.705L4.205 8.5L3.5 7.795L5.295 6L3.5 4.205L4.205 3.5L6 5.295L7.795 3.5L8.5 4.205L6.705 6L8.5 7.795Z" fill="currentColor"/></svg></span>`))}</span> <textarea placeholder="${t("Optional Message")}" @input="${this.handleMessageInput}"></textarea><div id="dropdown__response-btns">${c(e,(e=>d`<button class="response-btn response-btn--${e.class} ${this._selectedResponseType===e.respStatus?"response-btn--selected":""}" @click="${()=>{this._selectedResponseType=e.respStatus}}">${this.getRadioSVG(this._selectedResponseType===e.respStatus)} <span>${e.display}</span></button>`))}</div></div><bldn-button @click="${this.handleSubmitClick}">${t("Submit")}</bldn-button>`],[R.History,()=>d`${t("History view coming soon!")}`],[R.Responded,()=>d`${t("Response Submmitted")} ðŸ“¨`]])}</div>`))}`}))}`}};x.styles=[p,n`:host textarea{font-family:var(
          --bldn-font-family,
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          'Open Sans',
          'Helvetica Neue',
          sans-serif
        )}#list-item{display:grid;grid-template-columns:repeat(3,2fr) 1fr;border:1px solid var(--color-light);border-radius:5px}.list-item__text{padding:20px 0}#list-item__expand-btn{border:none;border-left:1px solid var(--color-light);border-radius:0 5px 5px 0}#list-item__expand-btn svg{fill:var(--color-primary)}#dropdown{display:flex;margin-top:-5px;padding:2vh 0;row-gap:2vh;flex-direction:column;align-items:center;border:1px solid var(--color-light);border-width:0 1px 1px 1px;border-radius:0 0 20px 20px}#dropdown__response-ctr{width:75%;text-align:left}#dropdown bldn-toggle-button{width:200px}#dropdown__response-heading{color:var(--color-dark);padding:0 0 0 5px;font-size:14px}#dropdown__response-heading--recommended{display:inline-flex;align-items:center;color:var(--color-positive);column-gap:3px}#dropdown__response-heading--not-recommended{display:inline-flex;align-items:center;color:var(--color-negative);column-gap:3px}#dropdown textarea{display:block;box-sizing:border-box;height:7.5vh;width:100%;margin:3px 0 0 0;padding:5px;border:1px solid var(--color-light);border-bottom:none;border-radius:5px 5px 0 0;resize:none}#dropdown__response-btns{width:100%;display:flex;width:100%}.response-btn{display:flex;width:100%;padding:5px;align-items:center;justify-content:center;border:1px solid var(--color-light);column-gap:3px}.response-btn--grant{color:var(--color-positive);border-radius:0 0 0 5px}.response-btn--partial{color:var(--color-warning);border-radius:0}.response-btn--deny{color:var(--color-negative);border-radius:0 0 5px 0}.response-btn--selected{border-color:var(--color-primary);background:linear-gradient(0deg,rgba(var(--color-primary-rgb),.1),rgba(var(--color-primary-rgb),.1)),#fff}`],b([r({type:Object})],x.prototype,"demand",void 0),b([i()],x.prototype,"_demandDetails",void 0),b([i()],x.prototype,"_open",void 0),b([i()],x.prototype,"_dropdownUiState",void 0),b([i()],x.prototype,"_selectedResponseType",void 0),b([i()],x.prototype,"_message",void 0),x=b([a("bldn-bridge-demand-list-item")],x);let C=class extends o{constructor(){super(...arguments),this.demands=[]}render(){return d`${g(this.demands.length>0,(()=>d`<div id="list__row--heading"><span class="list__date-col"><b>${t("Created")}</b></span> <span><b>${t("Data Subject")}</b></span> <span><b>${t("Action")}</b></span></div><div id="list__items">${c(this.demands,(e=>d`<bldn-bridge-demand-list-item demand="${JSON.stringify(e)}"></bldn-bridge-demand-list-item>`))}</div>`),(()=>d`${t("No requests to display.")}`))}`}};C.styles=[p,n`:host{color:var(--color-dark)}#list__row--heading{display:grid;grid-template-columns:repeat(3,2fr) 1fr;padding:0 0 5px 0;font-size:14px}#list__items{display:grid;row-gap:10px}`],b([r({type:Array})],C.prototype,"demands",void 0),C=b([a("bldn-bridge-demand-list")],C);let f=class extends o{constructor(){super(),this.demands=[];try{w(navigator.language)}catch(e){console.log(`Could not set locale to ${navigator.language}.`)}}render(){return d`<bldn-horizontal-list choices="${JSON.stringify([{value:"all",display:t("All")},{value:"pending",display:t("Pending"),selected:!0},{value:"answered",display:t("Answered")},{value:"canceled",display:t("Canceled")}])}"></bldn-horizontal-list><bldn-bridge-demand-list demands="${JSON.stringify(this.demands)}"></bldn-bridge-demand-list>`}};f.styles=n`bldn-horizontal-list{padding-bottom:4vh}`,b([r({type:Array})],f.prototype,"demands",void 0),f=b([s(),a("bldn-bridge-requests")],f);let T=class extends o{constructor(){super();try{w(navigator.language)}catch(e){console.log(`Could not set locale to ${navigator.language}.`)}}render(){return d`Alerts view coming soon!`}};var S;T=b([s(),a("bldn-bridge-alerts")],T),function(e){e[e.requests=0]="requests",e[e.alerts=1]="alerts"}(S||(S={}));let A=class extends(u(o)){constructor(){super(),this._uiState=S.requests,this._demands=[];try{w(navigator.language)}catch(e){console.log(`Could not set locale to ${navigator.language}.`)}}handleViewToggleChange(e){const{newValue:t}=e.detail;this._uiState="Alerts"===t?S.alerts:S.requests}connectedCallback(){super.connectedCallback()}willUpdate(e){e.has("adminToken")&&this.adminToken&&m.getInstance().getPendingDemands(this.adminToken).then((e=>{this._demands=e}))}render(){return d`<bldn-toggle-button left="${t("Requests")}" right="${t("Alerts")}" @bldn-toggle-button-change="${this.handleViewToggleChange}"></bldn-toggle-button>${l(this._uiState,[[S.requests,()=>d`<bldn-bridge-requests demands="${JSON.stringify(this._demands)}"></bldn-bridge-requests>`],[S.alerts,()=>d`<bldn-bridge-alerts></bldn-bridge-alerts>`]])}`}};A.styles=n`:host{display:block;width:100%}bldn-toggle-button{padding-bottom:4vh}`,b([i()],A.prototype,"_uiState",void 0),b([i()],A.prototype,"_demands",void 0),A=b([s(),a("bldn-bridge")],A);export{A as BldnBridge};
//# sourceMappingURL=index.mapped.min.js.map
