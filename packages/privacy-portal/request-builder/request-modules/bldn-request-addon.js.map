{"version":3,"file":"bldn-request-addon.js","sources":["../../../src/request-builder/request-modules/bldn-request-addon.ts"],"sourcesContent":["import { msg } from '@lit/localize';\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { when } from 'lit/directives/when.js';\n\nimport '@blindnet/core-ui';\n\n/**\n * @event {Event} bldn-request-addon:back Fired when back button is clicked\n * @event {Event} bldn-request-addon:complete Fired when next button is clicked and onSubmit() returns true\n */\n@customElement('bldn-request-addon')\nexport class BldnRequestAddon extends LitElement {\n  /**\n   * @prop onSubmit\n   *\n   * Function that runs when the next button is clicked, returning true if\n   * the form should proceed to the next step. If the form should not proceed,\n   * the function should return false or an error message to display.\n   *\n   */\n  @property({ attribute: false }) onSubmit: () => boolean | string = () => true;\n\n  /**\n   * @prop back-text Text to display on the back button\n   */\n  @property({ type: String, attribute: 'back-text' }) backText: string =\n    msg('Back');\n\n  /**\n   * @prop next-text Text to display on the next button\n   */\n  @property({ type: String, attribute: 'next-text' }) nextText: string =\n    msg('Next');\n\n  @state() _error: boolean = false;\n\n  @state() _errorMessage: string = msg('Invalid Input');\n\n  handleBackClick(e: Event) {\n    e.stopPropagation();\n    this.dispatchEvent(\n      new Event('bldn-request-addon:back', {\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  handNextClick(e: Event) {\n    e.stopPropagation();\n    // Run submit function to set error state\n    const submitResult = this.onSubmit();\n    this._error = submitResult !== true;\n    if (this._error && submitResult !== false) {\n      this._errorMessage = submitResult as string;\n    }\n\n    // Fire event if there are no errors\n    if (this._error === false) {\n      this.dispatchEvent(\n        new Event('bldn-request-addon:complete', {\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n  }\n\n  render() {\n    return html`\n      <bldn-nav-wrapper\n        left-button=${this.backText}\n        right-button=${this.nextText}\n        @bldn-nav-wrapper:left-click=${this.handleBackClick}\n        @bldn-nav-wrapper:right-click=${this.handNextClick}\n      >\n        ${when(\n          this._error,\n          () => html` <bldn-badge danger>${this._errorMessage}</bldn-badge> `\n        )}\n        <slot></slot>\n      </bldn-nav-wrapper>\n    `;\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      text-align: center;\n    }\n\n    bldn-badge {\n      margin-top: 2em;\n    }\n  `;\n}\n"],"names":[],"mappings":"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"}