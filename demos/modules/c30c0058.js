import{s as e,i as t,y as o}from"./94d10c69.js";import{n as i}from"./44912706.js";import{l as n}from"./45acb588.js";import{A as a}from"./5d78bf87.js";import{o as r}from"./2a88b82e.js";const s=new a({domain:"blindnet.eu.auth0.com",client_id:"1C0uhFCpzvJAkFi4uqoq2oAWSgQicqHc",audience:"https://blindnet-connector-demo-staging.azurewebsites.net",redirect_uri:`${window.location.origin}/demos/modules/basic/privacy`,authorizationParams:{redirect_uri:`${window.location.origin}/demos/modules/basic/privacy`},languageDictionary:{title:"Let us verify your e-mail",passwordlessEmailInstructions:"Enter the email associated<br/>with your data",signUpTerms:"By clicking SUMBIT, you give consent for processing your data (email) for the purposes of identifying you and processing your privacy request.",success:{logIn:"Email verified.",magicLink:"We sent you a link to verify<br />your e-mail at %s."}},allowSignUp:!1,passwordlessMethod:"link"});class c extends e{static get properties(){return{_apiToken:{state:!0},_intervalId:{state:!0}}}static get styles(){return t`:host{display:block;padding:50px 100px;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.34),0 .500862px 1.50259px rgba(0,0,0,.17);border-radius:20px}@media (min-width:1250px){:host{width:950px}}bldn-privacy-portal{margin-bottom:65px}#additional-info-module{margin:4em}`}async getBlindnetToken(e){return fetch("https://blindnet-connector-demo-staging.azurewebsites.net/auth/token",{method:"GET",headers:{Authorization:`Bearer ${e}`}})}handleLoginClick(){window.location.href=`${window.location.origin}/demos/modules/basic/login`}handleLogoutClick(){s.logout()}connectedCallback(){super.connectedCallback(),this._intervalId=setInterval((()=>{const e=this.renderRoot.querySelector("bldn-priv-request")?.shadowRoot?.querySelector("bldn-submitted-requests")?.shadowRoot?.querySelector("bldn-request-status")?.shadowRoot?.querySelector("bldn-dropdown.main-section")?.querySelector("#summary-heading")?.querySelector("#refresh-request");e?.dispatchEvent(new Event("bldn-button:click"))}),3e3)}disconnectedCallback(){super.disconnectedCallback(),clearInterval(this._intervalId)}render(){const e=new URLSearchParams(window.location.search);return e.has("code")&&e.has("state")&&s.handleRedirectCallback(),void 0===this._apiToken&&s.getTokenSilently().then((e=>{this.getBlindnetToken(e).then((e=>{e.json().then((e=>{this._apiToken=e}))})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)})),o` <bldn-privacy-portal data-categories='["contact", "name", "uid", "other-data"]' api-token="${n(this._apiToken)}"> </bldn-privacy-portal> ${i(this._apiToken,(()=>o` <span>Making a Privacy Request as ${r(this._apiToken).uid}.</span> <bldn-button @click="${this.handleLogoutClick}" mode="link"> Change </bldn-button> `),(()=>o` <bldn-button @click="${this.handleLoginClick}" mode="link"> Verify your e-mail </bldn-button> `))} `}}customElements.define("basic-demo-privacy",c);export{c as AppPrivacy};
