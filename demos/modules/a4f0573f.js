import{s as e,y as o,u as t,i as n}from"./c036942b.js";import{n as a}from"./44912706.js";import{l as i}from"./a82a6594.js";import{A as r}from"./5d78bf87.js";import{o as d}from"./ef707898.js";const l=new URL(new URL("872be2eb.svg",import.meta.url).href,import.meta.url).href,s=new r({domain:"blindnet.eu.auth0.com",client_id:"1C0uhFCpzvJAkFi4uqoq2oAWSgQicqHc",audience:"https://blindnet-connector-demo-staging.azurewebsites.net",redirect_uri:`${window.location.origin}/demos/modules/addons/privacy`,authorizationParams:{redirect_uri:`${window.location.origin}/demos/modules/addons/privacy`},languageDictionary:{title:"Let us verify your e-mail",passwordlessEmailInstructions:"Enter the email associated<br/>with your data",signUpTerms:"By clicking SUMBIT, you give consent for processing your data (email) for the purposes of identifying you and processing your privacy request.",success:{logIn:"Email verified.",magicLink:"We sent you a link to verify<br />your e-mail at %s."}},allowSignUp:!1,passwordlessMethod:"link"});class c extends e{static get properties(){return{_apiToken:{state:!0},_intervalId:{state:!0}}}async getBlindnetToken(e){return fetch("https://blindnet-connector-demo-staging.azurewebsites.net/auth/token",{method:"GET",headers:{Authorization:`Bearer ${e}`}})}handleLoginClick(){window.location.href=`${window.location.origin}/demos/modules/addons/login`}handleLogoutClick(){s.logout()}connectedCallback(){super.connectedCallback(),this._intervalId=setInterval((()=>{const e=this.renderRoot.querySelector("bldn-privacy-portal")?.shadowRoot?.querySelector("bldn-request-viewer")?.shadowRoot?.querySelector("bldn-request-status")?.shadowRoot?.querySelector("bldn-dropdown.main-section")?.querySelector("#summary-heading")?.querySelector("#refresh-request");e?.dispatchEvent(new Event("bldn-button:click"))}),3e3)}disconnectedCallback(){super.disconnectedCallback(),clearInterval(this._intervalId)}render(){const e=new URLSearchParams(window.location.search);return e.has("code")&&e.has("state")&&s.handleRedirectCallback(),void 0===this._apiToken&&s.getTokenSilently().then((e=>{this.getBlindnetToken(e).then((e=>{e.json().then((e=>{this._apiToken=e}))})).catch((e=>{console.log(e)}))})).catch((e=>{})),o` <bldn-privacy-portal data-categories='["contact", "name", "uid", "other-data"]' api-token="${i(this._apiToken)}"> <bldn-request-addon slot="postFormAddon" .onSubmit="${()=>{const e=""!==this.renderRoot.querySelector("bldn-privacy-portal")?.shadowRoot?.querySelector("bldn-request-builder")?.shadowRoot?.querySelector("bldn-request-addon")?.querySelector("#id-addon")?.querySelector("#file-upload")?.value,o=this.renderRoot.querySelector("bldn-privacy-portal")?.shadowRoot?.querySelector("bldn-request-builder")?.shadowRoot?.querySelector("bldn-request-addon")?.querySelector("#consent")?.checked;return!(!e||!o)||(o?"You must upload an ID document!":e?"You must give consent!":"You must upload an ID document and give consent!")}}"> <div id="id-addon" style="margin:2em auto;padding:2em 2em;border:2px dashed #979797;border-radius:10px;color:#979797;max-width:275px"> <img src="${l}" alt="upload a file" style="margin-bottom:1em"> <p style="margin-bottom:2em">Please upload a copy of your valid identification document in PNG, JPEG, or PDF format.</p> <label for="file-upload" style="background:#4169e1;padding:.4em .8em;border-radius:5px;color:#fff"> Upload File </label> <p id="file-name" style="margin:2em 0 0 0"></p> <input id="file-upload" type="file" style="display:none" @change="${e=>{e.path[1].querySelector("#file-name").textContent=e.path[0].value.split("\\").at(-1)}}/"> </div> <div style="margin-bottom:1em;color:var(--color-dark)"> <input id="consent" type="checkbox"> <label for="consent">I consent to the automatic processing of my data</label> </div>  </bldn-request-addon> </bldn-privacy-portal> ${a(this._apiToken,(()=>o` <span>Making a Privacy Request as ${d(this._apiToken).uid}.</span> <bldn-button @click="${this.handleLogoutClick}" mode="link"> Change </bldn-button> `),(()=>o` <bldn-button @click="${this.handleLoginClick}" mode="link"> Verify your e-mail </bldn-button> `))} `}}t(c,"styles",n`:host{display:block;padding:50px 100px;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.34),0 .500862px 1.50259px rgba(0,0,0,.17);border-radius:20px}@media (min-width:1250px){:host{width:950px}}bldn-privacy-portal{margin-bottom:65px}#id-addon{background:#000}`),customElements.define("addons-demo-privacy",c);export{c as AppPrivacy};
