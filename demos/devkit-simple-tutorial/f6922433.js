import{s as e,r as t,$ as i}from"./8059ed2c.js";import{n}from"./44912706.js";import{l as o}from"./0eabec68.js";import{A as r}from"./6400a11d.js";import"./3362015e.js";function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError";var s="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,o=0,r=0,s="";n=t.charAt(r++);~n&&(i=o%4?64*i+n:n,o++%4)?s+=String.fromCharCode(255&i>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function d(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(s(e).replace(/(.)/g,(function(e,t){var i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(e){return s(t)}}function c(e){this.message=e}c.prototype=new Error,c.prototype.name="InvalidTokenError";const l=new r({domain:"blindnet.eu.auth0.com",client_id:"1C0uhFCpzvJAkFi4uqoq2oAWSgQicqHc",audience:"https://blindnet-connector-demo-staging.azurewebsites.net",redirect_uri:`${window.location.origin}/demos/devkit-simple-tutorial/privacy`,authorizationParams:{redirect_uri:`${window.location.origin}/demos/devkit-simple-tutorial/privacy`},languageDictionary:{title:"Let us verify your e-mail",passwordlessEmailInstructions:"Enter the email associated<br/>with your data",signUpTerms:"By clicking SUMBIT, you give consent for processing your data (email) for the purposes of identifying you and processing your privacy request.",success:{logIn:"Email verified.",magicLink:"We sent you a link to verify<br />your e-mail at %s."}},allowSignUp:!1,passwordlessMethod:"link"});class p extends e{static get properties(){return{_apiToken:{state:!0}}}static get styles(){return t`:host{display:block;width:40vw;max-width:950px;padding:50px 100px;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.34),0 .500862px 1.50259px rgba(0,0,0,.17);border-radius:20px}bldn-priv-request{margin-bottom:65px}`}async getBlindnetToken(e){return fetch("https://blindnet-connector-demo-staging.azurewebsites.net/auth/token",{method:"GET",headers:{Authorization:`Bearer ${e}`}})}handleLoginClick(){window.location.href=`${window.location.origin}/demos/devkit-simple-tutorial/login`}handleLogoutClick(){l.logout()}render(){return void 0===this._apiToken&&l.getTokenSilently().then((e=>{this.getBlindnetToken(e).then((e=>{e.json().then((e=>{this._apiToken=e}))})).catch((e=>{console.log(e)}))})).catch((()=>{})),i` <bldn-priv-request data-categories='["contact", "name", "uid", "other-data"]' api-token="${o(this._apiToken)}"></bldn-priv-request> ${n(this._apiToken,(()=>i` <span>Making a Privacy Request as ${function(e,t){if("string"!=typeof e)throw new c("Invalid token specified");var i=!0===(t=t||{}).header?0:1;try{return JSON.parse(d(e.split(".")[i]))}catch(e){throw new c("Invalid token specified: "+e.message)}}(this._apiToken).uid}.</span> <bldn-button @click="${this.handleLogoutClick}" mode="link"> Change </bldn-button> `),(()=>i` <bldn-button @click="${this.handleLoginClick}" mode="link"> Verify your e-mail </bldn-button> `))} `}}customElements.define("app-privacy",p);export{p as AppPrivacy};
