import{r as e,s as t,$ as i}from"./f56744d5.js";import{e as a,n,m as s,t as d,A as o,T as r,o as l,D as c,P as p,a as h,b as m,c as u,d as b}from"./98eb42f3.js";import{n as g}from"./71cd43f0.js";function v(e,t,i,a){var n,s=arguments.length,d=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(d=(s<3?n(d):s>3?n(t,i,d):n(t,i))||d);return s>3&&d&&Object.defineProperty(t,i,d),d
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class E{constructor(e){this.__litLocalizeEventHandler=e=>{"ready"===e.detail.status&&this.host.requestUpdate()},this.host=e}hostConnected(){window.addEventListener("lit-localize-status",this.__litLocalizeEventHandler)}hostDisconnected(){window.removeEventListener("lit-localize-status",this.__litLocalizeEventHandler)}}const f=e=>e.addController(new E(e)),A=()=>e=>"function"==typeof e?y(e):R(e),R=({kind:e,elements:t})=>({kind:e,elements:t,finisher(e){e.addInitializer(f)}}),y=e=>(e.addInitializer(f),e);function T(e,t,i,a){var n,s=arguments.length,d=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(d=(s<3?n(d):s>3?n(t,i,d):n(t,i))||d);return s>3&&d&&Object.defineProperty(t,i,d),d}const C=e`button{font-family:var(
      --bldn-button-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    )}`,I=new URL(new URL(new URL("a302f28e.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href,N=new URL(new URL(new URL("b39eb360.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href;let x=class extends t{constructor(){super(...arguments),this.header="Expand",this.open=!1,this.includeButtons=!1}render(){return i` ${g(this.header,(()=>i` <button class="header link-btn" @click="${()=>{this.open=!this.open}}"> <span class="medium-font underline">${this.header}</span> ${g(this.open,(()=>i`<img src="${I}" alt="close arrow">`),(()=>i`<img src="${N}" alt="open arrow">`))} <simple-icon icon="expand-${this.open?"less":"more"}"></simple-icon> </button> `))} <div id="dropdown"> <div id="content-ctr"> <slot name="prompt"></slot> <slot></slot> </div> ${g(this.includeButtons,(()=>i` <div id="close-btn-ctr"> <button class="svg-btn" @click="${()=>{this.open=!this.open}}"> <img src="${I}" alt="close arrow"> </button> </div> `))} </div> `}};x.styles=[C,e`#content-ctr{display:grid;row-gap:50px}#dropdown{display:none;border:var(--bldn-thin-border-width,1px) solid var(--bldn-light-border-color,#c4c4c4);border-radius:10px;padding:40px 40px 20px 40px;margin:20px 0 0 0}:host([open]) #dropdown{display:block}.header{margin:0}#close-btn-ctr{margin:20px 0 0 0;text-align:center}.svg-btn{border:none;padding:0;margin:0;background:0 0}.link-btn{color:#5b5b5b;text-decoration:underline;display:grid;grid-auto-flow:column;font-size:16px;column-gap:7.5px;background:0 0;border:none;width:fit-content;align-items:center;padding:0}`],T([a({type:String})],x.prototype,"header",void 0),T([a({type:Boolean,reflect:!0})],x.prototype,"open",void 0),T([a({type:Boolean,attribute:"include-buttons"})],x.prototype,"includeButtons",void 0),x=T([n("slotted-dropdown")],x);let S=class extends t{render(){return i``}};S.styles=e``,S=v([n("frequent-requests-menu")],S);const $=e`.border--light{border:1px solid;border-color:var(--prci-border-light-color,#c4c4c4)}.border--medium{border:1px solid;border-color:var(--prci-border-medium-color,#5b5b5b)}.border--dark{border:1px solid;border-color:var(--prci-border-dark-color,#000)}.border--rounded{border-radius:10px}.border--thin{border-width:var(--prci-border-thin,1px)}.border--thick{border-width:var(--prci-border-thick,2px)}button{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px}.svg-btn{border:none;padding:0;margin:0;background:0 0}.link-btn{display:grid;grid-auto-flow:column;font-size:16px;column-gap:7.5px;background:0 0;border:none;width:fit-content;align-items:center;padding:0}.nav-btn{height:50px;background-color:#18a0fb;border-width:0;border-radius:6px;font-size:18px;color:#fff;margin:0 0 -200px 0;padding:0 25px}.btn--centered{justify-self:center;justify-content:center}.btn--curved{border-radius:8px}.btn--clickable{box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}.btn--clickable:not([disabled]):hover{transform:translateY(-2px);transition:.2s;box-shadow:0 7px 10px 0 rgba(0,0,0,.3),0 4px 4px rgba(0,0,0,.2),0 6px 8px rgba(0,0,0,.2),0 10px 16px rgba(0,0,0,.2)}.btn--clickable:not([disabled]):active{transform:translateY(2px);transition:.2s;box-shadow:0 5px 10px 0 rgba(0,0,0,.1),0 2px 4px rgba(0,0,0,.2),0 4px 8px rgba(0,0,0,.2),0 8px 16px rgba(0,0,0,.2)}p{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px;padding:0;margin:0}span{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px}textarea{font-family:var(
      --prci-font-family,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif
    );font-size:16px;background:#f8f8fc;border:1px solid #e5e5e5;border-radius:8px}.text--underline{text-decoration:underline}.text--italic{font-style:italic}.text--center-vertical{align-items:center;justify-content:center}.view-ctr{padding:60px;width:1050px}.provenance-restriction{border:none;padding:0;margin:0}.provenance-restriction input{margin:20px 0 20px 30px}.provenance-restriction input:nth-last-child(3){margin:20px 0 0 30px}.provenance-restriction input:first-child{margin:35px 0 20px 30px}.date-restriction{display:grid;row-gap:35px}.date-restriction div{padding:0 0 0 30px}`,w={ACCESS:()=>s("ACCESS"),DELETE:()=>s("DELETE"),MODIFY:()=>s("MODIFY"),OBJECT:()=>s("OBJECT"),PORTABILITY:()=>s("PORTABILITY"),RESTRICT:()=>s("RESTRICT"),"REVOKE-CONSENT":()=>s("REVOKE-CONSENT"),TRANSPARENCY:()=>s("TRANSPARENCY"),"TRANSPARENCY.DATA-CATEGORIES":()=>s("TRANSPARENCY.DATA-CATEGORIES"),"TRANSPARENCY.DPO":()=>s("TRANSPARENCY.DPO"),"TRANSPARENCY.KNOWN":()=>s("TRANSPARENCY.KNOWN"),"TRANSPARENCY.LEGAL-BASES":()=>s("TRANSPARENCY.LEGAL-BASES"),"TRANSPARENCY.ORGANIZATION":()=>s("TRANSPARENCY.ORGANIZATION"),"TRANSPARENCY.POLICY":()=>s("TRANSPARENCY.POLICY"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>s("TRANSPARENCY.PROCESSING-CATEGORIES"),"TRANSPARENCY.PROVENANCE":()=>s("TRANSPARENCY.PROVENANCE"),"TRANSPARENCY.PURPOSE":()=>s("TRANSPARENCY.PURPOSE"),"TRANSPARENCY.RETENTION":()=>s("TRANSPARENCY.RETENTION"),"TRANSPARENCY.WHERE":()=>s("TRANSPARENCY.WHERE"),"TRANSPARENCY.WHO":()=>s("TRANSPARENCY.WHO"),"OTHER-DEMAND":()=>s("OTHER-DEMAND")},D={ACCESS:()=>s("Access my data"),DELETE:()=>s("Have my data deleted"),MODIFY:()=>s("Modify or complement my data"),OBJECT:()=>s("Object to processing of my data"),PORTABILITY:()=>s("Take my data and have it transfered somewhere else"),RESTRICT:()=>s("Restrict processing of my data to a particular scope"),"REVOKE-CONSENT":()=>s("Revoke previously given consent for data processing"),TRANSPARENCY:()=>s("Demand information related to data processing practices and know if the system has data on me"),"OTHER-DEMAND":()=>s("Do or know something else"),"TRANSPARENCY.DATA-CATEGORIES":()=>s("The categories of the data the organization has on me"),"TRANSPARENCY.DPO":()=>s("The contact details of the data protection officer"),"TRANSPARENCY.KNOWN":()=>s("If the organization has data on me"),"TRANSPARENCY.LEGAL-BASES":()=>s("The legal bases for processing my data (including legitimate interests)"),"TRANSPARENCY.ORGANIZATION":()=>s("The identity and contact details of the organization processing my data"),"TRANSPARENCY.POLICY":()=>s("The policies applied to processing of data concerning me"),"TRANSPARENCY.PROCESSING-CATEGORIES":()=>s("The cateogories of processing being done on the data the organization has on me"),"TRANSPARENCY.PROVENANCE":()=>s("The sources that the data concerning me come from"),"TRANSPARENCY.PURPOSE":()=>s("The purpose of the processing of the data the organization has on me"),"TRANSPARENCY.RETENTION":()=>s("For how long the data concerning me kept"),"TRANSPARENCY.WHERE":()=>s("Where the data about me is stored"),"TRANSPARENCY.WHO":()=>s("Who can access the data that the organization has on me")},k={"*":()=>s("All provenances"),USER:()=>s("The data provided by a user of the system (potentially the Data Subject)"),"USER.DATA-SUBJECT":()=>s("The data is provided by the Data Subject"),DERIVED:()=>s("The data derived from user actions, extracted from other data or inferred"),TRANSFERRED:()=>s("The data obtained by transfer from another System")},O={"*":()=>s(""),AFFILIATION:()=>s("affiliation"),"AFFILIATION.MEMBERSHIP":()=>s("affiliation membership"),"AFFILIATION.MEMBERSHIP.UNION":()=>s(""),"AFFILIATION.SCHOOL":()=>s(""),"AFFILIATION.WORKPLACE":()=>s(""),BEHAVIOR:()=>s("behavior"),"BEHAVIOR.ACTIVITY":()=>s(""),"BEHAVIOR.CONNECTION":()=>s(""),"BEHAVIOR.PREFERENCE":()=>s(""),"BEHAVIOR.TELEMETRY":()=>s(""),BIOMETRIC:()=>s("biometric"),CONTACT:()=>s("contact"),"CONTACT.EMAIL":()=>s(""),"CONTACT.ADDRESS":()=>s(""),"CONTACT.PHONE":()=>s(""),DEMOGRAPHIC:()=>s("demographic"),"DEMOGRAPHIC.AGE":()=>s(""),"DEMOGRAPHIC.BELIEFS":()=>s(""),"DEMOGRAPHIC.GENDER":()=>s(""),"DEMOGRAPHIC.ORIGIN":()=>s(""),"DEMOGRAPHIC.RACE":()=>s(""),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>s(""),DEVICE:()=>s("device"),FINANCIAL:()=>s("financial"),"FINANCIAL.BANK-ACCOUNT":()=>s("finacial bank account"),GENETIC:()=>s("genetic"),HEALTH:()=>s("health"),IMAGE:()=>s("image"),LOCATION:()=>s("location"),NAME:()=>s("name"),PROFILING:()=>s("profiling"),RELATIONSHIPS:()=>s("relationships"),UID:()=>s("uid"),"UID.ID":()=>s(""),"UID.IP":()=>s(""),"UID.USER-ACCOUNT":()=>s(""),"UID.SOCIAL-MEDIA":()=>s(""),"OTHER-DATA":()=>s("other data")},P={"*":()=>s(i`<b>ALL information related to data processing practices and know if the organization has data on me</b>`),AFFILIATION:()=>s(i`<b>AFFILIATION data:</b> Groups and Organisations I am linked to through work, studies, or membership`),"AFFILIATION.MEMBERSHIP":()=>s(i``),"AFFILIATION.MEMBERSHIP.UNION":()=>s(i``),"AFFILIATION.SCHOOL":()=>s(i``),"AFFILIATION.WORKPLACE":()=>s(i``),BEHAVIOR:()=>s(i`<b>BEHAVIOR data:</b> Data about my behavior`),"BEHAVIOR.ACTIVITY":()=>s(i``),"BEHAVIOR.CONNECTION":()=>s(i``),"BEHAVIOR.PREFERENCE":()=>s(i``),"BEHAVIOR.TELEMETRY":()=>s(i``),BIOMETRIC:()=>s(i`<b>BIOMETRIC data</b>`),CONTACT:()=>s(i`<b>CONTACT data:</b> Data allowing to contact me `),"CONTACT.EMAIL":()=>s(i``),"CONTACT.ADDRESS":()=>s(i``),"CONTACT.PHONE":()=>s(i``),DEMOGRAPHIC:()=>s(i`<b>DEMOGRAPHIC data:</b> All information allowing to class me in a demographic category`),"DEMOGRAPHIC.AGE":()=>s(i``),"DEMOGRAPHIC.BELIEFS":()=>s(i``),"DEMOGRAPHIC.GENDER":()=>s(i``),"DEMOGRAPHIC.ORIGIN":()=>s(i``),"DEMOGRAPHIC.RACE":()=>s(i``),"DEMOGRAPHIC.SEXUAL-ORIENTATION":()=>s(i``),DEVICE:()=>s(i`<b>DEVICE data:</b> Data about the device I used`),FINANCIAL:()=>s(i`<b>FINANCIAL data:</b> Payment data, financial history and data about my financial situation`),"FINANCIAL.BANK-ACCOUNT":()=>s(i``),GENETIC:()=>s(i`<b>GENETIC data</b>`),HEALTH:()=>s(i`<b>HEALTH data:</b> Data about my health`),IMAGE:()=>s(i`<b>IMAGE data:</b> Any graphic representation (e.g., image, video) of me`),LOCATION:()=>s(i`<b>LOCATION data:</b> Geographic location`),NAME:()=>s(i`<b>NAME data:</b> First names, last names, nicknames, and other names`),PROFILING:()=>s(i`<b>PROFILING data:</b> Any data establishing a degree of similarity of with others (e.g., clusters, user-profiles)`),RELATIONSHIPS:()=>s(i`<b>RELATIONSHIPS data:</b> Data about relationships I have with others, social activity and interaction`),UID:()=>s(i`<b>UID data:</b> Any data that uniquely identifies me`),"UID.ID":()=>s(i``),"UID.IP":()=>s(i``),"UID.USER-ACCOUNT":()=>s(i``),"UID.SOCIAL-MEDIA":()=>s(i``),"OTHER-DATA":()=>s(i`<b>OTHER DATA:</b> Any other categories or forms of data`)},L={"*":()=>s(i`All targets`),SYSTEM:()=>s(i`This system`),ORGANIZATION:()=>s(i`This system and all systems within this organization`),PARTNERS:()=>s(i`This system, all systems within this organization, and all partners systems where data has been <b>shared or obtained</b>`),"PARTNERS.DOWNWARD":()=>s(i`This system, all systems within this organization, and all partners systems with which data has been <b>shared</b>`),"PARTNERS.UPWARD":()=>s(i`This system, all systems within this organization, and all partners systems from which data has been <b>obtained</b>`)},_={IN_PROCESSING:()=>s(i`In processing`),PARTIALLY_COMPLETED:()=>s(i`Partially completed`),COMPLETED:()=>s(i`Completed`),CANCELED:()=>s(i`Canceled`)},M={GRANTED:()=>s("Granted"),DENIED:()=>s("Denied"),"PARTIALLY-GRANTED":()=>s("Partially Granted"),"UNDER-REVIEW":()=>s("Under Review"),CANCELED:()=>s("Canceled")},U={"NO-LONGER-THAN":()=>s("no longer than"),"NO-LESS-THAN":()=>s("no less than")},q={"CAPTURE-DATE":()=>s("capture date"),"RELATIONSHIP-START":()=>s("relationship start"),"RELATIONSHIP-END":()=>s("relationship end"),"SERVICE-START":()=>s("service start"),"SERVICE-END":()=>s("service end")};var Y,G,H,B;!function(e){e[e.MENU=0]="MENU",e[e.EDIT=1]="EDIT",e[e.REVIEW=2]="REVIEW",e[e.REQUESTS=3]="REQUESTS",e[e.SUBMITTED=4]="SUBMITTED",e[e.STATUS=5]="STATUS",e[e.AUTH=6]="AUTH"}(Y||(Y={})),function(e){e[e.BUILD=0]="BUILD",e[e.REVIEW=1]="REVIEW",e[e.SENT=2]="SENT"}(G||(G={})),function(e){e[e.SELECT_ACTION=0]="SELECT_ACTION",e[e.AUTH=1]="AUTH",e[e.EDIT_OPEN=2]="EDIT_OPEN",e[e.EDIT_COLLAPSED=3]="EDIT_COLLAPSED",e[e.REVIEW=4]="REVIEW"}(H||(H={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.PARTIAL=1]="PARTIAL",e[e.OPEN=2]="OPEN"}(B||(B={}));const F=new URL(new URL(new URL("5bdc633f.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href,j=new URL(new URL(new URL("9a788507.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href;let z=class extends t{constructor(){super(...arguments),this.demandGroupId="",this.demands=[],this.demand={action:o.ACCESS},this.confirmDelete=!1,this.target=r.PARTNERS,this._action=o.ACCESS}getAccessReviewTemplate(){var e,t,a,n,d,o;const h=null===(t=null===(e=this.demand.restrictions)||void 0===e?void 0:e.date_range)||void 0===t?void 0:t.from,m=null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n?void 0:n.to,u=null===(d=this.demand.restrictions)||void 0===d?void 0:d.provenance,b=null===(o=this.demand.restrictions)||void 0===o?void 0:o.privacy_scope;return i` <h4>${s("I want to access:")}</h4> <ul id="access-review-list" class="review-list"> ${g(b&&Object.values(c).filter((e=>!e.includes(".")&&e!==c.ALL)).every((e=>b.map((e=>e.dc)).includes(e))),(()=>i` <li>${P[c.ALL]()}</li> `),(()=>{var e;return i` ${l(null===(e=this.demand.restrictions)||void 0===e?void 0:e.privacy_scope,(e=>i`<li>${P[e.dc]()}</li> `))} `}))} </ul> ${g(h||m,(()=>i`<p>${this.getDateRangeReviewTemplate(h,m)}</p>`))} ${g((null==u?void 0:u.term)!==p.ALL,(()=>i` <p> ${s("For:")} <b>${k[u.term]()}</b> </p> `))} ${g((null==u?void 0:u.target)!==r.SYSTEM,(()=>i` <p> ${s("From:")} <b>${L[u.target]()}</b> </p> `))} ${g(this.demand.message,(()=>i` <h4>${s("Plus additional info:")}</h4> <span class="extra-msg-txt"><i>${this.demand.message}</i></span> `))} `}getDeleteReviewTemplate(){var e,t,a,n,d,o;const h=null===(t=null===(e=this.demand.restrictions)||void 0===e?void 0:e.date_range)||void 0===t?void 0:t.from,m=null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n?void 0:n.to,u=null===(d=this.demand.restrictions)||void 0===d?void 0:d.provenance,b=null===(o=this.demand.restrictions)||void 0===o?void 0:o.privacy_scope;return i` <h4>${s("I want to delete:")}</h4> <ul id="delete-review-list" class="review-list"> ${g(b&&Object.values(c).filter((e=>!e.includes(".")&&e!==c.ALL)).every((e=>b.map((e=>e.dc)).includes(e))),(()=>i` <li>${P[c.ALL]()}</li> `),(()=>{var e;return i` ${l(null===(e=this.demand.restrictions)||void 0===e?void 0:e.privacy_scope,(e=>i`<li>${P[e.dc]()}</li> `))} `}))} </ul> ${g(h||m,(()=>i`<p>${this.getDateRangeReviewTemplate(h,m)}</p>`))} ${g((null==u?void 0:u.term)!==p.ALL,(()=>i` <p> ${s("For:")} <b>${k[u.term]()}</b> </p> `))} ${g((null==u?void 0:u.target)!==r.SYSTEM,(()=>i` <p> ${s("From:")} <b>${L[u.target]()}</b> </p> `))} ${g(this.demand.message,(()=>i` <h4>${s("Plus additional info:")}</h4> <span class="extra-msg-txt"><i>${this.demand.message}</i></span> `))} `}getModifyReviewTemplate(){return i``}getObjectReviewTemplate(){return i``}getPortabilityReviewTemplate(){return i``}getRestrictReviewTemplate(){return i``}getRevokeReviewTemplate(){return i` <h4>${s("I no longer consent to:")}</h4> <ul class="review-list"> ${l(this.demands,(()=>i` <li> The storage and processing of my data for the purposes of the prize draw </li> `))} </ul> ${g(this.demands[0].message,(()=>i` <span>${s("Plus additional info:")}</span> <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span> `))} `}getTransparencyReviewTemplate(){var e;const t=null===(e=this.demands[0].restrictions)||void 0===e?void 0:e.provenance;return i` <h4>${s("I want to know:")}</h4> <ul id="transparency-review-list" class="review-list"> ${l(this.demands,(e=>i` <li><b>${D[e.action]()}</b></li> `))} </ul> ${g((null==t?void 0:t.term)!==p.ALL,(()=>i` <p> ${s("For:")} <b>${k[t.term]()}</b> </p> `))} ${g(this.demands[0].message,(()=>i` <h4>${s("Plus additional info:")}</h4> <span class="extra-msg-txt"><i>${this.demands[0].message}</i></span> `))} `}getOtherDemandReviewTemplate(){return i``}getDateRangeReviewTemplate(e,t){return e&&t?i`${s("From")} <b>${null==e?void 0:e.toLocaleDateString("en-GB")}</b> to <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:e?i`${s("Since")} <b>${null==e?void 0:e.toLocaleDateString("en-GB")}</b>`:t?i`${s("Up to")} <b>${null==t?void 0:t.toLocaleDateString("en-GB")}</b>`:i``}handleEditClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.EDIT,newAction:this.demands[0].action.includes("TRANSPARENCY")?o.TRANSPARENCY:this.demands[0].action,demandGroupId:this.demandGroupId}}))}handleDeleteClick(){this.confirmDelete=!0}handleConfirmDeleteClick(){this.dispatchEvent(new CustomEvent("demand-delete",{bubbles:!0,composed:!0,detail:{demandGroupId:this.demandGroupId}})),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}handleCancelDeleteClick(){this.confirmDelete=!1}handleTargetClick(e){const{id:t}=e.target;this.target=t,this.dispatchEvent(new CustomEvent("request-target-change",{bubbles:!0,composed:!0,detail:{id:t}}))}handleSubmitClick(){this.dispatchEvent(new Event("submit-request",{bubbles:!0,composed:!0}))}willUpdate(e){e.has("demands")&&this.demands.length>0&&(this._action=this.demands[0].action,this._action.includes("TRANSPARENCY")?this._action=o.TRANSPARENCY:[this.demand]=this.demands)}render(){return i`
      <h2><b>${s("My demand(s):")}</b></h2>
      
      <div class="dmd-review-ctr border--light border--rounded">
        <div id="review-heading-row">
          <h3 id="review-action-heading">${w[this._action]()} Demand</h3>
          <div id="review-btns">
            <button class='svg-btn' @click=${this.handleEditClick}>
              <img src=${F} alt='edit'/>
            </button>
            <button class='svg-btn' @click=${this.handleDeleteClick}>
              <img src=${j} alt='delete'/>
            </button>
          </div>
        </div>
        <div id="review-content">
          ${h(this._action,[[o.ACCESS,()=>this.getAccessReviewTemplate()],[o.DELETE,()=>this.getDeleteReviewTemplate()],[o.MODIFY,()=>this.getModifyReviewTemplate()],[o.OBJECT,()=>this.getObjectReviewTemplate()],[o.PORTABILITY,()=>this.getPortabilityReviewTemplate()],[o.RESTRICT,()=>this.getRestrictReviewTemplate()],[o.REVOKE,()=>this.getRevokeReviewTemplate()],[o.TRANSPARENCY,()=>this.getTransparencyReviewTemplate()],[o["OTHER.DEMAND"],()=>this.getOtherDemandReviewTemplate()]])}
        </div>
        ${g(this.confirmDelete,(()=>i` <div id="delete-confirm-popup" class="border--rounded"> <span class="popup-txt">${s("You are about to remove a demand")}</span> <span class="popup-txt">${s(i`Do you confirm <b>deleting this demand</b>?`)}</span> <div id="popup-btns-ctr"> <button id="confirm-delete-btn" class="btn--curved popup-btn" @click="${this.handleConfirmDeleteClick}"> ${s("Delete")} </button> <button id="cancel-delete-btn" class="btn--curved popup-btn" @click="${this.handleCancelDeleteClick}"> ${s("Cancel")} </button> </div> </div> `))}
        </div>

      </div>
      <!-- Uncomment when supporting multiple demands -->
      <!-- <div id="new-dmd-ctr" class="border--medium border--rounded">
        <span><b>${s("I want to add another demand")}</b></span>
        <button class="svg-btn">
          <img src="packages/prci/src/assets/icons/add-circle.svg" alt="add icon"></img>
        </button>
      </div> -->
      <!-- Submit button -->
      <slotted-dropdown
        id='request-settings'  
        .header=${s("Privacy Request Advanced settings")}
        include-buttons
      >
        <div>
          <span> ${s("I address my Privacy Request to:")} </span>
          <fieldset class="provenance-restriction">
            ${Object.values(r).filter((e=>e!==r.ALL)).map((e=>i` <input id="${e}" name="provenance-target" type="radio" ?checked="${this.target===e}" @click="${this.handleTargetClick}">  <label for="${e}">${L[e]()}</label><br> `))}
          </fieldset>
        </div>
      </slotted-dropdown>
      <button
        id="submit-btn"
        class="nav-btn btn--centered  btn--clickable"
        @click=${this.handleSubmitClick}
      >
        ${s("Submit Privacy Request")}
      </button>
    `}};z.styles=[$,e`:host{display:grid}:host([confirm-delete]) .dmd-review-ctr{background:#c4c4c4;opacity:.7}#review-heading-row{display:grid;grid-area:1/1/2/2;grid-template-columns:repeat(2,1fr);z-index:2}.dmd-review-ctr{display:grid;padding:40px}#review-btns{display:flex;flex-direction:row;justify-content:flex-end;column-gap:20px}.review-btn{width:24px;height:24px}#review-content{display:grid;grid-area:2/1/3/2;z-index:1}.extra-msg-txt{padding:0 0 0 20px}.review-list li:not(:last-child){margin:0 0 20px 0}.review-list{margin:0}#request-settings{margin:20px 0 0 0}#delete-confirm-popup{display:grid;row-gap:20px;background:#fff;padding:40px;z-index:2;grid-area:1/1/3/2;justify-self:center;align-self:center;width:40%;height:150px}.popup-txt{text-align:center}#popup-btns-ctr{display:flex;column-gap:50px;justify-content:center}.popup-btn{min-width:30%;max-width:200px;font-size:18px}#confirm-delete-btn{background:red;color:#fff;border:none}#cancel-delete-btn{background:#fff;color:#000;border:2px solid #18a0fb}#submit-btn{transform:translateY(35px)}h2,h3{margin-top:0}h4{font-weight:400}`],v([a({attribute:!1})],z.prototype,"demandGroupId",void 0),v([a({attribute:!1})],z.prototype,"demands",void 0),v([a({attribute:!1})],z.prototype,"demand",void 0),v([a({type:Boolean,reflect:!0,attribute:"confirm-delete"})],z.prototype,"confirmDelete",void 0),v([a({attribute:!1})],z.prototype,"target",void 0),v([d()],z.prototype,"_action",void 0),z=v([n("review-view")],z);let V=class extends t{constructor(){super(...arguments),this.action=o.ACCESS,this.disabled=!1}handleClick(){const e=new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.EDIT,newAction:this.action}});this.dispatchEvent(e)}render(){return i` <button class="action-button btn--clickable" @click="${this.handleClick}" ?disabled="${this.disabled}"> <strong>${w[this.action]()}:</strong> ${D[this.action]()} </button> `}};V.styles=[$,e`.action-button{border-radius:15px;border:.5px solid #5b5b5b;background-color:#fafafa;padding:10px 40px;height:120px;width:100%;max-width:400px;text-align:left;overflow:hidden;text-overflow:ellipsis}.btn-txt{overflow:hidden}.bolder{font-weight:700}`],v([a({attribute:!1})],V.prototype,"action",void 0),v([a({type:Boolean})],V.prototype,"disabled",void 0),V=v([n("action-item"),A()],V);const W=new Map([[o.ACCESS,!0],[o.DELETE,!0],[o.MODIFY,!1],[o.OBJECT,!1],[o.PORTABILITY,!1],[o.RESTRICT,!1],[o.REVOKE,!0],[o.TRANSPARENCY,!0],[o["TRANSPARENCY.DATA.CATEGORIES"],!0],[o["TRANSPARENCY.DPO"],!0],[o["TRANSPARENCY.KNOWN"],!0],[o["TRANSPARENCY.LEGAL.BASES"],!0],[o["TRANSPARENCY.ORGANIZATION"],!0],[o["TRANSPARENCY.POLICY"],!0],[o["TRANSPARENCY.PROCESSING.CATEGORIES"],!0],[o["TRANSPARENCY.PURPOSE"],!0],[o["TRANSPARENCY.PROVENANCE"],!0],[o["TRANSPARENCY.RETENTION"],!0],[o["TRANSPARENCY.WHERE"],!0],[o["TRANSPARENCY.WHO"],!0],[o["OTHER.DEMAND"],!0]]),K={"access-allowed-data-categories":[c.CONTACT,c.NAME,c.UID,c["OTHER-DATA"]],"delete-allowed-data-categories":[c.CONTACT,c.NAME,c.UID,c["OTHER-DATA"]]},J=new URL(new URL(new URL("c4caf5d8.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href;let Q=class extends t{constructor(){super(...arguments),this.prompt="Type of demand I want to submit:",this.includedActions=[]}handleRequestsClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REQUESTS}}))}render(){return i` <div class="view-ctr border--medium border--rounded"> <div class="prompt-heading"><b>${this.prompt}</b></div> <div class="actions-container"> ${this.includedActions.filter((e=>e!==o["OTHER.DEMAND"])).map((e=>i`<action-item .action="${e}" ?disabled="${!W.get(e)}"></action-item>`))} </div> </div> <div id="below-menu-btns-ctr"> <button id="other-dmd-btn" class="link-btn text--underline"> ${s("Click here if you want to make some other demand (please note that it might take longer to be answered)")} </button> <button id="requests-btn" class="btn--curved border--medium border--rounded btn--clickable" @click="${this.handleRequestsClick}"> <span>${s("Access my submitted Privacy Requests")}</span> <img src="${J}" alt=""> </button> </div> `}};function Z(e){if(e.demands.length>1)return"code=200, example=TRANSPARENCY Multi-Response";if(1===e.demands.length){const{action:t}=e.demands[0];return`code=200, example=${t} Response`}return"code=400"}async function X(e,t=!0){const i=function(e){const t=Object.values(c).filter((e=>e!==c.ALL&&!e.includes(".")));return e.demands.forEach((e=>{if(e.restrictions&&e.restrictions.privacy_scope){const i=e.restrictions.privacy_scope.map((e=>e.dc));t.every((e=>i.includes(e)))&&delete e.restrictions.privacy_scope}})),e}(e),a=t?"https://stoplight.io/mocks/blindnet/product-management:open-api/74767654/privacy-request":"https://devkit-pce-staging.azurewebsites.net/v0/privacy-request",n=t?{"Content-Type":"application/json",Prefer:Z(e)}:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("priv_user_id")||"john.doe@example.com"};return fetch(a,{method:"POST",headers:n,body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}Q.styles=[$,e`.actions-container{display:grid;grid-template-columns:repeat(3,1fr);gap:50px}.prompt-heading{font-size:16px;text-align:left;padding:0;margin:0 0 35px 0}#other-dmd-btn{margin:20px 0 0 0;justify-self:right;color:#5b5b5b}#below-menu-btns-ctr{display:grid;row-gap:50px;max-width:1170px}#requests-btn{display:flex;justify-content:center;justify-self:center;align-items:center;column-gap:20px;background:0 0;padding:20px;width:35%;font-size:18px;border-radius:15px}#requests-btn img{float:right}`],v([a({type:String})],Q.prototype,"prompt",void 0),v([a({attribute:!1})],Q.prototype,"includedActions",void 0),Q=v([A(),n("action-menu-view")],Q);let ee=class extends t{constructor(){super(),this._requests=[],async function(){return fetch("https://devkit-pce-staging.azurewebsites.net/v0/privacy-request/history",{method:"GET",headers:{accept:"application/json",Authorization:localStorage.getItem("priv_user_id")||"john.doe@example.com"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}().then((e=>{this._requests=e.history}))}handleRequestClick(e){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.STATUS,requestId:e.target.id}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}render(){return i` <div id="table-ctr"> <div id="requests-list"> <div class="list-header-ctr"> <span class="list-header"><b>${s("Created")}</b></span> <span class="list-header"><b>${s("Status")}</b></span> <span class="list-header"><b>${s("Demands")}</b></span> <span></span> </div> ${l(this._requests,(e=>i` <div class="list-item-ctr"> <span class="list-item">${new Date(e.date).toLocaleDateString("en-gb")}</span> <span class="list-item">${_[e.status]()}</span> <span class="list-item">${e.demands}</span> <button id="${e.id}" class="link-btn dark-font text --underline list-item" @click="${this.handleRequestClick}"> ${s("See Details")} </button> </div> `))} </div> </div> <div id="new-request-ctr"> <button id="new-request-btn" class="link-btn dark-font text --underline" @click="${this.handleNewRequestClick}"> ${s("Submit a new Privacy Request")} </button> </div> `}};function te(){return Object.values(o).filter((e=>!e.includes("TRANSPARENCY.")))}function ie(){return Object.values(c).filter((e=>!e.includes(".")))}ee.styles=[$,e`:host{display:grid;max-width:600px;margin:auto;row-gap:40px;justify-items:center}#table-ctr{width:100%}#requests-list{display:grid;row-gap:30px}.list-header-ctr{display:grid;grid-template-columns:repeat(4,1fr);text-align:center}.list-item-ctr{display:grid;grid-template-columns:repeat(4,1fr);padding:20px 0;border:2px solid #5b5b5b;border-radius:10px;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.list-item{display:inline-flex;justify-items:center;text-align:center;justify-self:center;align-items:center}.list-item:last-child{padding:0 20px 0 0}#new-request-btn{font-size:18px}`],v([d()],ee.prototype,"_requests",void 0),ee=v([n("requests-view")],ee);let ae=class extends t{constructor(){super(...arguments),this.demand={demand_id:"",date:"",requested_action:o.ACCESS,status:m.GRANTED,includes:[],system:""},this.demands=[],this.open=!1}accessResponseTemplate(e){return i` ${g([m.GRANTED,m["PARTIALLY-GRANTED"]].includes(e.status),(()=>e.data?i` <div> ${s(i`Click <a href="${e.data}.json">here</a> to download your data.`)} </div> `:i`${s("Obtaining data, please wait and refresh the page later.")}`))} `}deleteResponseTemplate(){return i``}transparencyResponseTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${e.answer} `}transparencyDcTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(e.answer,(e=>i` ${e}<br> `))} `}transparencyDpoTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${e.answer} `}transparencyKnownTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${e.answer} `}transparencyLbTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(e.answer,(e=>i` Type: ${e.lb_type}<br> Name: ${e.name}<br> Description: ${e.description}<br><br> `))} `}transparencyOrgTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${e.answer} `}transparencyPolicyTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${e.answer} `}transparencyPcTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(e.answer,(e=>i` ${e}<br> `))} `}transparencyProvTemplate(e){const t=e.answer;return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(Object.entries(e.answer),(([e,t])=>{const a=e;return i` ${l(t,(e=>i` <p> <i>${a}</i> data: ${h(e.provenance,[[p.ALL,()=>s(i``)],[p.USER,()=>s(i`Provided by a user of the <i>${e.system}</i> system`)],[p["USER.DATA-SUBJECT"],()=>s(i`Provided by you as a user of the <i>${e.system}</i> system`)],[p.TRANSFERRED,()=>s(i`Derived by user actions, extracted from other data, or inferred by the <i>${e.system}</i> system`)],[p.DERIVED,()=>s(i`Obtained by transfer from the <i>${e.system}</i> system`)]])} </p> `))} `}))} ${l(t["AFFILIATION.selector_1"],(e=>i` Provenance: ${e.provenance}<br> System: ${e.system}<br><br> `))} `}transparencyPurposeTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(e.answer,(e=>i` ${e}<br> `))} `}transparencyRetTemplate(e){const t=e.answer;return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(t.NAME,(e=>{return i`<p> ${t=c.NAME,a=e.policy_type,n=e.duration,s=e.after,i`<i>${O[t]().toLocaleUpperCase()}</i> data is kept <i>${U[a]().toLocaleUpperCase()}</i> <i>${n}</i> months after <i>${q[s]().toLocaleUpperCase()}</i>`} </p>`;var t,a,n,s}))} `}transparencyWhereTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(e.answer,(e=>i` ${e}<br> `))} `}transparencyWhoTemplate(e){return i` <p> <b>Requested info:</b> ${D[e.requested_action]()} </p> ${l(e.answer,(e=>i` ${e}<br> `))} `}render(){return i` <div class="demand-status-ctr ${this.demand.status.toLowerCase()}-dmd border--medium border--rounded"> <span class="status-type-ctr"><b>${this.demand.status}</b></span> <div class="dmd-action-ctr ${this.open?"":"round-bottom"}"> <p class="action-title"> <b>${w[this.demand.requested_action]()} ${s("Demand")}</b> </p> ${g([m.GRANTED,m["PARTIALLY-GRANTED"],m.DENIED].includes(this.demand.status),(()=>i` <button class="status-btn ${this.demand.status.toLowerCase()}-${this.open?"open":"closed"}-btn details-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}"> ${s("Details")} </button> `))} ${g(this.demand.status===m["UNDER-REVIEW"],(()=>i` <button class="status-btn cancel-btn btn--curved btn--clickable" @click="${()=>{this.open=!this.open}}"> ${s("Cancel Demand")} </button> `))} </div> ${g(this.open,(()=>i` <div id="${this.demand.demand_id}-details-ctr" class="dmd-details-ctr round-bottom"> <b>Your demand has been ${M[this.demand.status]().toLocaleLowerCase()}.</b> ${h(this.demand.requested_action,[[o.ACCESS,()=>this.accessResponseTemplate(this.demand)],[o.TRANSPARENCY,()=>this.transparencyResponseTemplate(this.demand)],[o["TRANSPARENCY.DATA.CATEGORIES"],()=>this.transparencyDcTemplate(this.demand)],[o["TRANSPARENCY.DPO"],()=>this.transparencyDpoTemplate(this.demand)],[o["TRANSPARENCY.KNOWN"],()=>this.transparencyKnownTemplate(this.demand)],[o["TRANSPARENCY.LEGAL.BASES"],()=>this.transparencyLbTemplate(this.demand)],[o["TRANSPARENCY.ORGANIZATION"],()=>this.transparencyOrgTemplate(this.demand)],[o["TRANSPARENCY.POLICY"],()=>this.transparencyPolicyTemplate(this.demand)],[o["TRANSPARENCY.PROCESSING.CATEGORIES"],()=>this.transparencyPcTemplate(this.demand)],[o["TRANSPARENCY.PROVENANCE"],()=>this.transparencyProvTemplate(this.demand)],[o["TRANSPARENCY.PURPOSE"],()=>this.transparencyPurposeTemplate(this.demand)],[o["TRANSPARENCY.RETENTION"],()=>this.transparencyRetTemplate(this.demand)],[o["TRANSPARENCY.WHERE"],()=>this.transparencyWhereTemplate(this.demand)],[o["TRANSPARENCY.WHO"],()=>this.transparencyWhoTemplate(this.demand)]])} ${g(this.demand.message,(()=>i` <p>Included message:</p> <i>${this.demand.message}</i> `))} </div> `))} </div> `}};ae.styles=[$,e`.demand-status-ctr{display:flex;flex-direction:column;border-radius:15px;border:2px solid #e6e6e6;box-shadow:0 5px 10px 0 rgba(0,0,0,.5)}.status-type-ctr{font-size:16px}.demand-status-ctr span{padding:10px 0}.dmd-action-ctr{display:grid;grid-template-columns:repeat(2,1fr);align-items:center;justify-items:center;column-gap:20px;padding:20px 20px;background:#fff}.granted-dmd{background-color:#51d214;border-color:#51d214}.granted-dmd button{border:2px solid #51d214}:host([open]) .granted-dmd button{background-color:#51d214}.denied-dmd{background-color:#f90707;border-color:#f90707}.denied-dmd button{border:2px solid #f90707}:host([open]) .denied-dmd button{background-color:#f90707}.partially-granted-dmd{background-color:#ff7a00;border-color:#ff7a00}.partially-granted-dmd button{border:2px solid #ff7a00}:host([open]) .partially-granted-dmd button{background-color:#ff7a00}:host([open]) .details-btn{color:#fff}.status-btn{background:0 0;padding:10px 40px;justify-self:center;align-self:flex-end;float:right;font-size:16px;font-weight:700}.details-btn{background-color:#fff;color:#000}.cancel-btn{border:2px solid #f90707}.round-bottom{border-bottom-left-radius:15px;border-bottom-right-radius:15px}.granted-dmd span{color:#fff}.denied-dmd span{color:#fff}.partially-granted-dmd span{color:#fff}.under-review-dmd{background-color:#e6e6e6;border-color:#e6e6e6}.cancelled-dmd{background-color:#ffc1bd;border-color:#ffc1bd}.action-title{justify-self:center}.dmd-details-ctr{display:grid;background-color:#fff;row-gap:20px;padding:10px 20px 30px 20px}p{margin:0;padding:0}`],v([a({attribute:!1})],ae.prototype,"demand",void 0),v([a({attribute:!1})],ae.prototype,"demands",void 0),v([a({type:Boolean,reflect:!0})],ae.prototype,"open",void 0),ae=v([n("status-view-item")],ae);let ne=class extends t{constructor(){super(...arguments),this.requestId="",this._requestDate=new Date,this._completedDemands=[],this._processingDemands=[],this._cancelledDemands=[],this._intervalId=void 0}reloadRequest(){(async function(e){return fetch(`https://devkit-pce-staging.azurewebsites.net/v0/privacy-request/${e}`,{method:"GET",headers:{accept:"application/json",Authorization:localStorage.getItem("priv_user_id")||"john.doe@example.com"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))})(this.requestId).then((e=>{e.length>0&&(this._requestDate=new Date(e[0].date),this._completedDemands=e.filter((e=>[m.GRANTED,m["PARTIALLY-GRANTED"],m.DENIED].includes(e.status))),this._processingDemands=e.filter((e=>e.status===m["UNDER-REVIEW"])),this._cancelledDemands=e.filter((e=>e.status===m.CANCELED))),0===this._processingDemands.length&&this._intervalId&&!this._completedDemands.some((e=>e.requested_action===o.ACCESS&&!e.data))?(clearInterval(this._intervalId),this._intervalId=void 0):this._intervalId||0===this._processingDemands.length||(this._intervalId=setInterval((()=>this.reloadRequest()),3e3))}))}willUpdate(e){e.has("requestId")&&""!==this.requestId&&this.reloadRequest()}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REQUESTS}}))}handleNewRequestClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}render(){return i` ${g(this._processingDemands.length>0,(()=>i` <p> ${s(i`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, is currently being processed.`)} </p> ${g(this._completedDemands.length>0,(()=>i` <div class="req-progress-ctr"> <p>${s("At the moment:")}</p> <p> <b>${s(i`${this._completedDemands.length} demand(s) have been completed${g(this._cancelledDemands.length>0,(()=>i` and ${this._cancelledDemands.length} demand(s) have been cancelled`))}`)}</b> </p> <p> ${s(i`${this._processingDemands.length} demand(s) are being processed`)} </p> </div> `))} `),(()=>i` <p> ${s(i`Your Privacy Request, sent on ${this._requestDate.toLocaleDateString("en-gb")}, has been processed.`)} </p> `))} ${g(this._completedDemands.length>0,(()=>i` <div id="completed-dmds-ctr" class="dmds-ctr border--medium border--rounded"> <span><b>${s("Completed Demand(s)")}</b></span> ${l(this._completedDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))} </div> `))} ${g(this._processingDemands.length>0,(()=>i` <div id="processing-dmds-ctr" class="dmds-ctr border--medium border--rounded"> <span><b>${s("Processing Demand(s)")}</b></span> ${l(this._processingDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))} </div> `))} ${g(this._cancelledDemands.length>0,(()=>i` <div id="cancelled-dmds-ctr" class="dmds-ctr border--medium border--rounded"> <span><b>${s("Cancelled Demand(s)")}</b></span> ${l(this._cancelledDemands,(e=>i`<status-view-item .demand="${e}"></status-view-item>`))} </div> `))} <div id="nav-btns-ctr"> <button class="status-nav-btn link-btn dark-font text --underline" @click="${this.handleBackClick}"> ${s("Back to my Requests")} </button> <button class="status-nav-btn link-btn dark-font text --underline" @click="${this.handleNewRequestClick}"> ${s("Submit a new Privacy Request")} </button> </div> `}};ne.styles=[$,e`:host{display:grid;row-gap:40px;max-width:900px;text-align:center;margin:auto}.req-progress-ctr{display:grid;row-gap:10px}.dmds-ctr{display:grid;row-gap:20px;padding:30px 40px 40px 40px}.dmds-ctr span{padding:0 0 20px 0}#completed-dmds-ctr{border:1px solid #18a0fb;background:rgba(24,160,251,.11)}#nav-btns-ctr{display:flex;column-gap:20px;justify-content:center;justify-items:center}.status-nav-btn{font-size:18px}p{margin:0;padding:0}`],v([a({type:String,attribute:"request-id"})],ne.prototype,"requestId",void 0),v([d()],ne.prototype,"_requestDate",void 0),v([d()],ne.prototype,"_completedDemands",void 0),v([d()],ne.prototype,"_processingDemands",void 0),v([d()],ne.prototype,"_cancelledDemands",void 0),v([d()],ne.prototype,"_intervalId",void 0),ne=v([n("status-view")],ne);class se extends t{constructor(){super(...arguments),this.demandState=H.EDIT_OPEN,this.demandGroupId=self.crypto.randomUUID(),this.demands=[]}setDemand(e){this.demands.push(e)}deleteDemand(e){this.demands.splice(this.demands.findIndex((t=>t.action===e)),1)}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set-multiple",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demands:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}handleAddClick(){this.validate()&&(this.demands=this.buildDemands(),this.addToPrivacyRequest(this.demandGroupId,this.demands),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REVIEW}})))}render(){return i` ${h(this.demandState,[[H.EDIT_OPEN,()=>this.getFormTemplate()]])} <div class="btns-ctr"> <button id="back-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleBackClick}"> ${s("Back")} </button> <button id="add-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleAddClick}"> ${s("Next")} </button> </div> `}}se.styles=[$,e`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:60%;max-width:300px}#add-btn{grid-column:3/4;min-width:60%;max-width:300px}h1,h2,h3,h4,h5,h6{padding:0;margin:0}h2{font-size:20px}h3{font-size:16px;font-weight:400}`],v([a({type:Number,attribute:"demand-state"})],se.prototype,"demandState",void 0),v([a({type:String})],se.prototype,"demandGroupId",void 0),v([a({attribute:!1})],se.prototype,"demands",void 0);const de=new URL(new URL(new URL("4ab96fc4.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href,oe=new URL(new URL(new URL("33bddcd8.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href,re=new URL(new URL(new URL("6ae513a6.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href,le=new URL(new URL(new URL("a302f28e.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href,ce=new URL(new URL(new URL("b39eb360.svg",import.meta.url).href,import.meta.url).href,import.meta.url).href;var pe;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME",e[e.NONE=2]="NONE"}(pe||(pe={}));let he=class extends t{constructor(){super(...arguments),this.choices=[],this.selectionState=pe.ALL,this.componentMode=B.CLOSED,this.includeAll=!0,this.allChecked=!0,this.allMessage=s("Select all"),this.eventPrefix="checklist-click",this.includeButtons=!1,this.includeOther=!1,this.selectedChoices=new Set}selectChoice(e){this.selectedChoices.add(e);const t=new CustomEvent(`${this.eventPrefix}-select`,{bubbles:!0,composed:!0,detail:{id:e,"first-selection":1===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}deleteChoice(e){this.selectedChoices.delete(e);const t=new CustomEvent(`${this.eventPrefix}-deselect`,{bubbles:!0,composed:!0,detail:{id:e,"none-selected":0===this.selectedChoices.size}});this.dispatchEvent(t),this.updateSelectionState()}handleChoiceClick(e){var t,i,a;const{id:n,checked:s}=e.target;if("all-checkbox"===n){const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll(".choice-checkbox");s?(this.allChecked=!0,null==e||e.forEach((e=>{const t=e;t.checked||(t.checked=!0,this.selectChoice(t.id))}))):(this.allChecked=!1,null==e||e.forEach((e=>{const t=e;t.checked&&(t.checked=!1,this.deleteChoice(t.id))})))}else if(s){this.selectChoice(n);(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("all-checkbox")).checked=!0}else if(this.deleteChoice(n),0===this.selectedChoices.size){(null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("all-checkbox")).checked=!1}}handleOtherClick(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-click`,{bubbles:!0,composed:!0,detail:{checked:e.target.checked}}))}handleOtherInput(e){this.dispatchEvent(new CustomEvent(`${this.eventPrefix}-other-input`,{bubbles:!0,composed:!0,detail:{text:e.target.value}}))}updateSelectionState(){switch(this.selectedChoices.size){case 0:this.selectionState=pe.NONE;break;case this.choices.length:this.selectionState=pe.ALL;break;default:this.selectionState=pe.SOME}}getDisplayChoices(){switch(this.componentMode){case B.CLOSED:return[];case B.OPEN:return Array.from(this.choices);case B.PARTIAL:return Array.from(this.choices).filter((e=>this.selectedChoices.has(e.id)));default:return[]}}handleButtonClick(){this.componentMode===B.CLOSED||this.componentMode===B.PARTIAL?this.componentMode=B.OPEN:this.componentMode=B.CLOSED}willUpdate(e){e.has("choices")&&(this.choices.forEach((e=>{e.checked&&this.selectedChoices.add(e.id)})),this.updateSelectionState())}render(){return i` <div class="choices-list"> ${g(this.includeAll&&!(this.componentMode===B.PARTIAL&&this.selectionState===pe.SOME),(()=>i` <div class="all-ctr"> <input id="all-checkbox" type="checkbox" @click="${this.handleChoiceClick}" ?checked="${this.allChecked}"> <label for="all-checkbox"> ${h(this.selectionState,[[pe.NONE,()=>i`<img src="${re}" alt="empty checkbox">`],[pe.SOME,()=>i`<img src="${oe}" alt="dash checkbox">`],[pe.ALL,()=>i`<img src="${de}" alt="checked checkbox">`]])} </label> <span class="all-prefix">${this.allMessage}</span> </div> `))} ${this.getDisplayChoices().map((e=>i` <div class="choice-ctr"> <input id="${e.id}" class="choice-checkbox" type="checkbox" ?checked="${e.checked}" ?disabled="${e.disabled}" @change="${this.handleChoiceClick}"> <label>${e.description}</label> </div> `))} ${g(this.includeOther&&this.componentMode===B.OPEN,(()=>i` <div id="other-data-ctr"> <div class="choice-ctr"> <input id="other-checkbox" type="checkbox" @change="${this.handleOtherClick}"> <label>${s(i`<b>OTHER-DATA:</b> Specify another type of data`)}</label> </div> <div id="other-data-input-ctr"> <span>${s("Other data type:")}</span> <input id="other-data-input" type="text"> </div> </div> `))} </div> ${g(this.includeButtons,(()=>i` <button class="svg-btn" @click="${this.handleButtonClick}"> ${g(this.componentMode===B.OPEN,(()=>i`<img src="${le}" alt="close arrow">`),(()=>i`<img src="${ce}" alt="open arrow">`))} </button> `))} `}};he.styles=[$,e`:host{display:grid}:host([selection-state='0']) .choice-checkbox{opacity:.5}:host([selection-state='0']) #all-checkbox:checked+label{opacity:1}:host([selection-state='1']) #all-checkbox+label{opacity:1}:host([selection-state='2']) .choice-checkbox{opacity:1}.choices-list{display:grid;overflow:hidden;grid-template-columns:1fr;row-gap:35px;padding:35px 0 25px 0}.choice-ctr{padding:0 30px}.all-ctr{display:flex;align-items:center;padding:0 30px}.all-prefix{padding:0 0 0 4px}#all-checkbox{display:none}#all-checkbox+label{height:13px;width:13px;display:inline-block;margin:3px 3px 3px 4px}#other-data-input-ctr{display:flex;column-gap:5px;padding:20px 55px;align-items:center}#other-data-input input{height:30px;width:100%;background:#f8f8fc;border:1px solid #e5e5e5;border-radius:4px}#other-data-input span{flex-shrink:0}`],v([a({type:Array})],he.prototype,"choices",void 0),v([a({type:Number,reflect:!0,attribute:"selection-state"})],he.prototype,"selectionState",void 0),v([a({type:Number,reflect:!0,attribute:"component-mode"})],he.prototype,"componentMode",void 0),v([a({type:Boolean})],he.prototype,"includeAll",void 0),v([a({type:Boolean,reflect:!0})],he.prototype,"allChecked",void 0),v([a({type:String,attribute:"all-message"})],he.prototype,"allMessage",void 0),v([a({type:String,attribute:"event-prefix"})],he.prototype,"eventPrefix",void 0),v([a({type:Boolean,attribute:"include-buttons"})],he.prototype,"includeButtons",void 0),v([a({type:Boolean,attribute:"include-other"})],he.prototype,"includeOther",void 0),v([d()],he.prototype,"selectedChoices",void 0),he=v([n("all-checklist")],he);let me=class extends se{constructor(){super(),this.transparencyActions=Object.values(o).filter((e=>e.includes("TRANSPARENCY."))),this.advancedSettings=[],this.restrictions={},this._additionalMessage="",this.addEventListener("transparency-action-select",(e=>{const t={action:e.detail.id,message:this._additionalMessage,restrictions:this.restrictions};this.setDemand(t)})),this.addEventListener("transparency-action-deselect",(e=>{const{id:t}=e.detail;this.deleteDemand(t)}))}handleProvenanceTermClick(e){const{id:t}=e.target;this.restrictions.provenance={term:t},this.demands.forEach((e=>{e.restrictions.provenance.term=t}))}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}buildDemands(){return this.demands}validate(){return!0}getFormTemplate(){var e;const t=Object.values(this.demands).map((e=>e.action));return i` <p id="edit-heading-1"> <b>${s("Details of my TRANSPARENCY Demand")}</b> </p> <div class="border--light border--rounded transparency-options"> <span slot="prompt"><b>${s("I want to know:")}</b></span> <all-checklist .choices="${this.transparencyActions.map((e=>{var i;return{id:e,description:D[e](),checked:t.includes(e),disabled:null===(i=!W.get(e))||void 0===i||i}}))}" all-message="${s("ALL information related to data processing practices and know if the organization has data on me")}" component-mode="${B.CLOSED}" event-prefix="transparency-action" include-buttons></all-checklist> </div> <slotted-dropdown header="${s("Advanced settings")}" include-buttons> <div> <span> ${s("My demand applies to data from the following provenance:")} </span> <fieldset class="provenance-restriction"> ${Object.values(p).map((e=>{var t,a;return i` <input id="${e}" name="provenance-term" type="radio" ?checked="${(null===(a=null===(t=this.demands[0].restrictions)||void 0===t?void 0:t.provenance)||void 0===a?void 0:a.term)===e}" @click="${this.handleProvenanceTermClick}">  <label for="${e}">${k[e]()}</label><br> `}))} </fieldset> </div> </slotted-dropdown> <slotted-dropdown header="${s("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${s("My additional message:")}</span> <span><i>${s("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${0!==this.demands.length&&null!==(e=this.demands[0].message)&&void 0!==e?e:""}"></textarea> </div> </slotted-dropdown> `}};me.styles=[se.styles,$,e`:host{display:grid;row-gap:35px;align-content:flex-start;margin:0}.transparency-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],v([a({type:Array,attribute:!1})],me.prototype,"transparencyActions",void 0),v([a({type:Array})],me.prototype,"advancedSettings",void 0),v([a({attribute:!1})],me.prototype,"restrictions",void 0),v([d()],me.prototype,"_additionalMessage",void 0),me=v([n("transparency-form")],me);class ue extends t{constructor(){super(...arguments),this.demandState=H.EDIT_OPEN,this.demand={action:o.ACCESS},this.demandGroupId=self.crypto.randomUUID(),this.default=!1}addToPrivacyRequest(e,t){this.dispatchEvent(new CustomEvent("demand-set",{bubbles:!0,composed:!0,detail:{demandGroupId:e,demand:t}}))}handleBackClick(){this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.MENU}}))}handleAddClick(){this.validate()&&(this.addToPrivacyRequest(this.demandGroupId,this.demand),this.dispatchEvent(new CustomEvent("component-state-change",{bubbles:!0,composed:!0,detail:{newState:Y.REVIEW}})))}willUpdate(e){e.has("default")&&this.default&&(this.demand=this.getDefaultDemand())}render(){return i` <div> ${h(this.demandState,[[H.EDIT_OPEN,()=>this.getFormTemplate(this.demand)]])} </div> <div class="btns-ctr"> <button id="back-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleBackClick}"> ${s("Back")} </button> <button id="add-btn" class="nav-btn btn--centered btn--clickable" @click="${this.handleAddClick}"> ${s("Next")} </button> </div> `}}ue.styles=[$,e`:host{margin:0}.btns-ctr{display:grid;grid-template-columns:1fr auto 1fr;padding:0;margin:0;transform:translateY(35px)}#back-btn{grid-column:1/2;min-width:60%;max-width:300px}#add-btn{grid-column:3/4;min-width:60%;max-width:300px}`],v([a({type:Number,attribute:"demand-state"})],ue.prototype,"demandState",void 0),v([a({attribute:!1})],ue.prototype,"demand",void 0),v([a({type:String})],ue.prototype,"demandGroupId",void 0),v([a({type:Boolean})],ue.prototype,"default",void 0);let be=class extends ue{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("access-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:u.ALL,pp:b.ALL})})),this.addEventListener("access-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getDefaultDemand(){return{action:o.ACCESS,restrictions:{privacy_scope:this.allowedDataCategories.map((e=>({dc:e,pc:u.ALL,pp:b.ALL}))),provenance:{term:p.ALL,target:r.SYSTEM},date_range:{}}}}getFormTemplate(e){var t,a,n,d,o,l,c,h,m;return i` <div id="access-form"> <p id="edit-heading-1"> <b>${s("Details of my ACCESS Demand")}</b> </p> <div class="border--light border--rounded access-options"> <span slot="prompt">${s("I want to access:")}</span> <all-checklist .choices="${this.allowedDataCategories.map((t=>{var i,a;return{id:t,description:P[t](),checked:-1!==(null===(a=null===(i=e.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((e=>e.dc===t))),disabled:!1}}))}" all-message="${s("ALL categories of data the organization has data on me")}" component-mode="${B.CLOSED}" event-prefix="access-option" include-buttons></all-checklist> </div> <slotted-dropdown header="${s("Advanced settings")}" include-buttons> <div class="date-restriction"> <p> ${s("Specify a date range for the selected category(ies) of data:")} </p> <div> <span>${s("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(t=e.restrictions)||void 0===t?void 0:t.date_range)||void 0===a?void 0:a.from)?null===(d=null===(n=e.restrictions)||void 0===n?void 0:n.date_range)||void 0===d?void 0:d.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${s("to")}</span> <input id="date-end" type="date" .value="${(null===(l=null===(o=e.restrictions)||void 0===o?void 0:o.date_range)||void 0===l?void 0:l.to)?null===(h=null===(c=e.restrictions)||void 0===c?void 0:c.date_range)||void 0===h?void 0:h.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> </div> </div> <div> <span> ${s("My demand applies to data from the following provenance:")} </span> <fieldset class="provenance-restriction"> ${Object.values(p).map((t=>{var a,n;return i` <input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}">  <label for="${t}">${k[t]()}</label><br> `}))} </fieldset> </div> <div> <span> ${s("I address my demand to:")} </span> <fieldset class="provenance-restriction"> ${Object.values(r).filter((e=>e!==r.ALL)).map((t=>{var a,n;return i` <input id="${t}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===t}" @click="${this.handleProvenanceTargetClick}">  <label for="${t}">${L[t]()}</label><br> `}))} </fieldset> </div> </slotted-dropdown> <slotted-dropdown header="${s("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${s("My additional message:")}</span> <span><i>${s("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(m=e.message)&&void 0!==m?m:""}"></textarea> </div> </slotted-dropdown> </div> `}};be.styles=[ue.styles,$,e`#access-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.access-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],v([a({type:Array,attribute:!1})],be.prototype,"allowedDataCategories",void 0),be=v([n("access-form")],be);let ge=class extends ue{constructor(){super(),this.allowedDataCategories=[],this.addEventListener("delete-option-select",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.push({dc:t,pc:u.ALL,pp:b.ALL})})),this.addEventListener("delete-option-deselect",(e=>{const{id:t}=e.detail;this.demand.restrictions.privacy_scope.splice(this.demand.restrictions.privacy_scope.findIndex((e=>e.dc===t)),1)}))}handleAdditionalMessageInput(e){const{value:t}=e.target;this.demand.message=t}handleProvenanceTermClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.term=t}handleProvenanceTargetClick(e){const{id:t}=e.target;this.demand.restrictions.provenance.target=t}handleDateRestrictionInput(e){var t,i,a,n;const{id:s,value:d}=e.target;"date-start"===s?d?this.demand.restrictions.date_range.from=new Date(d):null===(i=null===(t=this.demand.restrictions)||void 0===t?void 0:t.date_range)||void 0===i||delete i.from:"date-end"===s&&(d?this.demand.restrictions.date_range.to=new Date(d):null===(n=null===(a=this.demand.restrictions)||void 0===a?void 0:a.date_range)||void 0===n||delete n.to)}validate(){return!0}getDefaultDemand(){return{action:o.DELETE,restrictions:{privacy_scope:this.allowedDataCategories.map((e=>({dc:e,pc:u.ALL,pp:b.ALL}))),provenance:{term:p.ALL,target:r.SYSTEM},date_range:{}}}}getFormTemplate(e){var t,a,n,d,o,l,c,h,m;return i` <div id="delete-form"> <p id="edit-heading-1"> <b>${s("Details of my DELETE Demand")}</b> </p> <div class="border--light border--rounded delete-options"> <span slot="prompt">${s("I want to delete:")}</span> <all-checklist .choices="${this.allowedDataCategories.map((t=>{var i,a;return{id:t,description:P[t](),checked:-1!==(null===(a=null===(i=e.restrictions)||void 0===i?void 0:i.privacy_scope)||void 0===a?void 0:a.findIndex((e=>e.dc===t))),disabled:!1}}))}" all-message="${s("ALL categories of data the organization has data on me")}" component-mode="${B.CLOSED}" event-prefix="delete-option" include-buttons></all-checklist> </div> <slotted-dropdown header="${s("Advanced settings")}" include-buttons> <div class="date-restriction"> <p> ${s("Specify a date range for the selected category(ies) of data:")} </p> <div> <span>${s("From")}</span> <input id="date-start" type="date" .value="${(null===(a=null===(t=e.restrictions)||void 0===t?void 0:t.date_range)||void 0===a?void 0:a.from)?null===(d=null===(n=e.restrictions)||void 0===n?void 0:n.date_range)||void 0===d?void 0:d.from.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> <span>${s("to")}</span> <input id="date-end" type="date" .value="${(null===(l=null===(o=e.restrictions)||void 0===o?void 0:o.date_range)||void 0===l?void 0:l.to)?null===(h=null===(c=e.restrictions)||void 0===c?void 0:c.date_range)||void 0===h?void 0:h.to.toISOString().split("T")[0]:""}" @input="${this.handleDateRestrictionInput}"> </div> </div> <div> <span> ${s("My demand applies to data from the following provenance:")} </span> <fieldset class="provenance-restriction"> ${Object.values(p).map((t=>{var a,n;return i` <input id="${t}" name="provenance-term" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.term)===t}" @click="${this.handleProvenanceTermClick}">  <label for="${t}">${k[t]()}</label><br> `}))} </fieldset> </div> <div> <span> ${s("I address my demand to:")} </span> <fieldset class="provenance-restriction"> ${Object.values(r).filter((e=>e!==r.ALL)).map((t=>{var a,n;return i` <input id="${t}" name="provenance-target" type="radio" ?checked="${(null===(n=null===(a=e.restrictions)||void 0===a?void 0:a.provenance)||void 0===n?void 0:n.target)===t}" @click="${this.handleProvenanceTargetClick}">  <label for="${t}">${L[t]()}</label><br> `}))} </fieldset> </div> </slotted-dropdown> <slotted-dropdown header="${s("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${s("My additional message:")}</span> <span><i>${s("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${null!==(m=e.message)&&void 0!==m?m:""}"></textarea> </div> </slotted-dropdown> </div> `}};ge.styles=[ue.styles,$,e`#delete-form{display:grid;row-gap:35px;align-content:flex-start;margin:0}.delete-options{padding:40px 40px 20px 40px}#dmd-ctr{display:grid;row-gap:20px}#dmd-ctr ul{margin:0}#dmd-ctr li:not(:last-child){margin-bottom:15px}#edit-heading-1{font-weight:700;grid-column:1/2;padding:0}p{margin:0}.additional-msg-ctr{display:grid;row-gap:20px;margin:0 0 25px 0}`],v([a({type:Array,attribute:!1})],ge.prototype,"allowedDataCategories",void 0),ge=v([n("delete-form")],ge);let ve=class extends se{constructor(){super(),this._additionalMessage="",this._revokeAll=!0,this._allConsentIds=[],this._selectedConsentIds=new Set,this._allConsentIds=["28b5bee0-9db8-40ec-840e-64eafbfb9ddd"]}handleAdditionalMessageInput(e){this._additionalMessage=e.target.value,this.demands.forEach((e=>{e.message=this._additionalMessage}))}handleRevokeAllClick(){this._revokeAll=!0,this._selectedConsentIds=new Set(this._allConsentIds)}handleRevokeSomeClick(){this._revokeAll=!1,this._selectedConsentIds.clear()}handleConsentClick(e){const{id:t,checked:i}=e.target;t&&i?this._selectedConsentIds.add(t):t&&this._selectedConsentIds.delete(t)}validate(){return!0}buildDemands(){return Array.from(this._selectedConsentIds).map((e=>({action:o.REVOKE,restrictions:{consent:{id:e}}})))}willUpdate(e){e.has("demands")&&(this._selectedConsentIds.clear(),this.demands.forEach((e=>{e.restrictions&&e.restrictions.consent&&this._selectedConsentIds.add(e.restrictions.consent.id)})),this._selectedConsentIds.size>0?this._revokeAll=this._allConsentIds.every((e=>this._selectedConsentIds.has(e))):(this._revokeAll=!0,this._selectedConsentIds=new Set(this._allConsentIds)))}getFormTemplate(){return i` <div id="revoke-consent-form-ctr"> <h2>${s("Details of my REVOKE CONSENT Demand")}</h2> ${g(this._allConsentIds.length>0,(()=>i` <fieldset id="revoke-type-btns"> <input id="revoke-all-radio" name="revoke-type" type="radio" ?checked="${this._revokeAll}" @click="${this.handleRevokeAllClick}"> <label for="revoke-all-radio">${s(i`Revoke <strong>all</strong> consents`)}</label><br> <input id="revoke-some-radio" name="revoke-type" type="radio" ?checked="${!this._revokeAll}" @click="${this.handleRevokeSomeClick}"> <label for="revoke-some-radio">${s(i`Revoke <strong>some</strong> consents`)}</label> </fieldset> ${g(!this._revokeAll,(()=>i` <div id="consents-ctr" class="border--light border--rounded"> <h3> ${s(i`Check the consents you wish to <strong>revoke</strong>:`)} </h3> <ul> ${l(this._allConsentIds,(e=>i` <li><input id="${e}" type="checkbox" @click="${this.handleConsentClick}" ?checked="${this._selectedConsentIds.has(e)}"><label for="${e}"><strong>I no longer consent to</strong> the storage and processing of my data for the purposes of this draw</label></li> `))} </ul> </div> `))} <slotted-dropdown header="${s("Additional message (optional)")}" include-buttons> <div class="additional-msg-ctr"> <span class="">${s("My additional message:")}</span> <span><i>${s("Please note that adding a personalized message might lead to the demand taking longer to be processed")}</i></span> <textarea id="additional-msg" class="std-txt-area" name="paragraph_text" cols="50" rows="10" @input="${this.handleAdditionalMessageInput}" .value="${this._additionalMessage}"></textarea> </div> </slotted-dropdown> `))} </div> `}};ve.styles=[se.styles,$,e`#revoke-consent-form-ctr{display:grid;row-gap:40px}#revoke-type-btns{border:none;padding:0;margin:0}#revoke-type-btns input[type=radio]{-ms-transform:scale(1.5);-webkit-transform:scale(1.5);transform:scale(1.5);margin:3px 10px 0 5px}#revoke-type-btns input:not(:nth-last-child(2)){margin-bottom:25px}#consents-ctr{padding:40px}#consents-ctr ul{list-style-type:none;margin-bottom:0}#consents-ctr ul li input{margin:3px 10px 3px 4px}.revoke-options{padding:40px 40px 20px 40px}.additional-msg-ctr{display:grid;row-gap:20px}`],v([d()],ve.prototype,"_additionalMessage",void 0),v([d()],ve.prototype,"_revokeAll",void 0),v([d()],ve.prototype,"_allConsentIds",void 0),v([d()],ve.prototype,"_selectedConsentIds",void 0),ve=v([n("revoke-consent-form")],ve);let Ee=class extends t{constructor(){super(),this.actions="",this.dataCategories="",this._includedActions=te(),this._includedDataCategories=ie(),this._currentRequestId="",this._currentDemandGroupId="",this._currentAction=o.TRANSPARENCY,this._privacyRequest={demands:[],data_subject:[{id:localStorage.getItem("priv_user_id")||"john.doe@example.com",schema:"dsid"}],email:"",target:r.PARTNERS},this._demands=new Map,this._config=K,this._componentState=Y.MENU;const e=self.crypto.randomUUID();this._demands.set(e,[]),this._currentDemandGroupId=e,this.addEventListener("component-state-change",(e=>{const t=e.detail;switch(this._componentState=t.newState,this._componentState){case Y.EDIT:this._currentAction=t.newAction,void 0!==t.demandGroupId&&(this._currentDemandGroupId=t.demandGroupId);break;case Y.SUBMITTED:break;case Y.MENU:this._demands.set(this._currentDemandGroupId,[]);break;case Y.STATUS:this._currentRequestId=t.requestId}})),this.addEventListener("demand-set-multiple",(e=>{const{demandGroupId:t,demands:i}=e.detail;this._demands.set(t,i)})),this.addEventListener("demand-set",(e=>{const{demandGroupId:t,demand:i}=e.detail;this._demands.set(t,[i])})),this.addEventListener("demand-delete",(e=>{const{demandGroupId:t}=e.detail;this._demands.delete(t),this.requestUpdate()})),this.addEventListener("request-target-change",(e=>{const{id:t}=e.detail;this._privacyRequest.target=t})),this.addEventListener("submit-request",(()=>{const e=Array.from(this._demands.values()).reduce(((e,t)=>e.concat(t)),[]);this._privacyRequest.demands=e.map(((e,t)=>(e.id=t.toString(),e))),X(this._privacyRequest,!1).then((e=>{this.dispatchEvent(new CustomEvent("component-state-change",{detail:{newState:Y.STATUS,requestId:e.request_id}}))}))}))}handleRestartClick(){this._privacyRequest={demands:[],data_subject:[{id:localStorage.getItem("priv_user_id")||"john.doe@example.com",schema:"dsid"}],email:"",target:r.PARTNERS},this._demands=new Map}actionFormFactory(e){const t=this._demands.get(this._currentDemandGroupId);if(e===o.TRANSPARENCY){const a=t&&0!==t.length?t:function(e){if(e===o.TRANSPARENCY)return Object.values(o).filter((e=>e.includes("TRANSPARENCY."))).map((e=>({action:e,restrictions:{provenance:{term:p.ALL}}})));throw Error("Only TRANSPARENCY action should have multiple demands!")}(e);return i` <transparency-form .demands="${a}" .demandGroupId="${this._currentDemandGroupId}" .restrictions="${a[0].restrictions}"></transparency-form> `}const a=t&&0!==t.length?t[0]:void 0,n=!t||0===t.length;return i` ${h(e,[[o.ACCESS,()=>i` <access-form .demand="${null!=t?t:""}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._includedDataCategories}" .default="${n}"></access-form> `],[o.DELETE,()=>i` <delete-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}" .allowedDataCategories="${this._includedDataCategories}" .default="${n}"></delete-form> `],[o.MODIFY,()=>i``],[o.OBJECT,()=>i``],[o.PORTABILITY,()=>i``],[o.RESTRICT,()=>i``],[o.REVOKE,()=>i` <revoke-consent-form .demand="${a}" .demandGroupId="${this._currentDemandGroupId}"></revoke-consent-form> `],[o["OTHER.DEMAND"],()=>i``]],(()=>i`${s("Error: Invalid Action")}`))} `}getHeadingString(e){switch(e){case Y.REQUESTS:return i`${s("My Submitted Privacy Request(s)")}`;case Y.STATUS:return i`${s("My Privacy Request Status")}`;default:return i`${s("My Privacy Request")}`}}willUpdate(e){if(e.has("actions")&&this.actions)try{const e=Array.from(JSON.parse(this.actions)).map((e=>e.toLocaleLowerCase())),t=te().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedActions=t)}catch(e){this._includedActions=te()}if(e.has("dataCategories")&&this.dataCategories)try{const e=Array.from(JSON.parse(this.dataCategories)).map((e=>e.toLocaleLowerCase())),t=ie().filter((t=>e.includes(t.toLocaleLowerCase())));t.length>0&&(this._includedDataCategories=t)}catch(e){this._includedDataCategories=ie()}}render(){return i` <div id="prci-ctr"> <div id="heading-ctr"> <span class="req-hdr">${this.getHeadingString(this._componentState)}</span> </div> ${h(this._componentState,[[Y.MENU,()=>i` <div> <action-menu-view .includedActions="${this._includedActions}"></action-menu-view> </div> `],[Y.EDIT,()=>i` <div class="border--medium border--rounded view-ctr"> ${this.actionFormFactory(this._currentAction)} </div> `],[Y.REVIEW,()=>i` <div class="border--medium border--rounded view-ctr"> ${l(this._demands.entries(),(([e,t])=>i`<review-view .demandGroupId="${e}" .demands="${t}"></review-view>`))} </div> `],[Y.REQUESTS,()=>i` <requests-view></requests-view> `],[Y.STATUS,()=>i` <status-view request-id="${this._currentRequestId}"></status-view>`],[Y.SUBMITTED,()=>i` <p> <b>${s("Your Privacy Request has been sent!")} 🎉</b> </p> <p>${s("You may track the status of your request below.")}</p> `],[Y.AUTH,()=>i` <auth-view></auth-view> `]])} </div> `}};Ee.styles=[$,e`:host{display:flex;justify-content:center;justify-items:center;font-family:var(
          --prci-font-family,
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          'Open Sans',
          'Helvetica Neue',
          sans-serif
        );color:var(--prci-font-color,#000);font-size:16;text-align:left}#prci-ctr{padding:20px;max-width:1350px}#heading-ctr{padding:0 0 40px 0;max-width:1170px}.req-hdr{display:block;font-weight:700;font-size:24px;grid-column:2/3;text-align:center}button:disabled{background-color:#a9d1ff}`],v([a({type:String})],Ee.prototype,"actions",void 0),v([a({type:String,attribute:"data-categories"})],Ee.prototype,"dataCategories",void 0),v([d()],Ee.prototype,"_includedActions",void 0),v([d()],Ee.prototype,"_includedDataCategories",void 0),v([d()],Ee.prototype,"_currentRequestId",void 0),v([d()],Ee.prototype,"_currentDemandGroupId",void 0),v([d()],Ee.prototype,"_currentAction",void 0),v([d()],Ee.prototype,"_privacyRequest",void 0),v([d()],Ee.prototype,"_demands",void 0),v([d()],Ee.prototype,"_config",void 0),v([d()],Ee.prototype,"_componentState",void 0),Ee=v([n("bldn-priv-request"),A()],Ee);class fe extends t{static get styles(){return e``}render(){return i`<bldn-priv-request></bldn-priv-request>`}}customElements.define("app-privacy",fe);export{fe as AppPrivacy};
